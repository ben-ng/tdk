require=function(e,t,n){function i(n,s){if(!t[n]){if(!e[n]){var o=typeof require=="function"&&require;if(!s&&o)return o(n,!0);if(r)return r(n,!0);throw new Error("Cannot find module '"+n+"'")}var u=t[n]={exports:{}};e[n][0].call(u.exports,function(t){var r=e[n][1][t];return i(r?r:t)},u,u.exports)}return t[n].exports}var r=typeof require=="function"&&require;for(var s=0;s<n.length;s++)i(n[s]);return i}({"jquery-browserify":[function(require,module,exports){module.exports=require("Gb3VIQ")},{}],Gb3VIQ:[function(require,module,exports){!function(){!function(root,factory){if(typeof exports==="object"){module.exports=factory()}else if(typeof define==="function"&&define.amd){define([],factory)}else{root.returnExports=factory()}}(this,function(){return function(window,undefined){var rootjQuery,readyList,document=window.document,location=window.location,navigator=window.navigator,_jQuery=window.jQuery,_$=window.$,core_push=Array.prototype.push,core_slice=Array.prototype.slice,core_indexOf=Array.prototype.indexOf,core_toString=Object.prototype.toString,core_hasOwn=Object.prototype.hasOwnProperty,core_trim=String.prototype.trim,jQuery=function(selector,context){return new jQuery.fn.init(selector,context,rootjQuery)},core_pnum=/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source,core_rnotwhite=/\S/,core_rspace=/\s+/,rtrim=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,rquickExpr=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,rsingleTag=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,rvalidchars=/^[\],:{}\s]*$/,rvalidbraces=/(?:^|:|,)(?:\s*\[)+/g,rvalidescape=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,rvalidtokens=/"[^"\\\r\n]*"|true|false|null|-?(?:\d\d*\.|)\d+(?:[eE][\-+]?\d+|)/g,rmsPrefix=/^-ms-/,rdashAlpha=/-([\da-z])/gi,fcamelCase=function(all,letter){return(letter+"").toUpperCase()},DOMContentLoaded=function(){if(document.addEventListener){document.removeEventListener("DOMContentLoaded",DOMContentLoaded,false);jQuery.ready()}else if(document.readyState==="complete"){document.detachEvent("onreadystatechange",DOMContentLoaded);jQuery.ready()}},class2type={};jQuery.fn=jQuery.prototype={constructor:jQuery,init:function(selector,context,rootjQuery){var match,elem,ret,doc;if(!selector){return this}if(selector.nodeType){this.context=this[0]=selector;this.length=1;return this}if(typeof selector==="string"){if(selector.charAt(0)==="<"&&selector.charAt(selector.length-1)===">"&&selector.length>=3){match=[null,selector,null]}else{match=rquickExpr.exec(selector)}if(match&&(match[1]||!context)){if(match[1]){context=context instanceof jQuery?context[0]:context;doc=context&&context.nodeType?context.ownerDocument||context:document;selector=jQuery.parseHTML(match[1],doc,true);if(rsingleTag.test(match[1])&&jQuery.isPlainObject(context)){this.attr.call(selector,context,true)}return jQuery.merge(this,selector)}else{elem=document.getElementById(match[2]);if(elem&&elem.parentNode){if(elem.id!==match[2]){return rootjQuery.find(selector)}this.length=1;this[0]=elem}this.context=document;this.selector=selector;return this}}else if(!context||context.jquery){return(context||rootjQuery).find(selector)}else{return this.constructor(context).find(selector)}}else if(jQuery.isFunction(selector)){return rootjQuery.ready(selector)}if(selector.selector!==undefined){this.selector=selector.selector;this.context=selector.context}return jQuery.makeArray(selector,this)},selector:"",jquery:"1.8.1",length:0,size:function(){return this.length},toArray:function(){return core_slice.call(this)},get:function(num){return num==null?this.toArray():num<0?this[this.length+num]:this[num]},pushStack:function(elems,name,selector){var ret=jQuery.merge(this.constructor(),elems);ret.prevObject=this;ret.context=this.context;if(name==="find"){ret.selector=this.selector+(this.selector?" ":"")+selector}else if(name){ret.selector=this.selector+"."+name+"("+selector+")"}return ret},each:function(callback,args){return jQuery.each(this,callback,args)},ready:function(fn){jQuery.ready.promise().done(fn);return this},eq:function(i){i=+i;return i===-1?this.slice(i):this.slice(i,i+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(core_slice.apply(this,arguments),"slice",core_slice.call(arguments).join(","))},map:function(callback){return this.pushStack(jQuery.map(this,function(elem,i){return callback.call(elem,i,elem)}))},end:function(){return this.prevObject||this.constructor(null)},push:core_push,sort:[].sort,splice:[].splice};jQuery.fn.init.prototype=jQuery.fn;jQuery.extend=jQuery.fn.extend=function(){var options,name,src,copy,copyIsArray,clone,target=arguments[0]||{},i=1,length=arguments.length,deep=false;if(typeof target==="boolean"){deep=target;target=arguments[1]||{};i=2}if(typeof target!=="object"&&!jQuery.isFunction(target)){target={}}if(length===i){target=this;--i}for(;i<length;i++){if((options=arguments[i])!=null){for(name in options){src=target[name];copy=options[name];if(target===copy){continue}if(deep&&copy&&(jQuery.isPlainObject(copy)||(copyIsArray=jQuery.isArray(copy)))){if(copyIsArray){copyIsArray=false;clone=src&&jQuery.isArray(src)?src:[]}else{clone=src&&jQuery.isPlainObject(src)?src:{}}target[name]=jQuery.extend(deep,clone,copy)}else if(copy!==undefined){target[name]=copy}}}}return target};jQuery.extend({noConflict:function(deep){if(window.$===jQuery){window.$=_$}if(deep&&window.jQuery===jQuery){window.jQuery=_jQuery}return jQuery},isReady:false,readyWait:1,holdReady:function(hold){if(hold){jQuery.readyWait++}else{jQuery.ready(true)}},ready:function(wait){if(wait===true?--jQuery.readyWait:jQuery.isReady){return}if(!document.body){return setTimeout(jQuery.ready,1)}jQuery.isReady=true;if(wait!==true&&--jQuery.readyWait>0){return}readyList.resolveWith(document,[jQuery]);if(jQuery.fn.trigger){jQuery(document).trigger("ready").off("ready")}},isFunction:function(obj){return jQuery.type(obj)==="function"},isArray:Array.isArray||function(obj){return jQuery.type(obj)==="array"},isWindow:function(obj){return obj!=null&&obj==obj.window},isNumeric:function(obj){return!isNaN(parseFloat(obj))&&isFinite(obj)},type:function(obj){return obj==null?String(obj):class2type[core_toString.call(obj)]||"object"},isPlainObject:function(obj){if(!obj||jQuery.type(obj)!=="object"||obj.nodeType||jQuery.isWindow(obj)){return false}try{if(obj.constructor&&!core_hasOwn.call(obj,"constructor")&&!core_hasOwn.call(obj.constructor.prototype,"isPrototypeOf")){return false}}catch(e){return false}var key;for(key in obj){}return key===undefined||core_hasOwn.call(obj,key)},isEmptyObject:function(obj){var name;for(name in obj){return false}return true},error:function(msg){throw new Error(msg)},parseHTML:function(data,context,scripts){var parsed;if(!data||typeof data!=="string"){return null}if(typeof context==="boolean"){scripts=context;context=0}context=context||document;if(parsed=rsingleTag.exec(data)){return[context.createElement(parsed[1])]}parsed=jQuery.buildFragment([data],context,scripts?null:[]);return jQuery.merge([],(parsed.cacheable?jQuery.clone(parsed.fragment):parsed.fragment).childNodes)},parseJSON:function(data){if(!data||typeof data!=="string"){return null}data=jQuery.trim(data);if(window.JSON&&window.JSON.parse){return window.JSON.parse(data)}if(rvalidchars.test(data.replace(rvalidescape,"@").replace(rvalidtokens,"]").replace(rvalidbraces,""))){return new Function("return "+data)()}jQuery.error("Invalid JSON: "+data)},parseXML:function(data){var xml,tmp;if(!data||typeof data!=="string"){return null}try{if(window.DOMParser){tmp=new DOMParser;xml=tmp.parseFromString(data,"text/xml")}else{xml=new ActiveXObject("Microsoft.XMLDOM");xml.async="false";xml.loadXML(data)}}catch(e){xml=undefined}if(!xml||!xml.documentElement||xml.getElementsByTagName("parsererror").length){jQuery.error("Invalid XML: "+data)}return xml},noop:function(){},globalEval:function(data){if(data&&core_rnotwhite.test(data)){(window.execScript||function(data){window["eval"].call(window,data)})(data)}},camelCase:function(string){return string.replace(rmsPrefix,"ms-").replace(rdashAlpha,fcamelCase)},nodeName:function(elem,name){return elem.nodeName&&elem.nodeName.toUpperCase()===name.toUpperCase()},each:function(obj,callback,args){var name,i=0,length=obj.length,isObj=length===undefined||jQuery.isFunction(obj);if(args){if(isObj){for(name in obj){if(callback.apply(obj[name],args)===false){break}}}else{for(;i<length;){if(callback.apply(obj[i++],args)===false){break}}}}else{if(isObj){for(name in obj){if(callback.call(obj[name],name,obj[name])===false){break}}}else{for(;i<length;){if(callback.call(obj[i],i,obj[i++])===false){break}}}}return obj},trim:core_trim&&!core_trim.call("﻿ ")?function(text){return text==null?"":core_trim.call(text)}:function(text){return text==null?"":text.toString().replace(rtrim,"")},makeArray:function(arr,results){var type,ret=results||[];if(arr!=null){type=jQuery.type(arr);if(arr.length==null||type==="string"||type==="function"||type==="regexp"||jQuery.isWindow(arr)){core_push.call(ret,arr)}else{jQuery.merge(ret,arr)}}return ret},inArray:function(elem,arr,i){var len;if(arr){if(core_indexOf){return core_indexOf.call(arr,elem,i)}len=arr.length;i=i?i<0?Math.max(0,len+i):i:0;for(;i<len;i++){if(i in arr&&arr[i]===elem){return i}}}return-1},merge:function(first,second){var l=second.length,i=first.length,j=0;if(typeof l==="number"){for(;j<l;j++){first[i++]=second[j]}}else{while(second[j]!==undefined){first[i++]=second[j++]}}first.length=i;return first},grep:function(elems,callback,inv){var retVal,ret=[],i=0,length=elems.length;inv=!!inv;for(;i<length;i++){retVal=!!callback(elems[i],i);if(inv!==retVal){ret.push(elems[i])}}return ret},map:function(elems,callback,arg){var value,key,ret=[],i=0,length=elems.length,isArray=elems instanceof jQuery||length!==undefined&&typeof length==="number"&&(length>0&&elems[0]&&elems[length-1]||length===0||jQuery.isArray(elems));if(isArray){for(;i<length;i++){value=callback(elems[i],i,arg);if(value!=null){ret[ret.length]=value}}}else{for(key in elems){value=callback(elems[key],key,arg);if(value!=null){ret[ret.length]=value}}}return ret.concat.apply([],ret)},guid:1,proxy:function(fn,context){var tmp,args,proxy;if(typeof context==="string"){tmp=fn[context];context=fn;fn=tmp}if(!jQuery.isFunction(fn)){return undefined}args=core_slice.call(arguments,2);proxy=function(){return fn.apply(context,args.concat(core_slice.call(arguments)))};proxy.guid=fn.guid=fn.guid||proxy.guid||jQuery.guid++;return proxy},access:function(elems,fn,key,value,chainable,emptyGet,pass){var exec,bulk=key==null,i=0,length=elems.length;if(key&&typeof key==="object"){for(i in key){jQuery.access(elems,fn,i,key[i],1,emptyGet,value)}chainable=1}else if(value!==undefined){exec=pass===undefined&&jQuery.isFunction(value);if(bulk){if(exec){exec=fn;fn=function(elem,key,value){return exec.call(jQuery(elem),value)}}else{fn.call(elems,value);fn=null}}if(fn){for(;i<length;i++){fn(elems[i],key,exec?value.call(elems[i],i,fn(elems[i],key)):value,pass)}}chainable=1}return chainable?elems:bulk?fn.call(elems):length?fn(elems[0],key):emptyGet},now:function(){return(new Date).getTime()}});jQuery.ready.promise=function(obj){if(!readyList){readyList=jQuery.Deferred();if(document.readyState==="complete"){setTimeout(jQuery.ready,1)}else if(document.addEventListener){document.addEventListener("DOMContentLoaded",DOMContentLoaded,false);window.addEventListener("load",jQuery.ready,false)}else{document.attachEvent("onreadystatechange",DOMContentLoaded);window.attachEvent("onload",jQuery.ready);var top=false;try{top=window.frameElement==null&&document.documentElement}catch(e){}if(top&&top.doScroll){!function doScrollCheck(){if(!jQuery.isReady){try{top.doScroll("left")}catch(e){return setTimeout(doScrollCheck,50)}jQuery.ready()}}()}}}return readyList.promise(obj)};jQuery.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(i,name){class2type["[object "+name+"]"]=name.toLowerCase()});rootjQuery=jQuery(document);var optionsCache={};function createOptions(options){var object=optionsCache[options]={};jQuery.each(options.split(core_rspace),function(_,flag){object[flag]=true});return object}jQuery.Callbacks=function(options){options=typeof options==="string"?optionsCache[options]||createOptions(options):jQuery.extend({},options);var memory,fired,firing,firingStart,firingLength,firingIndex,list=[],stack=!options.once&&[],fire=function(data){memory=options.memory&&data;fired=true;firingIndex=firingStart||0;firingStart=0;firingLength=list.length;firing=true;for(;list&&firingIndex<firingLength;firingIndex++){if(list[firingIndex].apply(data[0],data[1])===false&&options.stopOnFalse){memory=false;break}}firing=false;if(list){if(stack){if(stack.length){fire(stack.shift())}}else if(memory){list=[]}else{self.disable()}}},self={add:function(){if(list){var start=list.length;!function add(args){jQuery.each(args,function(_,arg){var type=jQuery.type(arg);if(type==="function"&&(!options.unique||!self.has(arg))){list.push(arg)}else if(arg&&arg.length&&type!=="string"){add(arg)}})}(arguments);if(firing){firingLength=list.length}else if(memory){firingStart=start;fire(memory)}}return this},remove:function(){if(list){jQuery.each(arguments,function(_,arg){var index;while((index=jQuery.inArray(arg,list,index))>-1){list.splice(index,1);if(firing){if(index<=firingLength){firingLength--}if(index<=firingIndex){firingIndex--}}}})}return this},has:function(fn){return jQuery.inArray(fn,list)>-1},empty:function(){list=[];return this},disable:function(){list=stack=memory=undefined;return this},disabled:function(){return!list},lock:function(){stack=undefined;if(!memory){self.disable()}return this},locked:function(){return!stack},fireWith:function(context,args){args=args||[];args=[context,args.slice?args.slice():args];if(list&&(!fired||stack)){if(firing){stack.push(args)}else{fire(args)}}return this},fire:function(){self.fireWith(this,arguments);return this},fired:function(){return!!fired}};return self};jQuery.extend({Deferred:function(func){var tuples=[["resolve","done",jQuery.Callbacks("once memory"),"resolved"],["reject","fail",jQuery.Callbacks("once memory"),"rejected"],["notify","progress",jQuery.Callbacks("memory")]],state="pending",promise={state:function(){return state},always:function(){deferred.done(arguments).fail(arguments);return this},then:function(){var fns=arguments;return jQuery.Deferred(function(newDefer){jQuery.each(tuples,function(i,tuple){var action=tuple[0],fn=fns[i];deferred[tuple[1]](jQuery.isFunction(fn)?function(){var returned=fn.apply(this,arguments);if(returned&&jQuery.isFunction(returned.promise)){returned.promise().done(newDefer.resolve).fail(newDefer.reject).progress(newDefer.notify)}else{newDefer[action+"With"](this===deferred?newDefer:this,[returned])}}:newDefer[action])});fns=null}).promise()},promise:function(obj){return typeof obj==="object"?jQuery.extend(obj,promise):promise}},deferred={};promise.pipe=promise.then;jQuery.each(tuples,function(i,tuple){var list=tuple[2],stateString=tuple[3];promise[tuple[1]]=list.add;if(stateString){list.add(function(){state=stateString},tuples[i^1][2].disable,tuples[2][2].lock)}deferred[tuple[0]]=list.fire;deferred[tuple[0]+"With"]=list.fireWith});promise.promise(deferred);if(func){func.call(deferred,deferred)}return deferred},when:function(subordinate){var i=0,resolveValues=core_slice.call(arguments),length=resolveValues.length,remaining=length!==1||subordinate&&jQuery.isFunction(subordinate.promise)?length:0,deferred=remaining===1?subordinate:jQuery.Deferred(),updateFunc=function(i,contexts,values){return function(value){contexts[i]=this;values[i]=arguments.length>1?core_slice.call(arguments):value;if(values===progressValues){deferred.notifyWith(contexts,values)}else if(!--remaining){deferred.resolveWith(contexts,values)}}},progressValues,progressContexts,resolveContexts;if(length>1){progressValues=new Array(length);progressContexts=new Array(length);resolveContexts=new Array(length);for(;i<length;i++){if(resolveValues[i]&&jQuery.isFunction(resolveValues[i].promise)){resolveValues[i].promise().done(updateFunc(i,resolveContexts,resolveValues)).fail(deferred.reject).progress(updateFunc(i,progressContexts,progressValues))}else{--remaining}}}if(!remaining){deferred.resolveWith(resolveContexts,resolveValues)}return deferred.promise()}});jQuery.support=function(){var support,all,a,select,opt,input,fragment,eventName,i,isSupported,clickFn,div=document.createElement("div");div.setAttribute("className","t");div.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>";all=div.getElementsByTagName("*");a=div.getElementsByTagName("a")[0];a.style.cssText="top:1px;float:left;opacity:.5";if(!all||!all.length||!a){return{}}select=document.createElement("select");opt=select.appendChild(document.createElement("option"));input=div.getElementsByTagName("input")[0];support={leadingWhitespace:div.firstChild.nodeType===3,tbody:!div.getElementsByTagName("tbody").length,htmlSerialize:!!div.getElementsByTagName("link").length,style:/top/.test(a.getAttribute("style")),hrefNormalized:a.getAttribute("href")==="/a",opacity:/^0.5/.test(a.style.opacity),cssFloat:!!a.style.cssFloat,checkOn:input.value==="on",optSelected:opt.selected,getSetAttribute:div.className!=="t",enctype:!!document.createElement("form").enctype,html5Clone:document.createElement("nav").cloneNode(true).outerHTML!=="<:nav></:nav>",boxModel:document.compatMode==="CSS1Compat",submitBubbles:true,changeBubbles:true,focusinBubbles:false,deleteExpando:true,noCloneEvent:true,inlineBlockNeedsLayout:false,shrinkWrapBlocks:false,reliableMarginRight:true,boxSizingReliable:true,pixelPosition:false};input.checked=true;support.noCloneChecked=input.cloneNode(true).checked;select.disabled=true;support.optDisabled=!opt.disabled;try{delete div.test}catch(e){support.deleteExpando=false}if(!div.addEventListener&&div.attachEvent&&div.fireEvent){div.attachEvent("onclick",clickFn=function(){support.noCloneEvent=false});div.cloneNode(true).fireEvent("onclick");div.detachEvent("onclick",clickFn)}input=document.createElement("input");input.value="t";input.setAttribute("type","radio");support.radioValue=input.value==="t";input.setAttribute("checked","checked");input.setAttribute("name","t");div.appendChild(input);fragment=document.createDocumentFragment();fragment.appendChild(div.lastChild);support.checkClone=fragment.cloneNode(true).cloneNode(true).lastChild.checked;support.appendChecked=input.checked;fragment.removeChild(input);fragment.appendChild(div);if(div.attachEvent){for(i in{submit:true,change:true,focusin:true}){eventName="on"+i;isSupported=eventName in div;if(!isSupported){div.setAttribute(eventName,"return;");isSupported=typeof div[eventName]==="function"}support[i+"Bubbles"]=isSupported}}jQuery(function(){var container,div,tds,marginDiv,divReset="padding:0;margin:0;border:0;display:block;overflow:hidden;",body=document.getElementsByTagName("body")[0];if(!body){return}container=document.createElement("div");container.style.cssText="visibility:hidden;border:0;width:0;height:0;position:static;top:0;margin-top:1px";body.insertBefore(container,body.firstChild);div=document.createElement("div");container.appendChild(div);div.innerHTML="<table><tr><td></td><td>t</td></tr></table>";tds=div.getElementsByTagName("td");tds[0].style.cssText="padding:0;margin:0;border:0;display:none";isSupported=tds[0].offsetHeight===0;tds[0].style.display="";tds[1].style.display="none";support.reliableHiddenOffsets=isSupported&&tds[0].offsetHeight===0;div.innerHTML="";div.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;";support.boxSizing=div.offsetWidth===4;support.doesNotIncludeMarginInBodyOffset=body.offsetTop!==1;if(window.getComputedStyle){support.pixelPosition=(window.getComputedStyle(div,null)||{}).top!=="1%";support.boxSizingReliable=(window.getComputedStyle(div,null)||{width:"4px"}).width==="4px";marginDiv=document.createElement("div");marginDiv.style.cssText=div.style.cssText=divReset;marginDiv.style.marginRight=marginDiv.style.width="0";div.style.width="1px";div.appendChild(marginDiv);support.reliableMarginRight=!parseFloat((window.getComputedStyle(marginDiv,null)||{}).marginRight)}if(typeof div.style.zoom!=="undefined"){div.innerHTML="";div.style.cssText=divReset+"width:1px;padding:1px;display:inline;zoom:1";support.inlineBlockNeedsLayout=div.offsetWidth===3;div.style.display="block";div.style.overflow="visible";div.innerHTML="<div></div>";div.firstChild.style.width="5px";support.shrinkWrapBlocks=div.offsetWidth!==3;container.style.zoom=1}body.removeChild(container);container=div=tds=marginDiv=null});fragment.removeChild(div);all=a=select=opt=input=fragment=div=null;return support}();var rbrace=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,rmultiDash=/([A-Z])/g;jQuery.extend({cache:{},deletedIds:[],uuid:0,expando:"jQuery"+(jQuery.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:true,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:true},hasData:function(elem){elem=elem.nodeType?jQuery.cache[elem[jQuery.expando]]:elem[jQuery.expando];return!!elem&&!isEmptyDataObject(elem)},data:function(elem,name,data,pvt){if(!jQuery.acceptData(elem)){return}var thisCache,ret,internalKey=jQuery.expando,getByName=typeof name==="string",isNode=elem.nodeType,cache=isNode?jQuery.cache:elem,id=isNode?elem[internalKey]:elem[internalKey]&&internalKey;if((!id||!cache[id]||!pvt&&!cache[id].data)&&getByName&&data===undefined){return}if(!id){if(isNode){elem[internalKey]=id=jQuery.deletedIds.pop()||++jQuery.uuid}else{id=internalKey}}if(!cache[id]){cache[id]={};if(!isNode){cache[id].toJSON=jQuery.noop}}if(typeof name==="object"||typeof name==="function"){if(pvt){cache[id]=jQuery.extend(cache[id],name)}else{cache[id].data=jQuery.extend(cache[id].data,name)}}thisCache=cache[id];if(!pvt){if(!thisCache.data){thisCache.data={}}thisCache=thisCache.data}if(data!==undefined){thisCache[jQuery.camelCase(name)]=data}if(getByName){ret=thisCache[name];if(ret==null){ret=thisCache[jQuery.camelCase(name)]}}else{ret=thisCache}return ret},removeData:function(elem,name,pvt){if(!jQuery.acceptData(elem)){return}var thisCache,i,l,isNode=elem.nodeType,cache=isNode?jQuery.cache:elem,id=isNode?elem[jQuery.expando]:jQuery.expando;if(!cache[id]){return}if(name){thisCache=pvt?cache[id]:cache[id].data;if(thisCache){if(!jQuery.isArray(name)){if(name in thisCache){name=[name]}else{name=jQuery.camelCase(name);if(name in thisCache){name=[name]}else{name=name.split(" ")}}}for(i=0,l=name.length;i<l;i++){delete thisCache[name[i]]}if(!(pvt?isEmptyDataObject:jQuery.isEmptyObject)(thisCache)){return}}}if(!pvt){delete cache[id].data;if(!isEmptyDataObject(cache[id])){return}}if(isNode){jQuery.cleanData([elem],true)}else if(jQuery.support.deleteExpando||cache!=cache.window){delete cache[id]}else{cache[id]=null}},_data:function(elem,name,data){return jQuery.data(elem,name,data,true)},acceptData:function(elem){var noData=elem.nodeName&&jQuery.noData[elem.nodeName.toLowerCase()];return!noData||noData!==true&&elem.getAttribute("classid")===noData}});jQuery.fn.extend({data:function(key,value){var parts,part,attr,name,l,elem=this[0],i=0,data=null;if(key===undefined){if(this.length){data=jQuery.data(elem);if(elem.nodeType===1&&!jQuery._data(elem,"parsedAttrs")){attr=elem.attributes;for(l=attr.length;i<l;i++){name=attr[i].name;if(name.indexOf("data-")===0){name=jQuery.camelCase(name.substring(5));dataAttr(elem,name,data[name])}}jQuery._data(elem,"parsedAttrs",true)}}return data}if(typeof key==="object"){return this.each(function(){jQuery.data(this,key)})}parts=key.split(".",2);parts[1]=parts[1]?"."+parts[1]:"";part=parts[1]+"!";return jQuery.access(this,function(value){if(value===undefined){data=this.triggerHandler("getData"+part,[parts[0]]);if(data===undefined&&elem){data=jQuery.data(elem,key);data=dataAttr(elem,key,data)}return data===undefined&&parts[1]?this.data(parts[0]):data}parts[1]=value;this.each(function(){var self=jQuery(this);self.triggerHandler("setData"+part,parts);jQuery.data(this,key,value);self.triggerHandler("changeData"+part,parts)})},null,value,arguments.length>1,null,false)},removeData:function(key){return this.each(function(){jQuery.removeData(this,key)})}});function dataAttr(elem,key,data){if(data===undefined&&elem.nodeType===1){var name="data-"+key.replace(rmultiDash,"-$1").toLowerCase();data=elem.getAttribute(name);if(typeof data==="string"){try{data=data==="true"?true:data==="false"?false:data==="null"?null:+data+""===data?+data:rbrace.test(data)?jQuery.parseJSON(data):data}catch(e){}jQuery.data(elem,key,data)}else{data=undefined}}return data}function isEmptyDataObject(obj){var name;for(name in obj){if(name==="data"&&jQuery.isEmptyObject(obj[name])){continue}if(name!=="toJSON"){return false}}return true}jQuery.extend({queue:function(elem,type,data){var queue;if(elem){type=(type||"fx")+"queue";queue=jQuery._data(elem,type);if(data){if(!queue||jQuery.isArray(data)){queue=jQuery._data(elem,type,jQuery.makeArray(data))}else{queue.push(data)}}return queue||[]}},dequeue:function(elem,type){type=type||"fx";var queue=jQuery.queue(elem,type),startLength=queue.length,fn=queue.shift(),hooks=jQuery._queueHooks(elem,type),next=function(){jQuery.dequeue(elem,type)};if(fn==="inprogress"){fn=queue.shift();startLength--}if(fn){if(type==="fx"){queue.unshift("inprogress")}delete hooks.stop;fn.call(elem,next,hooks)}if(!startLength&&hooks){hooks.empty.fire()}},_queueHooks:function(elem,type){var key=type+"queueHooks";return jQuery._data(elem,key)||jQuery._data(elem,key,{empty:jQuery.Callbacks("once memory").add(function(){jQuery.removeData(elem,type+"queue",true);jQuery.removeData(elem,key,true)})})}});jQuery.fn.extend({queue:function(type,data){var setter=2;if(typeof type!=="string"){data=type;type="fx";setter--}if(arguments.length<setter){return jQuery.queue(this[0],type)}return data===undefined?this:this.each(function(){var queue=jQuery.queue(this,type,data);jQuery._queueHooks(this,type);if(type==="fx"&&queue[0]!=="inprogress"){jQuery.dequeue(this,type)}})},dequeue:function(type){return this.each(function(){jQuery.dequeue(this,type)})},delay:function(time,type){time=jQuery.fx?jQuery.fx.speeds[time]||time:time;type=type||"fx";return this.queue(type,function(next,hooks){var timeout=setTimeout(next,time);hooks.stop=function(){clearTimeout(timeout)}})},clearQueue:function(type){return this.queue(type||"fx",[])},promise:function(type,obj){var tmp,count=1,defer=jQuery.Deferred(),elements=this,i=this.length,resolve=function(){if(!--count){defer.resolveWith(elements,[elements])}};if(typeof type!=="string"){obj=type;type=undefined}type=type||"fx";while(i--){tmp=jQuery._data(elements[i],type+"queueHooks");if(tmp&&tmp.empty){count++;tmp.empty.add(resolve)}}resolve();return defer.promise(obj)}});var nodeHook,boolHook,fixSpecified,rclass=/[\t\r\n]/g,rreturn=/\r/g,rtype=/^(?:button|input)$/i,rfocusable=/^(?:button|input|object|select|textarea)$/i,rclickable=/^a(?:rea|)$/i,rboolean=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,getSetAttribute=jQuery.support.getSetAttribute;jQuery.fn.extend({attr:function(name,value){return jQuery.access(this,jQuery.attr,name,value,arguments.length>1)},removeAttr:function(name){return this.each(function(){jQuery.removeAttr(this,name)})},prop:function(name,value){return jQuery.access(this,jQuery.prop,name,value,arguments.length>1)},removeProp:function(name){name=jQuery.propFix[name]||name;return this.each(function(){try{this[name]=undefined;delete this[name]}catch(e){}})},addClass:function(value){var classNames,i,l,elem,setClass,c,cl;if(jQuery.isFunction(value)){return this.each(function(j){jQuery(this).addClass(value.call(this,j,this.className))})}if(value&&typeof value==="string"){classNames=value.split(core_rspace);for(i=0,l=this.length;i<l;i++){elem=this[i];if(elem.nodeType===1){if(!elem.className&&classNames.length===1){elem.className=value}else{setClass=" "+elem.className+" ";for(c=0,cl=classNames.length;c<cl;c++){if(!~setClass.indexOf(" "+classNames[c]+" ")){setClass+=classNames[c]+" "}}elem.className=jQuery.trim(setClass)}}}}return this},removeClass:function(value){var removes,className,elem,c,cl,i,l;if(jQuery.isFunction(value)){return this.each(function(j){jQuery(this).removeClass(value.call(this,j,this.className))})}if(value&&typeof value==="string"||value===undefined){removes=(value||"").split(core_rspace);for(i=0,l=this.length;i<l;i++){elem=this[i];if(elem.nodeType===1&&elem.className){className=(" "+elem.className+" ").replace(rclass," ");for(c=0,cl=removes.length;c<cl;c++){while(className.indexOf(" "+removes[c]+" ")>-1){className=className.replace(" "+removes[c]+" "," ")}}elem.className=value?jQuery.trim(className):""}}}return this},toggleClass:function(value,stateVal){var type=typeof value,isBool=typeof stateVal==="boolean";if(jQuery.isFunction(value)){return this.each(function(i){jQuery(this).toggleClass(value.call(this,i,this.className,stateVal),stateVal)})}return this.each(function(){if(type==="string"){var className,i=0,self=jQuery(this),state=stateVal,classNames=value.split(core_rspace);while(className=classNames[i++]){state=isBool?state:!self.hasClass(className);self[state?"addClass":"removeClass"](className)}}else if(type==="undefined"||type==="boolean"){if(this.className){jQuery._data(this,"__className__",this.className)}this.className=this.className||value===false?"":jQuery._data(this,"__className__")||""}})},hasClass:function(selector){var className=" "+selector+" ",i=0,l=this.length;for(;i<l;i++){if(this[i].nodeType===1&&(" "+this[i].className+" ").replace(rclass," ").indexOf(className)>-1){return true}}return false},val:function(value){var hooks,ret,isFunction,elem=this[0];if(!arguments.length){if(elem){hooks=jQuery.valHooks[elem.type]||jQuery.valHooks[elem.nodeName.toLowerCase()];if(hooks&&"get"in hooks&&(ret=hooks.get(elem,"value"))!==undefined){return ret}ret=elem.value;return typeof ret==="string"?ret.replace(rreturn,""):ret==null?"":ret}return}isFunction=jQuery.isFunction(value);return this.each(function(i){var val,self=jQuery(this);if(this.nodeType!==1){return}if(isFunction){val=value.call(this,i,self.val())}else{val=value}if(val==null){val=""}else if(typeof val==="number"){val+=""}else if(jQuery.isArray(val)){val=jQuery.map(val,function(value){return value==null?"":value+""})}hooks=jQuery.valHooks[this.type]||jQuery.valHooks[this.nodeName.toLowerCase()];if(!hooks||!("set"in hooks)||hooks.set(this,val,"value")===undefined){this.value=val}})}});jQuery.extend({valHooks:{option:{get:function(elem){var val=elem.attributes.value;return!val||val.specified?elem.value:elem.text}},select:{get:function(elem){var value,i,max,option,index=elem.selectedIndex,values=[],options=elem.options,one=elem.type==="select-one";if(index<0){return null}i=one?index:0;max=one?index+1:options.length;for(;i<max;i++){option=options[i];if(option.selected&&(jQuery.support.optDisabled?!option.disabled:option.getAttribute("disabled")===null)&&(!option.parentNode.disabled||!jQuery.nodeName(option.parentNode,"optgroup"))){value=jQuery(option).val();if(one){return value}values.push(value)}}if(one&&!values.length&&options.length){return jQuery(options[index]).val()}return values},set:function(elem,value){var values=jQuery.makeArray(value);jQuery(elem).find("option").each(function(){this.selected=jQuery.inArray(jQuery(this).val(),values)>=0});if(!values.length){elem.selectedIndex=-1}return values}}},attrFn:{},attr:function(elem,name,value,pass){var ret,hooks,notxml,nType=elem.nodeType;if(!elem||nType===3||nType===8||nType===2){return}if(pass&&jQuery.isFunction(jQuery.fn[name])){return jQuery(elem)[name](value)}if(typeof elem.getAttribute==="undefined"){return jQuery.prop(elem,name,value)}notxml=nType!==1||!jQuery.isXMLDoc(elem);if(notxml){name=name.toLowerCase();hooks=jQuery.attrHooks[name]||(rboolean.test(name)?boolHook:nodeHook)}if(value!==undefined){if(value===null){jQuery.removeAttr(elem,name);
return}else if(hooks&&"set"in hooks&&notxml&&(ret=hooks.set(elem,value,name))!==undefined){return ret}else{elem.setAttribute(name,""+value);return value}}else if(hooks&&"get"in hooks&&notxml&&(ret=hooks.get(elem,name))!==null){return ret}else{ret=elem.getAttribute(name);return ret===null?undefined:ret}},removeAttr:function(elem,value){var propName,attrNames,name,isBool,i=0;if(value&&elem.nodeType===1){attrNames=value.split(core_rspace);for(;i<attrNames.length;i++){name=attrNames[i];if(name){propName=jQuery.propFix[name]||name;isBool=rboolean.test(name);if(!isBool){jQuery.attr(elem,name,"")}elem.removeAttribute(getSetAttribute?name:propName);if(isBool&&propName in elem){elem[propName]=false}}}}},attrHooks:{type:{set:function(elem,value){if(rtype.test(elem.nodeName)&&elem.parentNode){jQuery.error("type property can't be changed")}else if(!jQuery.support.radioValue&&value==="radio"&&jQuery.nodeName(elem,"input")){var val=elem.value;elem.setAttribute("type",value);if(val){elem.value=val}return value}}},value:{get:function(elem,name){if(nodeHook&&jQuery.nodeName(elem,"button")){return nodeHook.get(elem,name)}return name in elem?elem.value:null},set:function(elem,value,name){if(nodeHook&&jQuery.nodeName(elem,"button")){return nodeHook.set(elem,value,name)}elem.value=value}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(elem,name,value){var ret,hooks,notxml,nType=elem.nodeType;if(!elem||nType===3||nType===8||nType===2){return}notxml=nType!==1||!jQuery.isXMLDoc(elem);if(notxml){name=jQuery.propFix[name]||name;hooks=jQuery.propHooks[name]}if(value!==undefined){if(hooks&&"set"in hooks&&(ret=hooks.set(elem,value,name))!==undefined){return ret}else{return elem[name]=value}}else{if(hooks&&"get"in hooks&&(ret=hooks.get(elem,name))!==null){return ret}else{return elem[name]}}},propHooks:{tabIndex:{get:function(elem){var attributeNode=elem.getAttributeNode("tabindex");return attributeNode&&attributeNode.specified?parseInt(attributeNode.value,10):rfocusable.test(elem.nodeName)||rclickable.test(elem.nodeName)&&elem.href?0:undefined}}}});boolHook={get:function(elem,name){var attrNode,property=jQuery.prop(elem,name);return property===true||typeof property!=="boolean"&&(attrNode=elem.getAttributeNode(name))&&attrNode.nodeValue!==false?name.toLowerCase():undefined},set:function(elem,value,name){var propName;if(value===false){jQuery.removeAttr(elem,name)}else{propName=jQuery.propFix[name]||name;if(propName in elem){elem[propName]=true}elem.setAttribute(name,name.toLowerCase())}return name}};if(!getSetAttribute){fixSpecified={name:true,id:true,coords:true};nodeHook=jQuery.valHooks.button={get:function(elem,name){var ret;ret=elem.getAttributeNode(name);return ret&&(fixSpecified[name]?ret.value!=="":ret.specified)?ret.value:undefined},set:function(elem,value,name){var ret=elem.getAttributeNode(name);if(!ret){ret=document.createAttribute(name);elem.setAttributeNode(ret)}return ret.value=value+""}};jQuery.each(["width","height"],function(i,name){jQuery.attrHooks[name]=jQuery.extend(jQuery.attrHooks[name],{set:function(elem,value){if(value===""){elem.setAttribute(name,"auto");return value}}})});jQuery.attrHooks.contenteditable={get:nodeHook.get,set:function(elem,value,name){if(value===""){value="false"}nodeHook.set(elem,value,name)}}}if(!jQuery.support.hrefNormalized){jQuery.each(["href","src","width","height"],function(i,name){jQuery.attrHooks[name]=jQuery.extend(jQuery.attrHooks[name],{get:function(elem){var ret=elem.getAttribute(name,2);return ret===null?undefined:ret}})})}if(!jQuery.support.style){jQuery.attrHooks.style={get:function(elem){return elem.style.cssText.toLowerCase()||undefined},set:function(elem,value){return elem.style.cssText=""+value}}}if(!jQuery.support.optSelected){jQuery.propHooks.selected=jQuery.extend(jQuery.propHooks.selected,{get:function(elem){var parent=elem.parentNode;if(parent){parent.selectedIndex;if(parent.parentNode){parent.parentNode.selectedIndex}}return null}})}if(!jQuery.support.enctype){jQuery.propFix.enctype="encoding"}if(!jQuery.support.checkOn){jQuery.each(["radio","checkbox"],function(){jQuery.valHooks[this]={get:function(elem){return elem.getAttribute("value")===null?"on":elem.value}}})}jQuery.each(["radio","checkbox"],function(){jQuery.valHooks[this]=jQuery.extend(jQuery.valHooks[this],{set:function(elem,value){if(jQuery.isArray(value)){return elem.checked=jQuery.inArray(jQuery(elem).val(),value)>=0}}})});var rformElems=/^(?:textarea|input|select)$/i,rtypenamespace=/^([^\.]*|)(?:\.(.+)|)$/,rhoverHack=/(?:^|\s)hover(\.\S+|)\b/,rkeyEvent=/^key/,rmouseEvent=/^(?:mouse|contextmenu)|click/,rfocusMorph=/^(?:focusinfocus|focusoutblur)$/,hoverHack=function(events){return jQuery.event.special.hover?events:events.replace(rhoverHack,"mouseenter$1 mouseleave$1")};jQuery.event={add:function(elem,types,handler,data,selector){var elemData,eventHandle,events,t,tns,type,namespaces,handleObj,handleObjIn,handlers,special;if(elem.nodeType===3||elem.nodeType===8||!types||!handler||!(elemData=jQuery._data(elem))){return}if(handler.handler){handleObjIn=handler;handler=handleObjIn.handler;selector=handleObjIn.selector}if(!handler.guid){handler.guid=jQuery.guid++}events=elemData.events;if(!events){elemData.events=events={}}eventHandle=elemData.handle;if(!eventHandle){elemData.handle=eventHandle=function(e){return typeof jQuery!=="undefined"&&(!e||jQuery.event.triggered!==e.type)?jQuery.event.dispatch.apply(eventHandle.elem,arguments):undefined};eventHandle.elem=elem}types=jQuery.trim(hoverHack(types)).split(" ");for(t=0;t<types.length;t++){tns=rtypenamespace.exec(types[t])||[];type=tns[1];namespaces=(tns[2]||"").split(".").sort();special=jQuery.event.special[type]||{};type=(selector?special.delegateType:special.bindType)||type;special=jQuery.event.special[type]||{};handleObj=jQuery.extend({type:type,origType:tns[1],data:data,handler:handler,guid:handler.guid,selector:selector,namespace:namespaces.join(".")},handleObjIn);handlers=events[type];if(!handlers){handlers=events[type]=[];handlers.delegateCount=0;if(!special.setup||special.setup.call(elem,data,namespaces,eventHandle)===false){if(elem.addEventListener){elem.addEventListener(type,eventHandle,false)}else if(elem.attachEvent){elem.attachEvent("on"+type,eventHandle)}}}if(special.add){special.add.call(elem,handleObj);if(!handleObj.handler.guid){handleObj.handler.guid=handler.guid}}if(selector){handlers.splice(handlers.delegateCount++,0,handleObj)}else{handlers.push(handleObj)}jQuery.event.global[type]=true}elem=null},global:{},remove:function(elem,types,handler,selector,mappedTypes){var t,tns,type,origType,namespaces,origCount,j,events,special,eventType,handleObj,elemData=jQuery.hasData(elem)&&jQuery._data(elem);if(!elemData||!(events=elemData.events)){return}types=jQuery.trim(hoverHack(types||"")).split(" ");for(t=0;t<types.length;t++){tns=rtypenamespace.exec(types[t])||[];type=origType=tns[1];namespaces=tns[2];if(!type){for(type in events){jQuery.event.remove(elem,type+types[t],handler,selector,true)}continue}special=jQuery.event.special[type]||{};type=(selector?special.delegateType:special.bindType)||type;eventType=events[type]||[];origCount=eventType.length;namespaces=namespaces?new RegExp("(^|\\.)"+namespaces.split(".").sort().join("\\.(?:.*\\.|)")+"(\\.|$)"):null;for(j=0;j<eventType.length;j++){handleObj=eventType[j];if((mappedTypes||origType===handleObj.origType)&&(!handler||handler.guid===handleObj.guid)&&(!namespaces||namespaces.test(handleObj.namespace))&&(!selector||selector===handleObj.selector||selector==="**"&&handleObj.selector)){eventType.splice(j--,1);if(handleObj.selector){eventType.delegateCount--}if(special.remove){special.remove.call(elem,handleObj)}}}if(eventType.length===0&&origCount!==eventType.length){if(!special.teardown||special.teardown.call(elem,namespaces,elemData.handle)===false){jQuery.removeEvent(elem,type,elemData.handle)}delete events[type]}}if(jQuery.isEmptyObject(events)){delete elemData.handle;jQuery.removeData(elem,"events",true)}},customEvent:{getData:true,setData:true,changeData:true},trigger:function(event,data,elem,onlyHandlers){if(elem&&(elem.nodeType===3||elem.nodeType===8)){return}var cache,exclusive,i,cur,old,ontype,special,handle,eventPath,bubbleType,type=event.type||event,namespaces=[];if(rfocusMorph.test(type+jQuery.event.triggered)){return}if(type.indexOf("!")>=0){type=type.slice(0,-1);exclusive=true}if(type.indexOf(".")>=0){namespaces=type.split(".");type=namespaces.shift();namespaces.sort()}if((!elem||jQuery.event.customEvent[type])&&!jQuery.event.global[type]){return}event=typeof event==="object"?event[jQuery.expando]?event:new jQuery.Event(type,event):new jQuery.Event(type);event.type=type;event.isTrigger=true;event.exclusive=exclusive;event.namespace=namespaces.join(".");event.namespace_re=event.namespace?new RegExp("(^|\\.)"+namespaces.join("\\.(?:.*\\.|)")+"(\\.|$)"):null;ontype=type.indexOf(":")<0?"on"+type:"";if(!elem){cache=jQuery.cache;for(i in cache){if(cache[i].events&&cache[i].events[type]){jQuery.event.trigger(event,data,cache[i].handle.elem,true)}}return}event.result=undefined;if(!event.target){event.target=elem}data=data!=null?jQuery.makeArray(data):[];data.unshift(event);special=jQuery.event.special[type]||{};if(special.trigger&&special.trigger.apply(elem,data)===false){return}eventPath=[[elem,special.bindType||type]];if(!onlyHandlers&&!special.noBubble&&!jQuery.isWindow(elem)){bubbleType=special.delegateType||type;cur=rfocusMorph.test(bubbleType+type)?elem:elem.parentNode;for(old=elem;cur;cur=cur.parentNode){eventPath.push([cur,bubbleType]);old=cur}if(old===(elem.ownerDocument||document)){eventPath.push([old.defaultView||old.parentWindow||window,bubbleType])}}for(i=0;i<eventPath.length&&!event.isPropagationStopped();i++){cur=eventPath[i][0];event.type=eventPath[i][1];handle=(jQuery._data(cur,"events")||{})[event.type]&&jQuery._data(cur,"handle");if(handle){handle.apply(cur,data)}handle=ontype&&cur[ontype];if(handle&&jQuery.acceptData(cur)&&handle.apply(cur,data)===false){event.preventDefault()}}event.type=type;if(!onlyHandlers&&!event.isDefaultPrevented()){if((!special._default||special._default.apply(elem.ownerDocument,data)===false)&&!(type==="click"&&jQuery.nodeName(elem,"a"))&&jQuery.acceptData(elem)){if(ontype&&elem[type]&&(type!=="focus"&&type!=="blur"||event.target.offsetWidth!==0)&&!jQuery.isWindow(elem)){old=elem[ontype];if(old){elem[ontype]=null}jQuery.event.triggered=type;elem[type]();jQuery.event.triggered=undefined;if(old){elem[ontype]=old}}}}return event.result},dispatch:function(event){event=jQuery.event.fix(event||window.event);var i,j,cur,ret,selMatch,matched,matches,handleObj,sel,related,handlers=(jQuery._data(this,"events")||{})[event.type]||[],delegateCount=handlers.delegateCount,args=[].slice.call(arguments),run_all=!event.exclusive&&!event.namespace,special=jQuery.event.special[event.type]||{},handlerQueue=[];args[0]=event;event.delegateTarget=this;if(special.preDispatch&&special.preDispatch.call(this,event)===false){return}if(delegateCount&&!(event.button&&event.type==="click")){for(cur=event.target;cur!=this;cur=cur.parentNode||this){if(cur.disabled!==true||event.type!=="click"){selMatch={};matches=[];for(i=0;i<delegateCount;i++){handleObj=handlers[i];sel=handleObj.selector;if(selMatch[sel]===undefined){selMatch[sel]=jQuery(sel,this).index(cur)>=0}if(selMatch[sel]){matches.push(handleObj)}}if(matches.length){handlerQueue.push({elem:cur,matches:matches})}}}}if(handlers.length>delegateCount){handlerQueue.push({elem:this,matches:handlers.slice(delegateCount)})}for(i=0;i<handlerQueue.length&&!event.isPropagationStopped();i++){matched=handlerQueue[i];event.currentTarget=matched.elem;for(j=0;j<matched.matches.length&&!event.isImmediatePropagationStopped();j++){handleObj=matched.matches[j];if(run_all||!event.namespace&&!handleObj.namespace||event.namespace_re&&event.namespace_re.test(handleObj.namespace)){event.data=handleObj.data;event.handleObj=handleObj;ret=((jQuery.event.special[handleObj.origType]||{}).handle||handleObj.handler).apply(matched.elem,args);if(ret!==undefined){event.result=ret;if(ret===false){event.preventDefault();event.stopPropagation()}}}}}if(special.postDispatch){special.postDispatch.call(this,event)}return event.result},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(event,original){if(event.which==null){event.which=original.charCode!=null?original.charCode:original.keyCode}return event}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(event,original){var eventDoc,doc,body,button=original.button,fromElement=original.fromElement;if(event.pageX==null&&original.clientX!=null){eventDoc=event.target.ownerDocument||document;doc=eventDoc.documentElement;body=eventDoc.body;event.pageX=original.clientX+(doc&&doc.scrollLeft||body&&body.scrollLeft||0)-(doc&&doc.clientLeft||body&&body.clientLeft||0);event.pageY=original.clientY+(doc&&doc.scrollTop||body&&body.scrollTop||0)-(doc&&doc.clientTop||body&&body.clientTop||0)}if(!event.relatedTarget&&fromElement){event.relatedTarget=fromElement===event.target?original.toElement:fromElement}if(!event.which&&button!==undefined){event.which=button&1?1:button&2?3:button&4?2:0}return event}},fix:function(event){if(event[jQuery.expando]){return event}var i,prop,originalEvent=event,fixHook=jQuery.event.fixHooks[event.type]||{},copy=fixHook.props?this.props.concat(fixHook.props):this.props;event=jQuery.Event(originalEvent);for(i=copy.length;i;){prop=copy[--i];event[prop]=originalEvent[prop]}if(!event.target){event.target=originalEvent.srcElement||document}if(event.target.nodeType===3){event.target=event.target.parentNode}event.metaKey=!!event.metaKey;return fixHook.filter?fixHook.filter(event,originalEvent):event},special:{load:{noBubble:true},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(data,namespaces,eventHandle){if(jQuery.isWindow(this)){this.onbeforeunload=eventHandle}},teardown:function(namespaces,eventHandle){if(this.onbeforeunload===eventHandle){this.onbeforeunload=null}}}},simulate:function(type,elem,event,bubble){var e=jQuery.extend(new jQuery.Event,event,{type:type,isSimulated:true,originalEvent:{}});if(bubble){jQuery.event.trigger(e,null,elem)}else{jQuery.event.dispatch.call(elem,e)}if(e.isDefaultPrevented()){event.preventDefault()}}};jQuery.event.handle=jQuery.event.dispatch;jQuery.removeEvent=document.removeEventListener?function(elem,type,handle){if(elem.removeEventListener){elem.removeEventListener(type,handle,false)}}:function(elem,type,handle){var name="on"+type;if(elem.detachEvent){if(typeof elem[name]==="undefined"){elem[name]=null}elem.detachEvent(name,handle)}};jQuery.Event=function(src,props){if(!(this instanceof jQuery.Event)){return new jQuery.Event(src,props)}if(src&&src.type){this.originalEvent=src;this.type=src.type;this.isDefaultPrevented=src.defaultPrevented||src.returnValue===false||src.getPreventDefault&&src.getPreventDefault()?returnTrue:returnFalse}else{this.type=src}if(props){jQuery.extend(this,props)}this.timeStamp=src&&src.timeStamp||jQuery.now();this[jQuery.expando]=true};function returnFalse(){return false}function returnTrue(){return true}jQuery.Event.prototype={preventDefault:function(){this.isDefaultPrevented=returnTrue;var e=this.originalEvent;if(!e){return}if(e.preventDefault){e.preventDefault()}else{e.returnValue=false}},stopPropagation:function(){this.isPropagationStopped=returnTrue;var e=this.originalEvent;if(!e){return}if(e.stopPropagation){e.stopPropagation()}e.cancelBubble=true},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=returnTrue;this.stopPropagation()},isDefaultPrevented:returnFalse,isPropagationStopped:returnFalse,isImmediatePropagationStopped:returnFalse};jQuery.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(orig,fix){jQuery.event.special[orig]={delegateType:fix,bindType:fix,handle:function(event){var ret,target=this,related=event.relatedTarget,handleObj=event.handleObj,selector=handleObj.selector;if(!related||related!==target&&!jQuery.contains(target,related)){event.type=handleObj.origType;ret=handleObj.handler.apply(this,arguments);event.type=fix}return ret}}});if(!jQuery.support.submitBubbles){jQuery.event.special.submit={setup:function(){if(jQuery.nodeName(this,"form")){return false}jQuery.event.add(this,"click._submit keypress._submit",function(e){var elem=e.target,form=jQuery.nodeName(elem,"input")||jQuery.nodeName(elem,"button")?elem.form:undefined;if(form&&!jQuery._data(form,"_submit_attached")){jQuery.event.add(form,"submit._submit",function(event){event._submit_bubble=true});jQuery._data(form,"_submit_attached",true)}})},postDispatch:function(event){if(event._submit_bubble){delete event._submit_bubble;if(this.parentNode&&!event.isTrigger){jQuery.event.simulate("submit",this.parentNode,event,true)}}},teardown:function(){if(jQuery.nodeName(this,"form")){return false}jQuery.event.remove(this,"._submit")}}}if(!jQuery.support.changeBubbles){jQuery.event.special.change={setup:function(){if(rformElems.test(this.nodeName)){if(this.type==="checkbox"||this.type==="radio"){jQuery.event.add(this,"propertychange._change",function(event){if(event.originalEvent.propertyName==="checked"){this._just_changed=true}});jQuery.event.add(this,"click._change",function(event){if(this._just_changed&&!event.isTrigger){this._just_changed=false}jQuery.event.simulate("change",this,event,true)})}return false}jQuery.event.add(this,"beforeactivate._change",function(e){var elem=e.target;if(rformElems.test(elem.nodeName)&&!jQuery._data(elem,"_change_attached")){jQuery.event.add(elem,"change._change",function(event){if(this.parentNode&&!event.isSimulated&&!event.isTrigger){jQuery.event.simulate("change",this.parentNode,event,true)}});jQuery._data(elem,"_change_attached",true)}})},handle:function(event){var elem=event.target;if(this!==elem||event.isSimulated||event.isTrigger||elem.type!=="radio"&&elem.type!=="checkbox"){return event.handleObj.handler.apply(this,arguments)}},teardown:function(){jQuery.event.remove(this,"._change");return!rformElems.test(this.nodeName)}}}if(!jQuery.support.focusinBubbles){jQuery.each({focus:"focusin",blur:"focusout"},function(orig,fix){var attaches=0,handler=function(event){jQuery.event.simulate(fix,event.target,jQuery.event.fix(event),true)};jQuery.event.special[fix]={setup:function(){if(attaches++===0){document.addEventListener(orig,handler,true)}},teardown:function(){if(--attaches===0){document.removeEventListener(orig,handler,true)}}}})}jQuery.fn.extend({on:function(types,selector,data,fn,one){var origFn,type;if(typeof types==="object"){if(typeof selector!=="string"){data=data||selector;selector=undefined}for(type in types){this.on(type,selector,data,types[type],one)}return this}if(data==null&&fn==null){fn=selector;data=selector=undefined}else if(fn==null){if(typeof selector==="string"){fn=data;data=undefined}else{fn=data;data=selector;selector=undefined}}if(fn===false){fn=returnFalse}else if(!fn){return this}if(one===1){origFn=fn;fn=function(event){jQuery().off(event);return origFn.apply(this,arguments)};fn.guid=origFn.guid||(origFn.guid=jQuery.guid++)}return this.each(function(){jQuery.event.add(this,types,fn,data,selector)})},one:function(types,selector,data,fn){return this.on(types,selector,data,fn,1)},off:function(types,selector,fn){var handleObj,type;if(types&&types.preventDefault&&types.handleObj){handleObj=types.handleObj;jQuery(types.delegateTarget).off(handleObj.namespace?handleObj.origType+"."+handleObj.namespace:handleObj.origType,handleObj.selector,handleObj.handler);return this}if(typeof types==="object"){for(type in types){this.off(type,selector,types[type])}return this}if(selector===false||typeof selector==="function"){fn=selector;selector=undefined}if(fn===false){fn=returnFalse}return this.each(function(){jQuery.event.remove(this,types,fn,selector)})},bind:function(types,data,fn){return this.on(types,null,data,fn)},unbind:function(types,fn){return this.off(types,null,fn)},live:function(types,data,fn){jQuery(this.context).on(types,this.selector,data,fn);return this},die:function(types,fn){jQuery(this.context).off(types,this.selector||"**",fn);return this},delegate:function(selector,types,data,fn){return this.on(types,selector,data,fn)},undelegate:function(selector,types,fn){return arguments.length==1?this.off(selector,"**"):this.off(types,selector||"**",fn)},trigger:function(type,data){return this.each(function(){jQuery.event.trigger(type,data,this)})},triggerHandler:function(type,data){if(this[0]){return jQuery.event.trigger(type,data,this[0],true)}},toggle:function(fn){var args=arguments,guid=fn.guid||jQuery.guid++,i=0,toggler=function(event){var lastToggle=(jQuery._data(this,"lastToggle"+fn.guid)||0)%i;jQuery._data(this,"lastToggle"+fn.guid,lastToggle+1);event.preventDefault();return args[lastToggle].apply(this,arguments)||false};toggler.guid=guid;while(i<args.length){args[i++].guid=guid}return this.click(toggler)},hover:function(fnOver,fnOut){return this.mouseenter(fnOver).mouseleave(fnOut||fnOver)}});jQuery.each(("blur focus focusin focusout load resize scroll unload click dblclick "+"mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave "+"change select submit keydown keypress keyup error contextmenu").split(" "),function(i,name){jQuery.fn[name]=function(data,fn){if(fn==null){fn=data;data=null}return arguments.length>0?this.on(name,null,data,fn):this.trigger(name)};if(rkeyEvent.test(name)){jQuery.event.fixHooks[name]=jQuery.event.keyHooks}if(rmouseEvent.test(name)){jQuery.event.fixHooks[name]=jQuery.event.mouseHooks}});!function(window,undefined){var dirruns,cachedruns,assertGetIdNotName,Expr,getText,isXML,contains,compile,sortOrder,hasDuplicate,baseHasDuplicate=true,strundefined="undefined",expando=("sizcache"+Math.random()).replace(".",""),document=window.document,docElem=document.documentElement,done=0,slice=[].slice,push=[].push,markFunction=function(fn,value){fn[expando]=value||true;return fn},createCache=function(){var cache={},keys=[];return markFunction(function(key,value){if(keys.push(key)>Expr.cacheLength){delete cache[keys.shift()]}return cache[key]=value},cache)},classCache=createCache(),tokenCache=createCache(),compilerCache=createCache(),whitespace="[\\x20\\t\\r\\n\\f]",characterEncoding="(?:\\\\.|[-\\w]|[^\\x00-\\xa0])+",identifier=characterEncoding.replace("w","w#"),operators="([*^$|!~]?=)",attributes="\\["+whitespace+"*("+characterEncoding+")"+whitespace+"*(?:"+operators+whitespace+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+identifier+")|)|)"+whitespace+"*\\]",pseudos=":("+characterEncoding+")(?:\\((?:(['\"])((?:\\\\.|[^\\\\])*?)\\2|([^()[\\]]*|(?:(?:"+attributes+")|[^:]|\\\\.)*|.*))\\)|)",pos=":(nth|eq|gt|lt|first|last|even|odd)(?:\\(((?:-\\d)?\\d*)\\)|)(?=[^-]|$)",rtrim=new RegExp("^"+whitespace+"+|((?:^|[^\\\\])(?:\\\\.)*)"+whitespace+"+$","g"),rcomma=new RegExp("^"+whitespace+"*,"+whitespace+"*"),rcombinators=new RegExp("^"+whitespace+"*([\\x20\\t\\r\\n\\f>+~])"+whitespace+"*"),rpseudo=new RegExp(pseudos),rquickExpr=/^(?:#([\w\-]+)|(\w+)|\.([\w\-]+))$/,rnot=/^:not/,rsibling=/[\x20\t\r\n\f]*[+~]/,rendsWithNot=/:not\($/,rheader=/h\d/i,rinputs=/input|select|textarea|button/i,rbackslash=/\\(?!\\)/g,matchExpr={ID:new RegExp("^#("+characterEncoding+")"),CLASS:new RegExp("^\\.("+characterEncoding+")"),NAME:new RegExp("^\\[name=['\"]?("+characterEncoding+")['\"]?\\]"),TAG:new RegExp("^("+characterEncoding.replace("w","w*")+")"),ATTR:new RegExp("^"+attributes),PSEUDO:new RegExp("^"+pseudos),CHILD:new RegExp("^:(only|nth|last|first)-child(?:\\("+whitespace+"*(even|odd|(([+-]|)(\\d*)n|)"+whitespace+"*(?:([+-]|)"+whitespace+"*(\\d+)|))"+whitespace+"*\\)|)","i"),POS:new RegExp(pos,"ig"),needsContext:new RegExp("^"+whitespace+"*[>+~]|"+pos,"i")},assert=function(fn){var div=document.createElement("div");try{return fn(div)}catch(e){return false}finally{div=null}},assertTagNameNoComments=assert(function(div){div.appendChild(document.createComment(""));return!div.getElementsByTagName("*").length}),assertHrefNotNormalized=assert(function(div){div.innerHTML="<a href='#'></a>";return div.firstChild&&typeof div.firstChild.getAttribute!==strundefined&&div.firstChild.getAttribute("href")==="#"}),assertAttributes=assert(function(div){div.innerHTML="<select></select>";var type=typeof div.lastChild.getAttribute("multiple");return type!=="boolean"&&type!=="string"}),assertUsableClassName=assert(function(div){div.innerHTML="<div class='hidden e'></div><div class='hidden'></div>";if(!div.getElementsByClassName||!div.getElementsByClassName("e").length){return false}div.lastChild.className="e";return div.getElementsByClassName("e").length===2}),assertUsableName=assert(function(div){div.id=expando+0;div.innerHTML="<a name='"+expando+"'></a><div name='"+expando+"'></div>";docElem.insertBefore(div,docElem.firstChild);var pass=document.getElementsByName&&document.getElementsByName(expando).length===2+document.getElementsByName(expando+0).length;assertGetIdNotName=!document.getElementById(expando);docElem.removeChild(div);return pass});try{slice.call(docElem.childNodes,0)[0].nodeType}catch(e){slice=function(i){var elem,results=[];for(;elem=this[i];i++){results.push(elem)}return results}}function Sizzle(selector,context,results,seed){results=results||[];context=context||document;var match,elem,xml,m,nodeType=context.nodeType;if(nodeType!==1&&nodeType!==9){return[]}if(!selector||typeof selector!=="string"){return results}xml=isXML(context);if(!xml&&!seed){if(match=rquickExpr.exec(selector)){if(m=match[1]){if(nodeType===9){elem=context.getElementById(m);if(elem&&elem.parentNode){if(elem.id===m){results.push(elem);return results}}else{return results}}else{if(context.ownerDocument&&(elem=context.ownerDocument.getElementById(m))&&contains(context,elem)&&elem.id===m){results.push(elem);return results}}}else if(match[2]){push.apply(results,slice.call(context.getElementsByTagName(selector),0));return results}else if((m=match[3])&&assertUsableClassName&&context.getElementsByClassName){push.apply(results,slice.call(context.getElementsByClassName(m),0));return results}}}return select(selector,context,results,seed,xml)}Sizzle.matches=function(expr,elements){return Sizzle(expr,null,null,elements)};Sizzle.matchesSelector=function(elem,expr){return Sizzle(expr,null,null,[elem]).length>0};function createInputPseudo(type){return function(elem){var name=elem.nodeName.toLowerCase();return name==="input"&&elem.type===type}}function createButtonPseudo(type){return function(elem){var name=elem.nodeName.toLowerCase();return(name==="input"||name==="button")&&elem.type===type}}getText=Sizzle.getText=function(elem){var node,ret="",i=0,nodeType=elem.nodeType;if(nodeType){if(nodeType===1||nodeType===9||nodeType===11){if(typeof elem.textContent==="string"){return elem.textContent}else{for(elem=elem.firstChild;elem;elem=elem.nextSibling){ret+=getText(elem)}}}else if(nodeType===3||nodeType===4){return elem.nodeValue}}else{for(;node=elem[i];i++){ret+=getText(node)}}return ret};isXML=Sizzle.isXML=function isXML(elem){var documentElement=elem&&(elem.ownerDocument||elem).documentElement;return documentElement?documentElement.nodeName!=="HTML":false};contains=Sizzle.contains=docElem.contains?function(a,b){var adown=a.nodeType===9?a.documentElement:a,bup=b&&b.parentNode;return a===bup||!!(bup&&bup.nodeType===1&&adown.contains&&adown.contains(bup))}:docElem.compareDocumentPosition?function(a,b){return b&&!!(a.compareDocumentPosition(b)&16)}:function(a,b){while(b=b.parentNode){if(b===a){return true}}return false};Sizzle.attr=function(elem,name){var attr,xml=isXML(elem);if(!xml){name=name.toLowerCase()}if(Expr.attrHandle[name]){return Expr.attrHandle[name](elem)}if(assertAttributes||xml){return elem.getAttribute(name)}attr=elem.getAttributeNode(name);return attr?typeof elem[name]==="boolean"?elem[name]?name:null:attr.specified?attr.value:null:null};Expr=Sizzle.selectors={cacheLength:50,createPseudo:markFunction,match:matchExpr,order:new RegExp("ID|TAG"+(assertUsableName?"|NAME":"")+(assertUsableClassName?"|CLASS":"")),attrHandle:assertHrefNotNormalized?{}:{href:function(elem){return elem.getAttribute("href",2)},type:function(elem){return elem.getAttribute("type")}},find:{ID:assertGetIdNotName?function(id,context,xml){if(typeof context.getElementById!==strundefined&&!xml){var m=context.getElementById(id);return m&&m.parentNode?[m]:[]}}:function(id,context,xml){if(typeof context.getElementById!==strundefined&&!xml){var m=context.getElementById(id);return m?m.id===id||typeof m.getAttributeNode!==strundefined&&m.getAttributeNode("id").value===id?[m]:undefined:[]}},TAG:assertTagNameNoComments?function(tag,context){if(typeof context.getElementsByTagName!==strundefined){return context.getElementsByTagName(tag)}}:function(tag,context){var results=context.getElementsByTagName(tag);if(tag==="*"){var elem,tmp=[],i=0;for(;elem=results[i];i++){if(elem.nodeType===1){tmp.push(elem)}}return tmp}return results},NAME:function(tag,context){if(typeof context.getElementsByName!==strundefined){return context.getElementsByName(name)}},CLASS:function(className,context,xml){if(typeof context.getElementsByClassName!==strundefined&&!xml){return context.getElementsByClassName(className)}}},relative:{">":{dir:"parentNode",first:true}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:true},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(match){match[1]=match[1].replace(rbackslash,"");match[3]=(match[4]||match[5]||"").replace(rbackslash,"");if(match[2]==="~="){match[3]=" "+match[3]+" "}return match.slice(0,4)},CHILD:function(match){match[1]=match[1].toLowerCase();if(match[1]==="nth"){if(!match[2]){Sizzle.error(match[0])}match[3]=+(match[3]?match[4]+(match[5]||1):2*(match[2]==="even"||match[2]==="odd"));match[4]=+(match[6]+match[7]||match[2]==="odd")}else if(match[2]){Sizzle.error(match[0])}return match},PSEUDO:function(match,context,xml){var unquoted,excess;if(matchExpr["CHILD"].test(match[0])){return null}if(match[3]){match[2]=match[3]}else if(unquoted=match[4]){if(rpseudo.test(unquoted)&&(excess=tokenize(unquoted,context,xml,true))&&(excess=unquoted.indexOf(")",unquoted.length-excess)-unquoted.length)){unquoted=unquoted.slice(0,excess);match[0]=match[0].slice(0,excess)}match[2]=unquoted}return match.slice(0,3)}},filter:{ID:assertGetIdNotName?function(id){id=id.replace(rbackslash,"");return function(elem){return elem.getAttribute("id")===id}}:function(id){id=id.replace(rbackslash,"");return function(elem){var node=typeof elem.getAttributeNode!==strundefined&&elem.getAttributeNode("id");return node&&node.value===id}},TAG:function(nodeName){if(nodeName==="*"){return function(){return true}}nodeName=nodeName.replace(rbackslash,"").toLowerCase();return function(elem){return elem.nodeName&&elem.nodeName.toLowerCase()===nodeName}},CLASS:function(className){var pattern=classCache[expando][className];if(!pattern){pattern=classCache(className,new RegExp("(^|"+whitespace+")"+className+"("+whitespace+"|$)"))}return function(elem){return pattern.test(elem.className||typeof elem.getAttribute!==strundefined&&elem.getAttribute("class")||"")}},ATTR:function(name,operator,check){if(!operator){return function(elem){return Sizzle.attr(elem,name)!=null}}return function(elem){var result=Sizzle.attr(elem,name),value=result+"";if(result==null){return operator==="!="}switch(operator){case"=":return value===check;case"!=":return value!==check;case"^=":return check&&value.indexOf(check)===0;case"*=":return check&&value.indexOf(check)>-1;case"$=":return check&&value.substr(value.length-check.length)===check;
case"~=":return(" "+value+" ").indexOf(check)>-1;case"|=":return value===check||value.substr(0,check.length+1)===check+"-"}}},CHILD:function(type,argument,first,last){if(type==="nth"){var doneName=done++;return function(elem){var parent,diff,count=0,node=elem;if(first===1&&last===0){return true}parent=elem.parentNode;if(parent&&(parent[expando]!==doneName||!elem.sizset)){for(node=parent.firstChild;node;node=node.nextSibling){if(node.nodeType===1){node.sizset=++count;if(node===elem){break}}}parent[expando]=doneName}diff=elem.sizset-last;if(first===0){return diff===0}else{return diff%first===0&&diff/first>=0}}}return function(elem){var node=elem;switch(type){case"only":case"first":while(node=node.previousSibling){if(node.nodeType===1){return false}}if(type==="first"){return true}node=elem;case"last":while(node=node.nextSibling){if(node.nodeType===1){return false}}return true}}},PSEUDO:function(pseudo,argument,context,xml){var args,fn=Expr.pseudos[pseudo]||Expr.pseudos[pseudo.toLowerCase()];if(!fn){Sizzle.error("unsupported pseudo: "+pseudo)}if(!fn[expando]){if(fn.length>1){args=[pseudo,pseudo,"",argument];return function(elem){return fn(elem,0,args)}}return fn}return fn(argument,context,xml)}},pseudos:{not:markFunction(function(selector,context,xml){var matcher=compile(selector.replace(rtrim,"$1"),context,xml);return function(elem){return!matcher(elem)}}),enabled:function(elem){return elem.disabled===false},disabled:function(elem){return elem.disabled===true},checked:function(elem){var nodeName=elem.nodeName.toLowerCase();return nodeName==="input"&&!!elem.checked||nodeName==="option"&&!!elem.selected},selected:function(elem){if(elem.parentNode){elem.parentNode.selectedIndex}return elem.selected===true},parent:function(elem){return!Expr.pseudos["empty"](elem)},empty:function(elem){var nodeType;elem=elem.firstChild;while(elem){if(elem.nodeName>"@"||(nodeType=elem.nodeType)===3||nodeType===4){return false}elem=elem.nextSibling}return true},contains:markFunction(function(text){return function(elem){return(elem.textContent||elem.innerText||getText(elem)).indexOf(text)>-1}}),has:markFunction(function(selector){return function(elem){return Sizzle(selector,elem).length>0}}),header:function(elem){return rheader.test(elem.nodeName)},text:function(elem){var type,attr;return elem.nodeName.toLowerCase()==="input"&&(type=elem.type)==="text"&&((attr=elem.getAttribute("type"))==null||attr.toLowerCase()===type)},radio:createInputPseudo("radio"),checkbox:createInputPseudo("checkbox"),file:createInputPseudo("file"),password:createInputPseudo("password"),image:createInputPseudo("image"),submit:createButtonPseudo("submit"),reset:createButtonPseudo("reset"),button:function(elem){var name=elem.nodeName.toLowerCase();return name==="input"&&elem.type==="button"||name==="button"},input:function(elem){return rinputs.test(elem.nodeName)},focus:function(elem){var doc=elem.ownerDocument;return elem===doc.activeElement&&(!doc.hasFocus||doc.hasFocus())&&!!(elem.type||elem.href)},active:function(elem){return elem===elem.ownerDocument.activeElement}},setFilters:{first:function(elements,argument,not){return not?elements.slice(1):[elements[0]]},last:function(elements,argument,not){var elem=elements.pop();return not?elements:[elem]},even:function(elements,argument,not){var results=[],i=not?1:0,len=elements.length;for(;i<len;i=i+2){results.push(elements[i])}return results},odd:function(elements,argument,not){var results=[],i=not?0:1,len=elements.length;for(;i<len;i=i+2){results.push(elements[i])}return results},lt:function(elements,argument,not){return not?elements.slice(+argument):elements.slice(0,+argument)},gt:function(elements,argument,not){return not?elements.slice(0,+argument+1):elements.slice(+argument+1)},eq:function(elements,argument,not){var elem=elements.splice(+argument,1);return not?elements:elem}}};function siblingCheck(a,b,ret){if(a===b){return ret}var cur=a.nextSibling;while(cur){if(cur===b){return-1}cur=cur.nextSibling}return 1}sortOrder=docElem.compareDocumentPosition?function(a,b){if(a===b){hasDuplicate=true;return 0}return(!a.compareDocumentPosition||!b.compareDocumentPosition?a.compareDocumentPosition:a.compareDocumentPosition(b)&4)?-1:1}:function(a,b){if(a===b){hasDuplicate=true;return 0}else if(a.sourceIndex&&b.sourceIndex){return a.sourceIndex-b.sourceIndex}var al,bl,ap=[],bp=[],aup=a.parentNode,bup=b.parentNode,cur=aup;if(aup===bup){return siblingCheck(a,b)}else if(!aup){return-1}else if(!bup){return 1}while(cur){ap.unshift(cur);cur=cur.parentNode}cur=bup;while(cur){bp.unshift(cur);cur=cur.parentNode}al=ap.length;bl=bp.length;for(var i=0;i<al&&i<bl;i++){if(ap[i]!==bp[i]){return siblingCheck(ap[i],bp[i])}}return i===al?siblingCheck(a,bp[i],-1):siblingCheck(ap[i],b,1)};[0,0].sort(sortOrder);baseHasDuplicate=!hasDuplicate;Sizzle.uniqueSort=function(results){var elem,i=1;hasDuplicate=baseHasDuplicate;results.sort(sortOrder);if(hasDuplicate){for(;elem=results[i];i++){if(elem===results[i-1]){results.splice(i--,1)}}}return results};Sizzle.error=function(msg){throw new Error("Syntax error, unrecognized expression: "+msg)};function tokenize(selector,context,xml,parseOnly){var matched,match,tokens,type,soFar,groups,group,i,preFilters,filters,checkContext=!xml&&context!==document,key=(checkContext?"<s>":"")+selector.replace(rtrim,"$1<s>"),cached=tokenCache[expando][key];if(cached){return parseOnly?0:slice.call(cached,0)}soFar=selector;groups=[];i=0;preFilters=Expr.preFilter;filters=Expr.filter;while(soFar){if(!matched||(match=rcomma.exec(soFar))){if(match){soFar=soFar.slice(match[0].length);tokens.selector=group}groups.push(tokens=[]);group="";if(checkContext){soFar=" "+soFar}}matched=false;if(match=rcombinators.exec(soFar)){group+=match[0];soFar=soFar.slice(match[0].length);matched=tokens.push({part:match.pop().replace(rtrim," "),string:match[0],captures:match})}for(type in filters){if((match=matchExpr[type].exec(soFar))&&(!preFilters[type]||(match=preFilters[type](match,context,xml)))){group+=match[0];soFar=soFar.slice(match[0].length);matched=tokens.push({part:type,string:match.shift(),captures:match})}}if(!matched){break}}if(group){tokens.selector=group}return parseOnly?soFar.length:soFar?Sizzle.error(selector):slice.call(tokenCache(key,groups),0)}function addCombinator(matcher,combinator,context,xml){var dir=combinator.dir,doneName=done++;if(!matcher){matcher=function(elem){return elem===context}}return combinator.first?function(elem){while(elem=elem[dir]){if(elem.nodeType===1){return matcher(elem)&&elem}}}:xml?function(elem){while(elem=elem[dir]){if(elem.nodeType===1){if(matcher(elem)){return elem}}}}:function(elem){var cache,dirkey=doneName+"."+dirruns,cachedkey=dirkey+"."+cachedruns;while(elem=elem[dir]){if(elem.nodeType===1){if((cache=elem[expando])===cachedkey){return elem.sizset}else if(typeof cache==="string"&&cache.indexOf(dirkey)===0){if(elem.sizset){return elem}}else{elem[expando]=cachedkey;if(matcher(elem)){elem.sizset=true;return elem}elem.sizset=false}}}}}function addMatcher(higher,deeper){return higher?function(elem){var result=deeper(elem);return result&&higher(result===true?elem:result)}:deeper}function matcherFromTokens(tokens,context,xml){var token,matcher,i=0;for(;token=tokens[i];i++){if(Expr.relative[token.part]){matcher=addCombinator(matcher,Expr.relative[token.part],context,xml)}else{matcher=addMatcher(matcher,Expr.filter[token.part].apply(null,token.captures.concat(context,xml)))}}return matcher}function matcherFromGroupMatchers(matchers){return function(elem){var matcher,j=0;for(;matcher=matchers[j];j++){if(matcher(elem)){return true}}return false}}compile=Sizzle.compile=function(selector,context,xml){var group,i,len,cached=compilerCache[expando][selector];if(cached&&cached.context===context){return cached}group=tokenize(selector,context,xml);for(i=0,len=group.length;i<len;i++){group[i]=matcherFromTokens(group[i],context,xml)}cached=compilerCache(selector,matcherFromGroupMatchers(group));cached.context=context;cached.runs=cached.dirruns=0;return cached};function multipleContexts(selector,contexts,results,seed){var i=0,len=contexts.length;for(;i<len;i++){Sizzle(selector,contexts[i],results,seed)}}function handlePOSGroup(selector,posfilter,argument,contexts,seed,not){var results,fn=Expr.setFilters[posfilter.toLowerCase()];if(!fn){Sizzle.error(posfilter)}if(selector||!(results=seed)){multipleContexts(selector||"*",contexts,results=[],seed)}return results.length>0?fn(results,argument,not):[]}function handlePOS(groups,context,results,seed){var group,part,j,groupLen,token,selector,anchor,elements,match,matched,lastIndex,currentContexts,not,i=0,len=groups.length,rpos=matchExpr["POS"],rposgroups=new RegExp("^"+rpos.source+"(?!"+whitespace+")","i"),setUndefined=function(){var i=1,len=arguments.length-2;for(;i<len;i++){if(arguments[i]===undefined){match[i]=undefined}}};for(;i<len;i++){group=groups[i];part="";elements=seed;for(j=0,groupLen=group.length;j<groupLen;j++){token=group[j];selector=token.string;if(token.part==="PSEUDO"){rpos.exec("");anchor=0;while(match=rpos.exec(selector)){matched=true;lastIndex=rpos.lastIndex=match.index+match[0].length;if(lastIndex>anchor){part+=selector.slice(anchor,match.index);anchor=lastIndex;currentContexts=[context];if(rcombinators.test(part)){if(elements){currentContexts=elements}elements=seed}if(not=rendsWithNot.test(part)){part=part.slice(0,-5).replace(rcombinators,"$&*");anchor++}if(match.length>1){match[0].replace(rposgroups,setUndefined)}elements=handlePOSGroup(part,match[1],match[2],currentContexts,elements,not)}part=""}}if(!matched){part+=selector}matched=false}if(part){if(rcombinators.test(part)){multipleContexts(part,elements||[context],results,seed)}else{Sizzle(part,context,results,seed?seed.concat(elements):elements)}}else{push.apply(results,elements)}}return len===1?results:Sizzle.uniqueSort(results)}function select(selector,context,results,seed,xml){selector=selector.replace(rtrim,"$1");var elements,matcher,cached,elem,i,tokens,token,lastToken,findContext,type,match=tokenize(selector,context,xml),contextNodeType=context.nodeType;if(matchExpr["POS"].test(selector)){return handlePOS(match,context,results,seed)}if(seed){elements=slice.call(seed,0)}else if(match.length===1){if((tokens=slice.call(match[0],0)).length>2&&(token=tokens[0]).part==="ID"&&contextNodeType===9&&!xml&&Expr.relative[tokens[1].part]){context=Expr.find["ID"](token.captures[0].replace(rbackslash,""),context,xml)[0];if(!context){return results}selector=selector.slice(tokens.shift().string.length)}findContext=(match=rsibling.exec(tokens[0].string))&&!match.index&&context.parentNode||context;lastToken="";for(i=tokens.length-1;i>=0;i--){token=tokens[i];type=token.part;lastToken=token.string+lastToken;if(Expr.relative[type]){break}if(Expr.order.test(type)){elements=Expr.find[type](token.captures[0].replace(rbackslash,""),findContext,xml);if(elements==null){continue}else{selector=selector.slice(0,selector.length-lastToken.length)+lastToken.replace(matchExpr[type],"");if(!selector){push.apply(results,slice.call(elements,0))}break}}}}if(selector){matcher=compile(selector,context,xml);dirruns=matcher.dirruns++;if(elements==null){elements=Expr.find["TAG"]("*",rsibling.test(selector)&&context.parentNode||context)}for(i=0;elem=elements[i];i++){cachedruns=matcher.runs++;if(matcher(elem)){results.push(elem)}}}return results}if(document.querySelectorAll){!function(){var disconnectedMatch,oldSelect=select,rescape=/'|\\/g,rattributeQuotes=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,rbuggyQSA=[],rbuggyMatches=[":active"],matches=docElem.matchesSelector||docElem.mozMatchesSelector||docElem.webkitMatchesSelector||docElem.oMatchesSelector||docElem.msMatchesSelector;assert(function(div){div.innerHTML="<select><option selected=''></option></select>";if(!div.querySelectorAll("[selected]").length){rbuggyQSA.push("\\["+whitespace+"*(?:checked|disabled|ismap|multiple|readonly|selected|value)")}if(!div.querySelectorAll(":checked").length){rbuggyQSA.push(":checked")}});assert(function(div){div.innerHTML="<p test=''></p>";if(div.querySelectorAll("[test^='']").length){rbuggyQSA.push("[*^$]="+whitespace+"*(?:\"\"|'')")}div.innerHTML="<input type='hidden'/>";if(!div.querySelectorAll(":enabled").length){rbuggyQSA.push(":enabled",":disabled")}});rbuggyQSA=rbuggyQSA.length&&new RegExp(rbuggyQSA.join("|"));select=function(selector,context,results,seed,xml){if(!seed&&!xml&&(!rbuggyQSA||!rbuggyQSA.test(selector))){if(context.nodeType===9){try{push.apply(results,slice.call(context.querySelectorAll(selector),0));return results}catch(qsaError){}}else if(context.nodeType===1&&context.nodeName.toLowerCase()!=="object"){var groups,i,len,old=context.getAttribute("id"),nid=old||expando,newContext=rsibling.test(selector)&&context.parentNode||context;if(old){nid=nid.replace(rescape,"\\$&")}else{context.setAttribute("id",nid)}groups=tokenize(selector,context,xml);nid="[id='"+nid+"']";for(i=0,len=groups.length;i<len;i++){groups[i]=nid+groups[i].selector}try{push.apply(results,slice.call(newContext.querySelectorAll(groups.join(",")),0));return results}catch(qsaError){}finally{if(!old){context.removeAttribute("id")}}}}return oldSelect(selector,context,results,seed,xml)};if(matches){assert(function(div){disconnectedMatch=matches.call(div,"div");try{matches.call(div,"[test!='']:sizzle");rbuggyMatches.push(matchExpr["PSEUDO"].source,matchExpr["POS"].source,"!=")}catch(e){}});rbuggyMatches=new RegExp(rbuggyMatches.join("|"));Sizzle.matchesSelector=function(elem,expr){expr=expr.replace(rattributeQuotes,"='$1']");if(!isXML(elem)&&!rbuggyMatches.test(expr)&&(!rbuggyQSA||!rbuggyQSA.test(expr))){try{var ret=matches.call(elem,expr);if(ret||disconnectedMatch||elem.document&&elem.document.nodeType!==11){return ret}}catch(e){}}return Sizzle(expr,null,null,[elem]).length>0}}}()}Expr.setFilters["nth"]=Expr.setFilters["eq"];Expr.filters=Expr.pseudos;Sizzle.attr=jQuery.attr;jQuery.find=Sizzle;jQuery.expr=Sizzle.selectors;jQuery.expr[":"]=jQuery.expr.pseudos;jQuery.unique=Sizzle.uniqueSort;jQuery.text=Sizzle.getText;jQuery.isXMLDoc=Sizzle.isXML;jQuery.contains=Sizzle.contains}(window);var runtil=/Until$/,rparentsprev=/^(?:parents|prev(?:Until|All))/,isSimple=/^.[^:#\[\.,]*$/,rneedsContext=jQuery.expr.match.needsContext,guaranteedUnique={children:true,contents:true,next:true,prev:true};jQuery.fn.extend({find:function(selector){var i,l,length,n,r,ret,self=this;if(typeof selector!=="string"){return jQuery(selector).filter(function(){for(i=0,l=self.length;i<l;i++){if(jQuery.contains(self[i],this)){return true}}})}ret=this.pushStack("","find",selector);for(i=0,l=this.length;i<l;i++){length=ret.length;jQuery.find(selector,this[i],ret);if(i>0){for(n=length;n<ret.length;n++){for(r=0;r<length;r++){if(ret[r]===ret[n]){ret.splice(n--,1);break}}}}}return ret},has:function(target){var i,targets=jQuery(target,this),len=targets.length;return this.filter(function(){for(i=0;i<len;i++){if(jQuery.contains(this,targets[i])){return true}}})},not:function(selector){return this.pushStack(winnow(this,selector,false),"not",selector)},filter:function(selector){return this.pushStack(winnow(this,selector,true),"filter",selector)},is:function(selector){return!!selector&&(typeof selector==="string"?rneedsContext.test(selector)?jQuery(selector,this.context).index(this[0])>=0:jQuery.filter(selector,this).length>0:this.filter(selector).length>0)},closest:function(selectors,context){var cur,i=0,l=this.length,ret=[],pos=rneedsContext.test(selectors)||typeof selectors!=="string"?jQuery(selectors,context||this.context):0;for(;i<l;i++){cur=this[i];while(cur&&cur.ownerDocument&&cur!==context&&cur.nodeType!==11){if(pos?pos.index(cur)>-1:jQuery.find.matchesSelector(cur,selectors)){ret.push(cur);break}cur=cur.parentNode}}ret=ret.length>1?jQuery.unique(ret):ret;return this.pushStack(ret,"closest",selectors)},index:function(elem){if(!elem){return this[0]&&this[0].parentNode?this.prevAll().length:-1}if(typeof elem==="string"){return jQuery.inArray(this[0],jQuery(elem))}return jQuery.inArray(elem.jquery?elem[0]:elem,this)},add:function(selector,context){var set=typeof selector==="string"?jQuery(selector,context):jQuery.makeArray(selector&&selector.nodeType?[selector]:selector),all=jQuery.merge(this.get(),set);return this.pushStack(isDisconnected(set[0])||isDisconnected(all[0])?all:jQuery.unique(all))},addBack:function(selector){return this.add(selector==null?this.prevObject:this.prevObject.filter(selector))}});jQuery.fn.andSelf=jQuery.fn.addBack;function isDisconnected(node){return!node||!node.parentNode||node.parentNode.nodeType===11}function sibling(cur,dir){do{cur=cur[dir]}while(cur&&cur.nodeType!==1);return cur}jQuery.each({parent:function(elem){var parent=elem.parentNode;return parent&&parent.nodeType!==11?parent:null},parents:function(elem){return jQuery.dir(elem,"parentNode")},parentsUntil:function(elem,i,until){return jQuery.dir(elem,"parentNode",until)},next:function(elem){return sibling(elem,"nextSibling")},prev:function(elem){return sibling(elem,"previousSibling")},nextAll:function(elem){return jQuery.dir(elem,"nextSibling")},prevAll:function(elem){return jQuery.dir(elem,"previousSibling")},nextUntil:function(elem,i,until){return jQuery.dir(elem,"nextSibling",until)},prevUntil:function(elem,i,until){return jQuery.dir(elem,"previousSibling",until)},siblings:function(elem){return jQuery.sibling((elem.parentNode||{}).firstChild,elem)},children:function(elem){return jQuery.sibling(elem.firstChild)},contents:function(elem){return jQuery.nodeName(elem,"iframe")?elem.contentDocument||elem.contentWindow.document:jQuery.merge([],elem.childNodes)}},function(name,fn){jQuery.fn[name]=function(until,selector){var ret=jQuery.map(this,fn,until);if(!runtil.test(name)){selector=until}if(selector&&typeof selector==="string"){ret=jQuery.filter(selector,ret)}ret=this.length>1&&!guaranteedUnique[name]?jQuery.unique(ret):ret;if(this.length>1&&rparentsprev.test(name)){ret=ret.reverse()}return this.pushStack(ret,name,core_slice.call(arguments).join(","))}});jQuery.extend({filter:function(expr,elems,not){if(not){expr=":not("+expr+")"}return elems.length===1?jQuery.find.matchesSelector(elems[0],expr)?[elems[0]]:[]:jQuery.find.matches(expr,elems)},dir:function(elem,dir,until){var matched=[],cur=elem[dir];while(cur&&cur.nodeType!==9&&(until===undefined||cur.nodeType!==1||!jQuery(cur).is(until))){if(cur.nodeType===1){matched.push(cur)}cur=cur[dir]}return matched},sibling:function(n,elem){var r=[];for(;n;n=n.nextSibling){if(n.nodeType===1&&n!==elem){r.push(n)}}return r}});function winnow(elements,qualifier,keep){qualifier=qualifier||0;if(jQuery.isFunction(qualifier)){return jQuery.grep(elements,function(elem,i){var retVal=!!qualifier.call(elem,i,elem);return retVal===keep})}else if(qualifier.nodeType){return jQuery.grep(elements,function(elem,i){return elem===qualifier===keep})}else if(typeof qualifier==="string"){var filtered=jQuery.grep(elements,function(elem){return elem.nodeType===1});if(isSimple.test(qualifier)){return jQuery.filter(qualifier,filtered,!keep)}else{qualifier=jQuery.filter(qualifier,filtered)}}return jQuery.grep(elements,function(elem,i){return jQuery.inArray(elem,qualifier)>=0===keep})}function createSafeFragment(document){var list=nodeNames.split("|"),safeFrag=document.createDocumentFragment();if(safeFrag.createElement){while(list.length){safeFrag.createElement(list.pop())}}return safeFrag}var nodeNames="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|"+"header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",rinlinejQuery=/ jQuery\d+="(?:null|\d+)"/g,rleadingWhitespace=/^\s+/,rxhtmlTag=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,rtagName=/<([\w:]+)/,rtbody=/<tbody/i,rhtml=/<|&#?\w+;/,rnoInnerhtml=/<(?:script|style|link)/i,rnocache=/<(?:script|object|embed|option|style)/i,rnoshimcache=new RegExp("<(?:"+nodeNames+")[\\s/>]","i"),rcheckableType=/^(?:checkbox|radio)$/,rchecked=/checked\s*(?:[^=]|=\s*.checked.)/i,rscriptType=/\/(java|ecma)script/i,rcleanScript=/^\s*<!(?:\[CDATA\[|\-\-)|[\]\-]{2}>\s*$/g,wrapMap={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},safeFragment=createSafeFragment(document),fragmentDiv=safeFragment.appendChild(document.createElement("div"));wrapMap.optgroup=wrapMap.option;wrapMap.tbody=wrapMap.tfoot=wrapMap.colgroup=wrapMap.caption=wrapMap.thead;wrapMap.th=wrapMap.td;if(!jQuery.support.htmlSerialize){wrapMap._default=[1,"X<div>","</div>"]}jQuery.fn.extend({text:function(value){return jQuery.access(this,function(value){return value===undefined?jQuery.text(this):this.empty().append((this[0]&&this[0].ownerDocument||document).createTextNode(value))},null,value,arguments.length)},wrapAll:function(html){if(jQuery.isFunction(html)){return this.each(function(i){jQuery(this).wrapAll(html.call(this,i))})}if(this[0]){var wrap=jQuery(html,this[0].ownerDocument).eq(0).clone(true);if(this[0].parentNode){wrap.insertBefore(this[0])}wrap.map(function(){var elem=this;while(elem.firstChild&&elem.firstChild.nodeType===1){elem=elem.firstChild}return elem}).append(this)}return this},wrapInner:function(html){if(jQuery.isFunction(html)){return this.each(function(i){jQuery(this).wrapInner(html.call(this,i))})}return this.each(function(){var self=jQuery(this),contents=self.contents();if(contents.length){contents.wrapAll(html)}else{self.append(html)}})},wrap:function(html){var isFunction=jQuery.isFunction(html);return this.each(function(i){jQuery(this).wrapAll(isFunction?html.call(this,i):html)})},unwrap:function(){return this.parent().each(function(){if(!jQuery.nodeName(this,"body")){jQuery(this).replaceWith(this.childNodes)}}).end()},append:function(){return this.domManip(arguments,true,function(elem){if(this.nodeType===1||this.nodeType===11){this.appendChild(elem)}})},prepend:function(){return this.domManip(arguments,true,function(elem){if(this.nodeType===1||this.nodeType===11){this.insertBefore(elem,this.firstChild)}})},before:function(){if(!isDisconnected(this[0])){return this.domManip(arguments,false,function(elem){this.parentNode.insertBefore(elem,this)})}if(arguments.length){var set=jQuery.clean(arguments);return this.pushStack(jQuery.merge(set,this),"before",this.selector)}},after:function(){if(!isDisconnected(this[0])){return this.domManip(arguments,false,function(elem){this.parentNode.insertBefore(elem,this.nextSibling)})}if(arguments.length){var set=jQuery.clean(arguments);return this.pushStack(jQuery.merge(this,set),"after",this.selector)}},remove:function(selector,keepData){var elem,i=0;for(;(elem=this[i])!=null;i++){if(!selector||jQuery.filter(selector,[elem]).length){if(!keepData&&elem.nodeType===1){jQuery.cleanData(elem.getElementsByTagName("*"));jQuery.cleanData([elem])}if(elem.parentNode){elem.parentNode.removeChild(elem)}}}return this},empty:function(){var elem,i=0;for(;(elem=this[i])!=null;i++){if(elem.nodeType===1){jQuery.cleanData(elem.getElementsByTagName("*"))}while(elem.firstChild){elem.removeChild(elem.firstChild)}}return this},clone:function(dataAndEvents,deepDataAndEvents){dataAndEvents=dataAndEvents==null?false:dataAndEvents;deepDataAndEvents=deepDataAndEvents==null?dataAndEvents:deepDataAndEvents;return this.map(function(){return jQuery.clone(this,dataAndEvents,deepDataAndEvents)})},html:function(value){return jQuery.access(this,function(value){var elem=this[0]||{},i=0,l=this.length;if(value===undefined){return elem.nodeType===1?elem.innerHTML.replace(rinlinejQuery,""):undefined}if(typeof value==="string"&&!rnoInnerhtml.test(value)&&(jQuery.support.htmlSerialize||!rnoshimcache.test(value))&&(jQuery.support.leadingWhitespace||!rleadingWhitespace.test(value))&&!wrapMap[(rtagName.exec(value)||["",""])[1].toLowerCase()]){value=value.replace(rxhtmlTag,"<$1></$2>");try{for(;i<l;i++){elem=this[i]||{};if(elem.nodeType===1){jQuery.cleanData(elem.getElementsByTagName("*"));elem.innerHTML=value}}elem=0}catch(e){}}if(elem){this.empty().append(value)}},null,value,arguments.length)},replaceWith:function(value){if(!isDisconnected(this[0])){if(jQuery.isFunction(value)){return this.each(function(i){var self=jQuery(this),old=self.html();self.replaceWith(value.call(this,i,old))})}if(typeof value!=="string"){value=jQuery(value).detach()}return this.each(function(){var next=this.nextSibling,parent=this.parentNode;jQuery(this).remove();if(next){jQuery(next).before(value)}else{jQuery(parent).append(value)}})}return this.length?this.pushStack(jQuery(jQuery.isFunction(value)?value():value),"replaceWith",value):this},detach:function(selector){return this.remove(selector,true)},domManip:function(args,table,callback){args=[].concat.apply([],args);var results,first,fragment,iNoClone,i=0,value=args[0],scripts=[],l=this.length;if(!jQuery.support.checkClone&&l>1&&typeof value==="string"&&rchecked.test(value)){return this.each(function(){jQuery(this).domManip(args,table,callback)})}if(jQuery.isFunction(value)){return this.each(function(i){var self=jQuery(this);args[0]=value.call(this,i,table?self.html():undefined);self.domManip(args,table,callback)})}if(this[0]){results=jQuery.buildFragment(args,this,scripts);fragment=results.fragment;first=fragment.firstChild;if(fragment.childNodes.length===1){fragment=first}if(first){table=table&&jQuery.nodeName(first,"tr");for(iNoClone=results.cacheable||l-1;i<l;i++){callback.call(table&&jQuery.nodeName(this[i],"table")?findOrAppend(this[i],"tbody"):this[i],i===iNoClone?fragment:jQuery.clone(fragment,true,true))}}fragment=first=null;if(scripts.length){jQuery.each(scripts,function(i,elem){if(elem.src){if(jQuery.ajax){jQuery.ajax({url:elem.src,type:"GET",dataType:"script",async:false,global:false,"throws":true})}else{jQuery.error("no ajax")}}else{jQuery.globalEval((elem.text||elem.textContent||elem.innerHTML||"").replace(rcleanScript,""))}if(elem.parentNode){elem.parentNode.removeChild(elem)}})}}return this}});function findOrAppend(elem,tag){return elem.getElementsByTagName(tag)[0]||elem.appendChild(elem.ownerDocument.createElement(tag))}function cloneCopyEvent(src,dest){if(dest.nodeType!==1||!jQuery.hasData(src)){return}var type,i,l,oldData=jQuery._data(src),curData=jQuery._data(dest,oldData),events=oldData.events;if(events){delete curData.handle;curData.events={};for(type in events){for(i=0,l=events[type].length;i<l;i++){jQuery.event.add(dest,type,events[type][i])}}}if(curData.data){curData.data=jQuery.extend({},curData.data)}}function cloneFixAttributes(src,dest){var nodeName;if(dest.nodeType!==1){return}if(dest.clearAttributes){dest.clearAttributes()}if(dest.mergeAttributes){dest.mergeAttributes(src)}nodeName=dest.nodeName.toLowerCase();if(nodeName==="object"){if(dest.parentNode){dest.outerHTML=src.outerHTML}if(jQuery.support.html5Clone&&src.innerHTML&&!jQuery.trim(dest.innerHTML)){dest.innerHTML=src.innerHTML}}else if(nodeName==="input"&&rcheckableType.test(src.type)){dest.defaultChecked=dest.checked=src.checked;if(dest.value!==src.value){dest.value=src.value}}else if(nodeName==="option"){dest.selected=src.defaultSelected}else if(nodeName==="input"||nodeName==="textarea"){dest.defaultValue=src.defaultValue}else if(nodeName==="script"&&dest.text!==src.text){dest.text=src.text}dest.removeAttribute(jQuery.expando)}jQuery.buildFragment=function(args,context,scripts){var fragment,cacheable,cachehit,first=args[0];context=context||document;context=!context.nodeType&&context[0]||context;context=context.ownerDocument||context;if(args.length===1&&typeof first==="string"&&first.length<512&&context===document&&first.charAt(0)==="<"&&!rnocache.test(first)&&(jQuery.support.checkClone||!rchecked.test(first))&&(jQuery.support.html5Clone||!rnoshimcache.test(first))){cacheable=true;fragment=jQuery.fragments[first];cachehit=fragment!==undefined}if(!fragment){fragment=context.createDocumentFragment();jQuery.clean(args,context,fragment,scripts);if(cacheable){jQuery.fragments[first]=cachehit&&fragment}}return{fragment:fragment,cacheable:cacheable}};jQuery.fragments={};jQuery.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(name,original){jQuery.fn[name]=function(selector){var elems,i=0,ret=[],insert=jQuery(selector),l=insert.length,parent=this.length===1&&this[0].parentNode;if((parent==null||parent&&parent.nodeType===11&&parent.childNodes.length===1)&&l===1){insert[original](this[0]);return this}else{for(;i<l;i++){elems=(i>0?this.clone(true):this).get();jQuery(insert[i])[original](elems);ret=ret.concat(elems)}return this.pushStack(ret,name,insert.selector)}}});function getAll(elem){if(typeof elem.getElementsByTagName!=="undefined"){return elem.getElementsByTagName("*")}else if(typeof elem.querySelectorAll!=="undefined"){return elem.querySelectorAll("*")}else{return[]}}function fixDefaultChecked(elem){if(rcheckableType.test(elem.type)){elem.defaultChecked=elem.checked}}jQuery.extend({clone:function(elem,dataAndEvents,deepDataAndEvents){var srcElements,destElements,i,clone;if(jQuery.support.html5Clone||jQuery.isXMLDoc(elem)||!rnoshimcache.test("<"+elem.nodeName+">")){clone=elem.cloneNode(true)}else{fragmentDiv.innerHTML=elem.outerHTML;fragmentDiv.removeChild(clone=fragmentDiv.firstChild)}if((!jQuery.support.noCloneEvent||!jQuery.support.noCloneChecked)&&(elem.nodeType===1||elem.nodeType===11)&&!jQuery.isXMLDoc(elem)){cloneFixAttributes(elem,clone);srcElements=getAll(elem);destElements=getAll(clone);for(i=0;srcElements[i];++i){if(destElements[i]){cloneFixAttributes(srcElements[i],destElements[i])}}}if(dataAndEvents){cloneCopyEvent(elem,clone);if(deepDataAndEvents){srcElements=getAll(elem);destElements=getAll(clone);for(i=0;srcElements[i];++i){cloneCopyEvent(srcElements[i],destElements[i])}}}srcElements=destElements=null;return clone},clean:function(elems,context,fragment,scripts){var i,j,elem,tag,wrap,depth,div,hasBody,tbody,len,handleScript,jsTags,safe=context===document&&safeFragment,ret=[];if(!context||typeof context.createDocumentFragment==="undefined"){context=document}for(i=0;(elem=elems[i])!=null;i++){if(typeof elem==="number"){elem+=""}if(!elem){continue}if(typeof elem==="string"){if(!rhtml.test(elem)){elem=context.createTextNode(elem)}else{safe=safe||createSafeFragment(context);div=context.createElement("div");safe.appendChild(div);elem=elem.replace(rxhtmlTag,"<$1></$2>");tag=(rtagName.exec(elem)||["",""])[1].toLowerCase();wrap=wrapMap[tag]||wrapMap._default;depth=wrap[0];div.innerHTML=wrap[1]+elem+wrap[2];while(depth--){div=div.lastChild}if(!jQuery.support.tbody){hasBody=rtbody.test(elem);tbody=tag==="table"&&!hasBody?div.firstChild&&div.firstChild.childNodes:wrap[1]==="<table>"&&!hasBody?div.childNodes:[];for(j=tbody.length-1;j>=0;--j){if(jQuery.nodeName(tbody[j],"tbody")&&!tbody[j].childNodes.length){tbody[j].parentNode.removeChild(tbody[j])}}}if(!jQuery.support.leadingWhitespace&&rleadingWhitespace.test(elem)){div.insertBefore(context.createTextNode(rleadingWhitespace.exec(elem)[0]),div.firstChild)}elem=div.childNodes;div.parentNode.removeChild(div)}}if(elem.nodeType){ret.push(elem)}else{jQuery.merge(ret,elem)}}if(div){elem=div=safe=null}if(!jQuery.support.appendChecked){for(i=0;(elem=ret[i])!=null;i++){if(jQuery.nodeName(elem,"input")){fixDefaultChecked(elem)}else if(typeof elem.getElementsByTagName!=="undefined"){jQuery.grep(elem.getElementsByTagName("input"),fixDefaultChecked)}}}if(fragment){handleScript=function(elem){if(!elem.type||rscriptType.test(elem.type)){return scripts?scripts.push(elem.parentNode?elem.parentNode.removeChild(elem):elem):fragment.appendChild(elem)}};for(i=0;(elem=ret[i])!=null;i++){if(!(jQuery.nodeName(elem,"script")&&handleScript(elem))){fragment.appendChild(elem);if(typeof elem.getElementsByTagName!=="undefined"){jsTags=jQuery.grep(jQuery.merge([],elem.getElementsByTagName("script")),handleScript);ret.splice.apply(ret,[i+1,0].concat(jsTags));
i+=jsTags.length}}}}return ret},cleanData:function(elems,acceptData){var data,id,elem,type,i=0,internalKey=jQuery.expando,cache=jQuery.cache,deleteExpando=jQuery.support.deleteExpando,special=jQuery.event.special;for(;(elem=elems[i])!=null;i++){if(acceptData||jQuery.acceptData(elem)){id=elem[internalKey];data=id&&cache[id];if(data){if(data.events){for(type in data.events){if(special[type]){jQuery.event.remove(elem,type)}else{jQuery.removeEvent(elem,type,data.handle)}}}if(cache[id]){delete cache[id];if(deleteExpando){delete elem[internalKey]}else if(elem.removeAttribute){elem.removeAttribute(internalKey)}else{elem[internalKey]=null}jQuery.deletedIds.push(id)}}}}}});!function(){var matched,browser;jQuery.uaMatch=function(ua){ua=ua.toLowerCase();var match=/(chrome)[ \/]([\w.]+)/.exec(ua)||/(webkit)[ \/]([\w.]+)/.exec(ua)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(ua)||/(msie) ([\w.]+)/.exec(ua)||ua.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(ua)||[];return{browser:match[1]||"",version:match[2]||"0"}};matched=jQuery.uaMatch(navigator.userAgent);browser={};if(matched.browser){browser[matched.browser]=true;browser.version=matched.version}if(browser.chrome){browser.webkit=true}else if(browser.webkit){browser.safari=true}jQuery.browser=browser;jQuery.sub=function(){function jQuerySub(selector,context){return new jQuerySub.fn.init(selector,context)}jQuery.extend(true,jQuerySub,this);jQuerySub.superclass=this;jQuerySub.fn=jQuerySub.prototype=this();jQuerySub.fn.constructor=jQuerySub;jQuerySub.sub=this.sub;jQuerySub.fn.init=function init(selector,context){if(context&&context instanceof jQuery&&!(context instanceof jQuerySub)){context=jQuerySub(context)}return jQuery.fn.init.call(this,selector,context,rootjQuerySub)};jQuerySub.fn.init.prototype=jQuerySub.fn;var rootjQuerySub=jQuerySub(document);return jQuerySub}}();var curCSS,iframe,iframeDoc,ralpha=/alpha\([^)]*\)/i,ropacity=/opacity=([^)]*)/,rposition=/^(top|right|bottom|left)$/,rdisplayswap=/^(none|table(?!-c[ea]).+)/,rmargin=/^margin/,rnumsplit=new RegExp("^("+core_pnum+")(.*)$","i"),rnumnonpx=new RegExp("^("+core_pnum+")(?!px)[a-z%]+$","i"),rrelNum=new RegExp("^([-+])=("+core_pnum+")","i"),elemdisplay={},cssShow={position:"absolute",visibility:"hidden",display:"block"},cssNormalTransform={letterSpacing:0,fontWeight:400},cssExpand=["Top","Right","Bottom","Left"],cssPrefixes=["Webkit","O","Moz","ms"],eventsToggle=jQuery.fn.toggle;function vendorPropName(style,name){if(name in style){return name}var capName=name.charAt(0).toUpperCase()+name.slice(1),origName=name,i=cssPrefixes.length;while(i--){name=cssPrefixes[i]+capName;if(name in style){return name}}return origName}function isHidden(elem,el){elem=el||elem;return jQuery.css(elem,"display")==="none"||!jQuery.contains(elem.ownerDocument,elem)}function showHide(elements,show){var elem,display,values=[],index=0,length=elements.length;for(;index<length;index++){elem=elements[index];if(!elem.style){continue}values[index]=jQuery._data(elem,"olddisplay");if(show){if(!values[index]&&elem.style.display==="none"){elem.style.display=""}if(elem.style.display===""&&isHidden(elem)){values[index]=jQuery._data(elem,"olddisplay",css_defaultDisplay(elem.nodeName))}}else{display=curCSS(elem,"display");if(!values[index]&&display!=="none"){jQuery._data(elem,"olddisplay",display)}}}for(index=0;index<length;index++){elem=elements[index];if(!elem.style){continue}if(!show||elem.style.display==="none"||elem.style.display===""){elem.style.display=show?values[index]||"":"none"}}return elements}jQuery.fn.extend({css:function(name,value){return jQuery.access(this,function(elem,name,value){return value!==undefined?jQuery.style(elem,name,value):jQuery.css(elem,name)},name,value,arguments.length>1)},show:function(){return showHide(this,true)},hide:function(){return showHide(this)},toggle:function(state,fn2){var bool=typeof state==="boolean";if(jQuery.isFunction(state)&&jQuery.isFunction(fn2)){return eventsToggle.apply(this,arguments)}return this.each(function(){if(bool?state:isHidden(this)){jQuery(this).show()}else{jQuery(this).hide()}})}});jQuery.extend({cssHooks:{opacity:{get:function(elem,computed){if(computed){var ret=curCSS(elem,"opacity");return ret===""?"1":ret}}}},cssNumber:{fillOpacity:true,fontWeight:true,lineHeight:true,opacity:true,orphans:true,widows:true,zIndex:true,zoom:true},cssProps:{"float":jQuery.support.cssFloat?"cssFloat":"styleFloat"},style:function(elem,name,value,extra){if(!elem||elem.nodeType===3||elem.nodeType===8||!elem.style){return}var ret,type,hooks,origName=jQuery.camelCase(name),style=elem.style;name=jQuery.cssProps[origName]||(jQuery.cssProps[origName]=vendorPropName(style,origName));hooks=jQuery.cssHooks[name]||jQuery.cssHooks[origName];if(value!==undefined){type=typeof value;if(type==="string"&&(ret=rrelNum.exec(value))){value=(ret[1]+1)*ret[2]+parseFloat(jQuery.css(elem,name));type="number"}if(value==null||type==="number"&&isNaN(value)){return}if(type==="number"&&!jQuery.cssNumber[origName]){value+="px"}if(!hooks||!("set"in hooks)||(value=hooks.set(elem,value,extra))!==undefined){try{style[name]=value}catch(e){}}}else{if(hooks&&"get"in hooks&&(ret=hooks.get(elem,false,extra))!==undefined){return ret}return style[name]}},css:function(elem,name,numeric,extra){var val,num,hooks,origName=jQuery.camelCase(name);name=jQuery.cssProps[origName]||(jQuery.cssProps[origName]=vendorPropName(elem.style,origName));hooks=jQuery.cssHooks[name]||jQuery.cssHooks[origName];if(hooks&&"get"in hooks){val=hooks.get(elem,true,extra)}if(val===undefined){val=curCSS(elem,name)}if(val==="normal"&&name in cssNormalTransform){val=cssNormalTransform[name]}if(numeric||extra!==undefined){num=parseFloat(val);return numeric||jQuery.isNumeric(num)?num||0:val}return val},swap:function(elem,options,callback){var ret,name,old={};for(name in options){old[name]=elem.style[name];elem.style[name]=options[name]}ret=callback.call(elem);for(name in options){elem.style[name]=old[name]}return ret}});if(window.getComputedStyle){curCSS=function(elem,name){var ret,width,minWidth,maxWidth,computed=window.getComputedStyle(elem,null),style=elem.style;if(computed){ret=computed[name];if(ret===""&&!jQuery.contains(elem.ownerDocument,elem)){ret=jQuery.style(elem,name)}if(rnumnonpx.test(ret)&&rmargin.test(name)){width=style.width;minWidth=style.minWidth;maxWidth=style.maxWidth;style.minWidth=style.maxWidth=style.width=ret;ret=computed.width;style.width=width;style.minWidth=minWidth;style.maxWidth=maxWidth}}return ret}}else if(document.documentElement.currentStyle){curCSS=function(elem,name){var left,rsLeft,ret=elem.currentStyle&&elem.currentStyle[name],style=elem.style;if(ret==null&&style&&style[name]){ret=style[name]}if(rnumnonpx.test(ret)&&!rposition.test(name)){left=style.left;rsLeft=elem.runtimeStyle&&elem.runtimeStyle.left;if(rsLeft){elem.runtimeStyle.left=elem.currentStyle.left}style.left=name==="fontSize"?"1em":ret;ret=style.pixelLeft+"px";style.left=left;if(rsLeft){elem.runtimeStyle.left=rsLeft}}return ret===""?"auto":ret}}function setPositiveNumber(elem,value,subtract){var matches=rnumsplit.exec(value);return matches?Math.max(0,matches[1]-(subtract||0))+(matches[2]||"px"):value}function augmentWidthOrHeight(elem,name,extra,isBorderBox){var i=extra===(isBorderBox?"border":"content")?4:name==="width"?1:0,val=0;for(;i<4;i+=2){if(extra==="margin"){val+=jQuery.css(elem,extra+cssExpand[i],true)}if(isBorderBox){if(extra==="content"){val-=parseFloat(curCSS(elem,"padding"+cssExpand[i]))||0}if(extra!=="margin"){val-=parseFloat(curCSS(elem,"border"+cssExpand[i]+"Width"))||0}}else{val+=parseFloat(curCSS(elem,"padding"+cssExpand[i]))||0;if(extra!=="padding"){val+=parseFloat(curCSS(elem,"border"+cssExpand[i]+"Width"))||0}}}return val}function getWidthOrHeight(elem,name,extra){var val=name==="width"?elem.offsetWidth:elem.offsetHeight,valueIsBorderBox=true,isBorderBox=jQuery.support.boxSizing&&jQuery.css(elem,"boxSizing")==="border-box";if(val<=0||val==null){val=curCSS(elem,name);if(val<0||val==null){val=elem.style[name]}if(rnumnonpx.test(val)){return val}valueIsBorderBox=isBorderBox&&(jQuery.support.boxSizingReliable||val===elem.style[name]);val=parseFloat(val)||0}return val+augmentWidthOrHeight(elem,name,extra||(isBorderBox?"border":"content"),valueIsBorderBox)+"px"}function css_defaultDisplay(nodeName){if(elemdisplay[nodeName]){return elemdisplay[nodeName]}var elem=jQuery("<"+nodeName+">").appendTo(document.body),display=elem.css("display");elem.remove();if(display==="none"||display===""){iframe=document.body.appendChild(iframe||jQuery.extend(document.createElement("iframe"),{frameBorder:0,width:0,height:0}));if(!iframeDoc||!iframe.createElement){iframeDoc=(iframe.contentWindow||iframe.contentDocument).document;iframeDoc.write("<!doctype html><html><body>");iframeDoc.close()}elem=iframeDoc.body.appendChild(iframeDoc.createElement(nodeName));display=curCSS(elem,"display");document.body.removeChild(iframe)}elemdisplay[nodeName]=display;return display}jQuery.each(["height","width"],function(i,name){jQuery.cssHooks[name]={get:function(elem,computed,extra){if(computed){if(elem.offsetWidth===0&&rdisplayswap.test(curCSS(elem,"display"))){return jQuery.swap(elem,cssShow,function(){return getWidthOrHeight(elem,name,extra)})}else{return getWidthOrHeight(elem,name,extra)}}},set:function(elem,value,extra){return setPositiveNumber(elem,value,extra?augmentWidthOrHeight(elem,name,extra,jQuery.support.boxSizing&&jQuery.css(elem,"boxSizing")==="border-box"):0)}}});if(!jQuery.support.opacity){jQuery.cssHooks.opacity={get:function(elem,computed){return ropacity.test((computed&&elem.currentStyle?elem.currentStyle.filter:elem.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":computed?"1":""},set:function(elem,value){var style=elem.style,currentStyle=elem.currentStyle,opacity=jQuery.isNumeric(value)?"alpha(opacity="+value*100+")":"",filter=currentStyle&&currentStyle.filter||style.filter||"";style.zoom=1;if(value>=1&&jQuery.trim(filter.replace(ralpha,""))===""&&style.removeAttribute){style.removeAttribute("filter");if(currentStyle&&!currentStyle.filter){return}}style.filter=ralpha.test(filter)?filter.replace(ralpha,opacity):filter+" "+opacity}}}jQuery(function(){if(!jQuery.support.reliableMarginRight){jQuery.cssHooks.marginRight={get:function(elem,computed){return jQuery.swap(elem,{display:"inline-block"},function(){if(computed){return curCSS(elem,"marginRight")}})}}}if(!jQuery.support.pixelPosition&&jQuery.fn.position){jQuery.each(["top","left"],function(i,prop){jQuery.cssHooks[prop]={get:function(elem,computed){if(computed){var ret=curCSS(elem,prop);return rnumnonpx.test(ret)?jQuery(elem).position()[prop]+"px":ret}}}})}});if(jQuery.expr&&jQuery.expr.filters){jQuery.expr.filters.hidden=function(elem){return elem.offsetWidth===0&&elem.offsetHeight===0||!jQuery.support.reliableHiddenOffsets&&(elem.style&&elem.style.display||curCSS(elem,"display"))==="none"};jQuery.expr.filters.visible=function(elem){return!jQuery.expr.filters.hidden(elem)}}jQuery.each({margin:"",padding:"",border:"Width"},function(prefix,suffix){jQuery.cssHooks[prefix+suffix]={expand:function(value){var i,parts=typeof value==="string"?value.split(" "):[value],expanded={};for(i=0;i<4;i++){expanded[prefix+cssExpand[i]+suffix]=parts[i]||parts[i-2]||parts[0]}return expanded}};if(!rmargin.test(prefix)){jQuery.cssHooks[prefix+suffix].set=setPositiveNumber}});var r20=/%20/g,rbracket=/\[\]$/,rCRLF=/\r?\n/g,rinput=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,rselectTextarea=/^(?:select|textarea)/i;jQuery.fn.extend({serialize:function(){return jQuery.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?jQuery.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||rselectTextarea.test(this.nodeName)||rinput.test(this.type))}).map(function(i,elem){var val=jQuery(this).val();return val==null?null:jQuery.isArray(val)?jQuery.map(val,function(val,i){return{name:elem.name,value:val.replace(rCRLF,"\r\n")}}):{name:elem.name,value:val.replace(rCRLF,"\r\n")}}).get()}});jQuery.param=function(a,traditional){var prefix,s=[],add=function(key,value){value=jQuery.isFunction(value)?value():value==null?"":value;s[s.length]=encodeURIComponent(key)+"="+encodeURIComponent(value)};if(traditional===undefined){traditional=jQuery.ajaxSettings&&jQuery.ajaxSettings.traditional}if(jQuery.isArray(a)||a.jquery&&!jQuery.isPlainObject(a)){jQuery.each(a,function(){add(this.name,this.value)})}else{for(prefix in a){buildParams(prefix,a[prefix],traditional,add)}}return s.join("&").replace(r20,"+")};function buildParams(prefix,obj,traditional,add){var name;if(jQuery.isArray(obj)){jQuery.each(obj,function(i,v){if(traditional||rbracket.test(prefix)){add(prefix,v)}else{buildParams(prefix+"["+(typeof v==="object"?i:"")+"]",v,traditional,add)}})}else if(!traditional&&jQuery.type(obj)==="object"){for(name in obj){buildParams(prefix+"["+name+"]",obj[name],traditional,add)}}else{add(prefix,obj)}}var ajaxLocation,ajaxLocParts,rhash=/#.*$/,rheaders=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,rlocalProtocol=/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,rnoContent=/^(?:GET|HEAD)$/,rprotocol=/^\/\//,rquery=/\?/,rscript=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,rts=/([?&])_=[^&]*/,rurl=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,_load=jQuery.fn.load,prefilters={},transports={},allTypes=["*/"]+["*"];try{ajaxLocation=location.href}catch(e){ajaxLocation=document.createElement("a");ajaxLocation.href="";ajaxLocation=ajaxLocation.href}ajaxLocParts=rurl.exec(ajaxLocation.toLowerCase())||[];function addToPrefiltersOrTransports(structure){return function(dataTypeExpression,func){if(typeof dataTypeExpression!=="string"){func=dataTypeExpression;dataTypeExpression="*"}var dataType,list,placeBefore,dataTypes=dataTypeExpression.toLowerCase().split(core_rspace),i=0,length=dataTypes.length;if(jQuery.isFunction(func)){for(;i<length;i++){dataType=dataTypes[i];placeBefore=/^\+/.test(dataType);if(placeBefore){dataType=dataType.substr(1)||"*"}list=structure[dataType]=structure[dataType]||[];list[placeBefore?"unshift":"push"](func)}}}}function inspectPrefiltersOrTransports(structure,options,originalOptions,jqXHR,dataType,inspected){dataType=dataType||options.dataTypes[0];inspected=inspected||{};inspected[dataType]=true;var selection,list=structure[dataType],i=0,length=list?list.length:0,executeOnly=structure===prefilters;for(;i<length&&(executeOnly||!selection);i++){selection=list[i](options,originalOptions,jqXHR);if(typeof selection==="string"){if(!executeOnly||inspected[selection]){selection=undefined}else{options.dataTypes.unshift(selection);selection=inspectPrefiltersOrTransports(structure,options,originalOptions,jqXHR,selection,inspected)}}}if((executeOnly||!selection)&&!inspected["*"]){selection=inspectPrefiltersOrTransports(structure,options,originalOptions,jqXHR,"*",inspected)}return selection}function ajaxExtend(target,src){var key,deep,flatOptions=jQuery.ajaxSettings.flatOptions||{};for(key in src){if(src[key]!==undefined){(flatOptions[key]?target:deep||(deep={}))[key]=src[key]}}if(deep){jQuery.extend(true,target,deep)}}jQuery.fn.load=function(url,params,callback){if(typeof url!=="string"&&_load){return _load.apply(this,arguments)}if(!this.length){return this}var selector,type,response,self=this,off=url.indexOf(" ");if(off>=0){selector=url.slice(off,url.length);url=url.slice(0,off)}if(jQuery.isFunction(params)){callback=params;params=undefined}else if(params&&typeof params==="object"){type="POST"}jQuery.ajax({url:url,type:type,dataType:"html",data:params,complete:function(jqXHR,status){if(callback){self.each(callback,response||[jqXHR.responseText,status,jqXHR])}}}).done(function(responseText){response=arguments;self.html(selector?jQuery("<div>").append(responseText.replace(rscript,"")).find(selector):responseText)});return this};jQuery.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(i,o){jQuery.fn[o]=function(f){return this.on(o,f)}});jQuery.each(["get","post"],function(i,method){jQuery[method]=function(url,data,callback,type){if(jQuery.isFunction(data)){type=type||callback;callback=data;data=undefined}return jQuery.ajax({type:method,url:url,data:data,success:callback,dataType:type})}});jQuery.extend({getScript:function(url,callback){return jQuery.get(url,undefined,callback,"script")},getJSON:function(url,data,callback){return jQuery.get(url,data,callback,"json")},ajaxSetup:function(target,settings){if(settings){ajaxExtend(target,jQuery.ajaxSettings)}else{settings=target;target=jQuery.ajaxSettings}ajaxExtend(target,settings);return target},ajaxSettings:{url:ajaxLocation,isLocal:rlocalProtocol.test(ajaxLocParts[1]),global:true,type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",processData:true,async:true,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":allTypes},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":window.String,"text html":true,"text json":jQuery.parseJSON,"text xml":jQuery.parseXML},flatOptions:{context:true,url:true}},ajaxPrefilter:addToPrefiltersOrTransports(prefilters),ajaxTransport:addToPrefiltersOrTransports(transports),ajax:function(url,options){if(typeof url==="object"){options=url;url=undefined}options=options||{};var ifModifiedKey,responseHeadersString,responseHeaders,transport,timeoutTimer,parts,fireGlobals,i,s=jQuery.ajaxSetup({},options),callbackContext=s.context||s,globalEventContext=callbackContext!==s&&(callbackContext.nodeType||callbackContext instanceof jQuery)?jQuery(callbackContext):jQuery.event,deferred=jQuery.Deferred(),completeDeferred=jQuery.Callbacks("once memory"),statusCode=s.statusCode||{},requestHeaders={},requestHeadersNames={},state=0,strAbort="canceled",jqXHR={readyState:0,setRequestHeader:function(name,value){if(!state){var lname=name.toLowerCase();name=requestHeadersNames[lname]=requestHeadersNames[lname]||name;requestHeaders[name]=value}return this},getAllResponseHeaders:function(){return state===2?responseHeadersString:null},getResponseHeader:function(key){var match;if(state===2){if(!responseHeaders){responseHeaders={};while(match=rheaders.exec(responseHeadersString)){responseHeaders[match[1].toLowerCase()]=match[2]}}match=responseHeaders[key.toLowerCase()]}return match===undefined?null:match},overrideMimeType:function(type){if(!state){s.mimeType=type}return this},abort:function(statusText){statusText=statusText||strAbort;if(transport){transport.abort(statusText)}done(0,statusText);return this}};function done(status,nativeStatusText,responses,headers){var isSuccess,success,error,response,modified,statusText=nativeStatusText;if(state===2){return}state=2;if(timeoutTimer){clearTimeout(timeoutTimer)}transport=undefined;responseHeadersString=headers||"";jqXHR.readyState=status>0?4:0;if(responses){response=ajaxHandleResponses(s,jqXHR,responses)}if(status>=200&&status<300||status===304){if(s.ifModified){modified=jqXHR.getResponseHeader("Last-Modified");if(modified){jQuery.lastModified[ifModifiedKey]=modified}modified=jqXHR.getResponseHeader("Etag");if(modified){jQuery.etag[ifModifiedKey]=modified}}if(status===304){statusText="notmodified";isSuccess=true}else{isSuccess=ajaxConvert(s,response);statusText=isSuccess.state;success=isSuccess.data;error=isSuccess.error;isSuccess=!error}}else{error=statusText;if(!statusText||status){statusText="error";if(status<0){status=0}}}jqXHR.status=status;jqXHR.statusText=""+(nativeStatusText||statusText);if(isSuccess){deferred.resolveWith(callbackContext,[success,statusText,jqXHR])}else{deferred.rejectWith(callbackContext,[jqXHR,statusText,error])}jqXHR.statusCode(statusCode);statusCode=undefined;if(fireGlobals){globalEventContext.trigger("ajax"+(isSuccess?"Success":"Error"),[jqXHR,s,isSuccess?success:error])}completeDeferred.fireWith(callbackContext,[jqXHR,statusText]);if(fireGlobals){globalEventContext.trigger("ajaxComplete",[jqXHR,s]);if(!--jQuery.active){jQuery.event.trigger("ajaxStop")}}}deferred.promise(jqXHR);jqXHR.success=jqXHR.done;jqXHR.error=jqXHR.fail;jqXHR.complete=completeDeferred.add;jqXHR.statusCode=function(map){if(map){var tmp;if(state<2){for(tmp in map){statusCode[tmp]=[statusCode[tmp],map[tmp]]}}else{tmp=map[jqXHR.status];jqXHR.always(tmp)}}return this};s.url=((url||s.url)+"").replace(rhash,"").replace(rprotocol,ajaxLocParts[1]+"//");s.dataTypes=jQuery.trim(s.dataType||"*").toLowerCase().split(core_rspace);if(s.crossDomain==null){parts=rurl.exec(s.url.toLowerCase());s.crossDomain=!!(parts&&(parts[1]!=ajaxLocParts[1]||parts[2]!=ajaxLocParts[2]||(parts[3]||(parts[1]==="http:"?80:443))!=(ajaxLocParts[3]||(ajaxLocParts[1]==="http:"?80:443))))}if(s.data&&s.processData&&typeof s.data!=="string"){s.data=jQuery.param(s.data,s.traditional)}inspectPrefiltersOrTransports(prefilters,s,options,jqXHR);if(state===2){return jqXHR}fireGlobals=s.global;s.type=s.type.toUpperCase();s.hasContent=!rnoContent.test(s.type);if(fireGlobals&&jQuery.active++===0){jQuery.event.trigger("ajaxStart")}if(!s.hasContent){if(s.data){s.url+=(rquery.test(s.url)?"&":"?")+s.data;delete s.data}ifModifiedKey=s.url;if(s.cache===false){var ts=jQuery.now(),ret=s.url.replace(rts,"$1_="+ts);s.url=ret+(ret===s.url?(rquery.test(s.url)?"&":"?")+"_="+ts:"")}}if(s.data&&s.hasContent&&s.contentType!==false||options.contentType){jqXHR.setRequestHeader("Content-Type",s.contentType)}if(s.ifModified){ifModifiedKey=ifModifiedKey||s.url;if(jQuery.lastModified[ifModifiedKey]){jqXHR.setRequestHeader("If-Modified-Since",jQuery.lastModified[ifModifiedKey])}if(jQuery.etag[ifModifiedKey]){jqXHR.setRequestHeader("If-None-Match",jQuery.etag[ifModifiedKey])}}jqXHR.setRequestHeader("Accept",s.dataTypes[0]&&s.accepts[s.dataTypes[0]]?s.accepts[s.dataTypes[0]]+(s.dataTypes[0]!=="*"?", "+allTypes+"; q=0.01":""):s.accepts["*"]);for(i in s.headers){jqXHR.setRequestHeader(i,s.headers[i])}if(s.beforeSend&&(s.beforeSend.call(callbackContext,jqXHR,s)===false||state===2)){return jqXHR.abort()}strAbort="abort";for(i in{success:1,error:1,complete:1}){jqXHR[i](s[i])}transport=inspectPrefiltersOrTransports(transports,s,options,jqXHR);if(!transport){done(-1,"No Transport")}else{jqXHR.readyState=1;if(fireGlobals){globalEventContext.trigger("ajaxSend",[jqXHR,s])}if(s.async&&s.timeout>0){timeoutTimer=setTimeout(function(){jqXHR.abort("timeout")},s.timeout)}try{state=1;transport.send(requestHeaders,done)}catch(e){if(state<2){done(-1,e)}else{throw e}}}return jqXHR},active:0,lastModified:{},etag:{}});function ajaxHandleResponses(s,jqXHR,responses){var ct,type,finalDataType,firstDataType,contents=s.contents,dataTypes=s.dataTypes,responseFields=s.responseFields;for(type in responseFields){if(type in responses){jqXHR[responseFields[type]]=responses[type]}}while(dataTypes[0]==="*"){dataTypes.shift();if(ct===undefined){ct=s.mimeType||jqXHR.getResponseHeader("content-type")}}if(ct){for(type in contents){if(contents[type]&&contents[type].test(ct)){dataTypes.unshift(type);break}}}if(dataTypes[0]in responses){finalDataType=dataTypes[0]}else{for(type in responses){if(!dataTypes[0]||s.converters[type+" "+dataTypes[0]]){finalDataType=type;break}if(!firstDataType){firstDataType=type}}finalDataType=finalDataType||firstDataType}if(finalDataType){if(finalDataType!==dataTypes[0]){dataTypes.unshift(finalDataType)}return responses[finalDataType]}}function ajaxConvert(s,response){var conv,conv2,current,tmp,dataTypes=s.dataTypes.slice(),prev=dataTypes[0],converters={},i=0;if(s.dataFilter){response=s.dataFilter(response,s.dataType)}if(dataTypes[1]){for(conv in s.converters){converters[conv.toLowerCase()]=s.converters[conv]}}for(;current=dataTypes[++i];){if(current!=="*"){if(prev!=="*"&&prev!==current){conv=converters[prev+" "+current]||converters["* "+current];if(!conv){for(conv2 in converters){tmp=conv2.split(" ");if(tmp[1]===current){conv=converters[prev+" "+tmp[0]]||converters["* "+tmp[0]];if(conv){if(conv===true){conv=converters[conv2]}else if(converters[conv2]!==true){current=tmp[0];dataTypes.splice(i--,0,current)}break}}}}if(conv!==true){if(conv&&s["throws"]){response=conv(response)}else{try{response=conv(response)}catch(e){return{state:"parsererror",error:conv?e:"No conversion from "+prev+" to "+current}}}}}prev=current}}return{state:"success",data:response}}var oldCallbacks=[],rquestion=/\?/,rjsonp=/(=)\?(?=&|$)|\?\?/,nonce=jQuery.now();jQuery.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var callback=oldCallbacks.pop()||jQuery.expando+"_"+nonce++;this[callback]=true;return callback}});jQuery.ajaxPrefilter("json jsonp",function(s,originalSettings,jqXHR){var callbackName,overwritten,responseContainer,data=s.data,url=s.url,hasCallback=s.jsonp!==false,replaceInUrl=hasCallback&&rjsonp.test(url),replaceInData=hasCallback&&!replaceInUrl&&typeof data==="string"&&!(s.contentType||"").indexOf("application/x-www-form-urlencoded")&&rjsonp.test(data);if(s.dataTypes[0]==="jsonp"||replaceInUrl||replaceInData){callbackName=s.jsonpCallback=jQuery.isFunction(s.jsonpCallback)?s.jsonpCallback():s.jsonpCallback;overwritten=window[callbackName];if(replaceInUrl){s.url=url.replace(rjsonp,"$1"+callbackName)}else if(replaceInData){s.data=data.replace(rjsonp,"$1"+callbackName)}else if(hasCallback){s.url+=(rquestion.test(url)?"&":"?")+s.jsonp+"="+callbackName}s.converters["script json"]=function(){if(!responseContainer){jQuery.error(callbackName+" was not called")}return responseContainer[0]};s.dataTypes[0]="json";window[callbackName]=function(){responseContainer=arguments};jqXHR.always(function(){window[callbackName]=overwritten;if(s[callbackName]){s.jsonpCallback=originalSettings.jsonpCallback;oldCallbacks.push(callbackName)}if(responseContainer&&jQuery.isFunction(overwritten)){overwritten(responseContainer[0])}responseContainer=overwritten=undefined});return"script"}});jQuery.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(text){jQuery.globalEval(text);return text}}});jQuery.ajaxPrefilter("script",function(s){if(s.cache===undefined){s.cache=false}if(s.crossDomain){s.type="GET";s.global=false}});jQuery.ajaxTransport("script",function(s){if(s.crossDomain){var script,head=document.head||document.getElementsByTagName("head")[0]||document.documentElement;return{send:function(_,callback){script=document.createElement("script");script.async="async";if(s.scriptCharset){script.charset=s.scriptCharset}script.src=s.url;script.onload=script.onreadystatechange=function(_,isAbort){if(isAbort||!script.readyState||/loaded|complete/.test(script.readyState)){script.onload=script.onreadystatechange=null;if(head&&script.parentNode){head.removeChild(script)}script=undefined;if(!isAbort){callback(200,"success")}}};head.insertBefore(script,head.firstChild)},abort:function(){if(script){script.onload(0,1)}}}}});var xhrCallbacks,xhrOnUnloadAbort=window.ActiveXObject?function(){for(var key in xhrCallbacks){xhrCallbacks[key](0,1)}}:false,xhrId=0;function createStandardXHR(){try{return new window.XMLHttpRequest}catch(e){}}function createActiveXHR(){try{return new window.ActiveXObject("Microsoft.XMLHTTP")}catch(e){}}jQuery.ajaxSettings.xhr=window.ActiveXObject?function(){return!this.isLocal&&createStandardXHR()||createActiveXHR()}:createStandardXHR;!function(xhr){jQuery.extend(jQuery.support,{ajax:!!xhr,cors:!!xhr&&"withCredentials"in xhr})}(jQuery.ajaxSettings.xhr());if(jQuery.support.ajax){jQuery.ajaxTransport(function(s){if(!s.crossDomain||jQuery.support.cors){var callback;return{send:function(headers,complete){var handle,i,xhr=s.xhr();if(s.username){xhr.open(s.type,s.url,s.async,s.username,s.password)}else{xhr.open(s.type,s.url,s.async)}if(s.xhrFields){for(i in s.xhrFields){xhr[i]=s.xhrFields[i]}}if(s.mimeType&&xhr.overrideMimeType){xhr.overrideMimeType(s.mimeType)}if(!s.crossDomain&&!headers["X-Requested-With"]){headers["X-Requested-With"]="XMLHttpRequest"}try{for(i in headers){xhr.setRequestHeader(i,headers[i])}}catch(_){}xhr.send(s.hasContent&&s.data||null);callback=function(_,isAbort){var status,statusText,responseHeaders,responses,xml;try{if(callback&&(isAbort||xhr.readyState===4)){callback=undefined;if(handle){xhr.onreadystatechange=jQuery.noop;if(xhrOnUnloadAbort){delete xhrCallbacks[handle]}}if(isAbort){if(xhr.readyState!==4){xhr.abort()}}else{status=xhr.status;responseHeaders=xhr.getAllResponseHeaders();responses={};xml=xhr.responseXML;if(xml&&xml.documentElement){responses.xml=xml}try{responses.text=xhr.responseText}catch(_){}try{statusText=xhr.statusText}catch(e){statusText=""}if(!status&&s.isLocal&&!s.crossDomain){status=responses.text?200:404}else if(status===1223){status=204}}}}catch(firefoxAccessException){if(!isAbort){complete(-1,firefoxAccessException)}}if(responses){complete(status,statusText,responses,responseHeaders)}};if(!s.async){callback()}else if(xhr.readyState===4){setTimeout(callback,0)}else{handle=++xhrId;if(xhrOnUnloadAbort){if(!xhrCallbacks){xhrCallbacks={};jQuery(window).unload(xhrOnUnloadAbort)}xhrCallbacks[handle]=callback}xhr.onreadystatechange=callback}},abort:function(){if(callback){callback(0,1)}}}}})}var fxNow,timerId,rfxtypes=/^(?:toggle|show|hide)$/,rfxnum=new RegExp("^(?:([-+])=|)("+core_pnum+")([a-z%]*)$","i"),rrun=/queueHooks$/,animationPrefilters=[defaultPrefilter],tweeners={"*":[function(prop,value){var end,unit,prevScale,tween=this.createTween(prop,value),parts=rfxnum.exec(value),target=tween.cur(),start=+target||0,scale=1;if(parts){end=+parts[2];unit=parts[3]||(jQuery.cssNumber[prop]?"":"px");if(unit!=="px"&&start){start=jQuery.css(tween.elem,prop,true)||end||1;do{prevScale=scale=scale||".5";start=start/scale;jQuery.style(tween.elem,prop,start+unit);scale=tween.cur()/target}while(scale!==1&&scale!==prevScale)}tween.unit=unit;tween.start=start;tween.end=parts[1]?start+(parts[1]+1)*end:end}return tween}]};function createFxNow(){setTimeout(function(){fxNow=undefined},0);return fxNow=jQuery.now()}function createTweens(animation,props){jQuery.each(props,function(prop,value){var collection=(tweeners[prop]||[]).concat(tweeners["*"]),index=0,length=collection.length;for(;index<length;index++){if(collection[index].call(animation,prop,value)){return}}})}function Animation(elem,properties,options){var result,index=0,tweenerIndex=0,length=animationPrefilters.length,deferred=jQuery.Deferred().always(function(){delete tick.elem}),tick=function(){var currentTime=fxNow||createFxNow(),remaining=Math.max(0,animation.startTime+animation.duration-currentTime),percent=1-(remaining/animation.duration||0),index=0,length=animation.tweens.length;for(;index<length;index++){animation.tweens[index].run(percent)}deferred.notifyWith(elem,[animation,percent,remaining]);if(percent<1&&length){return remaining}else{deferred.resolveWith(elem,[animation]);return false}},animation=deferred.promise({elem:elem,props:jQuery.extend({},properties),opts:jQuery.extend(true,{specialEasing:{}},options),originalProperties:properties,originalOptions:options,startTime:fxNow||createFxNow(),duration:options.duration,tweens:[],createTween:function(prop,end,easing){var tween=jQuery.Tween(elem,animation.opts,prop,end,animation.opts.specialEasing[prop]||animation.opts.easing);animation.tweens.push(tween);return tween},stop:function(gotoEnd){var index=0,length=gotoEnd?animation.tweens.length:0;for(;index<length;index++){animation.tweens[index].run(1)}if(gotoEnd){deferred.resolveWith(elem,[animation,gotoEnd])}else{deferred.rejectWith(elem,[animation,gotoEnd])}return this}}),props=animation.props;propFilter(props,animation.opts.specialEasing);for(;index<length;index++){result=animationPrefilters[index].call(animation,elem,props,animation.opts);if(result){return result}}createTweens(animation,props);if(jQuery.isFunction(animation.opts.start)){animation.opts.start.call(elem,animation)}jQuery.fx.timer(jQuery.extend(tick,{anim:animation,queue:animation.opts.queue,elem:elem}));
return animation.progress(animation.opts.progress).done(animation.opts.done,animation.opts.complete).fail(animation.opts.fail).always(animation.opts.always)}function propFilter(props,specialEasing){var index,name,easing,value,hooks;for(index in props){name=jQuery.camelCase(index);easing=specialEasing[name];value=props[index];if(jQuery.isArray(value)){easing=value[1];value=props[index]=value[0]}if(index!==name){props[name]=value;delete props[index]}hooks=jQuery.cssHooks[name];if(hooks&&"expand"in hooks){value=hooks.expand(value);delete props[name];for(index in value){if(!(index in props)){props[index]=value[index];specialEasing[index]=easing}}}else{specialEasing[name]=easing}}}jQuery.Animation=jQuery.extend(Animation,{tweener:function(props,callback){if(jQuery.isFunction(props)){callback=props;props=["*"]}else{props=props.split(" ")}var prop,index=0,length=props.length;for(;index<length;index++){prop=props[index];tweeners[prop]=tweeners[prop]||[];tweeners[prop].unshift(callback)}},prefilter:function(callback,prepend){if(prepend){animationPrefilters.unshift(callback)}else{animationPrefilters.push(callback)}}});function defaultPrefilter(elem,props,opts){var index,prop,value,length,dataShow,tween,hooks,oldfire,anim=this,style=elem.style,orig={},handled=[],hidden=elem.nodeType&&isHidden(elem);if(!opts.queue){hooks=jQuery._queueHooks(elem,"fx");if(hooks.unqueued==null){hooks.unqueued=0;oldfire=hooks.empty.fire;hooks.empty.fire=function(){if(!hooks.unqueued){oldfire()}}}hooks.unqueued++;anim.always(function(){anim.always(function(){hooks.unqueued--;if(!jQuery.queue(elem,"fx").length){hooks.empty.fire()}})})}if(elem.nodeType===1&&("height"in props||"width"in props)){opts.overflow=[style.overflow,style.overflowX,style.overflowY];if(jQuery.css(elem,"display")==="inline"&&jQuery.css(elem,"float")==="none"){if(!jQuery.support.inlineBlockNeedsLayout||css_defaultDisplay(elem.nodeName)==="inline"){style.display="inline-block"}else{style.zoom=1}}}if(opts.overflow){style.overflow="hidden";if(!jQuery.support.shrinkWrapBlocks){anim.done(function(){style.overflow=opts.overflow[0];style.overflowX=opts.overflow[1];style.overflowY=opts.overflow[2]})}}for(index in props){value=props[index];if(rfxtypes.exec(value)){delete props[index];if(value===(hidden?"hide":"show")){continue}handled.push(index)}}length=handled.length;if(length){dataShow=jQuery._data(elem,"fxshow")||jQuery._data(elem,"fxshow",{});if(hidden){jQuery(elem).show()}else{anim.done(function(){jQuery(elem).hide()})}anim.done(function(){var prop;jQuery.removeData(elem,"fxshow",true);for(prop in orig){jQuery.style(elem,prop,orig[prop])}});for(index=0;index<length;index++){prop=handled[index];tween=anim.createTween(prop,hidden?dataShow[prop]:0);orig[prop]=dataShow[prop]||jQuery.style(elem,prop);if(!(prop in dataShow)){dataShow[prop]=tween.start;if(hidden){tween.end=tween.start;tween.start=prop==="width"||prop==="height"?1:0}}}}}function Tween(elem,options,prop,end,easing){return new Tween.prototype.init(elem,options,prop,end,easing)}jQuery.Tween=Tween;Tween.prototype={constructor:Tween,init:function(elem,options,prop,end,easing,unit){this.elem=elem;this.prop=prop;this.easing=easing||"swing";this.options=options;this.start=this.now=this.cur();this.end=end;this.unit=unit||(jQuery.cssNumber[prop]?"":"px")},cur:function(){var hooks=Tween.propHooks[this.prop];return hooks&&hooks.get?hooks.get(this):Tween.propHooks._default.get(this)},run:function(percent){var eased,hooks=Tween.propHooks[this.prop];if(this.options.duration){this.pos=eased=jQuery.easing[this.easing](percent,this.options.duration*percent,0,1,this.options.duration)}else{this.pos=eased=percent}this.now=(this.end-this.start)*eased+this.start;if(this.options.step){this.options.step.call(this.elem,this.now,this)}if(hooks&&hooks.set){hooks.set(this)}else{Tween.propHooks._default.set(this)}return this}};Tween.prototype.init.prototype=Tween.prototype;Tween.propHooks={_default:{get:function(tween){var result;if(tween.elem[tween.prop]!=null&&(!tween.elem.style||tween.elem.style[tween.prop]==null)){return tween.elem[tween.prop]}result=jQuery.css(tween.elem,tween.prop,false,"");return!result||result==="auto"?0:result},set:function(tween){if(jQuery.fx.step[tween.prop]){jQuery.fx.step[tween.prop](tween)}else if(tween.elem.style&&(tween.elem.style[jQuery.cssProps[tween.prop]]!=null||jQuery.cssHooks[tween.prop])){jQuery.style(tween.elem,tween.prop,tween.now+tween.unit)}else{tween.elem[tween.prop]=tween.now}}}};Tween.propHooks.scrollTop=Tween.propHooks.scrollLeft={set:function(tween){if(tween.elem.nodeType&&tween.elem.parentNode){tween.elem[tween.prop]=tween.now}}};jQuery.each(["toggle","show","hide"],function(i,name){var cssFn=jQuery.fn[name];jQuery.fn[name]=function(speed,easing,callback){return speed==null||typeof speed==="boolean"||!i&&jQuery.isFunction(speed)&&jQuery.isFunction(easing)?cssFn.apply(this,arguments):this.animate(genFx(name,true),speed,easing,callback)}});jQuery.fn.extend({fadeTo:function(speed,to,easing,callback){return this.filter(isHidden).css("opacity",0).show().end().animate({opacity:to},speed,easing,callback)},animate:function(prop,speed,easing,callback){var empty=jQuery.isEmptyObject(prop),optall=jQuery.speed(speed,easing,callback),doAnimation=function(){var anim=Animation(this,jQuery.extend({},prop),optall);if(empty){anim.stop(true)}};return empty||optall.queue===false?this.each(doAnimation):this.queue(optall.queue,doAnimation)},stop:function(type,clearQueue,gotoEnd){var stopQueue=function(hooks){var stop=hooks.stop;delete hooks.stop;stop(gotoEnd)};if(typeof type!=="string"){gotoEnd=clearQueue;clearQueue=type;type=undefined}if(clearQueue&&type!==false){this.queue(type||"fx",[])}return this.each(function(){var dequeue=true,index=type!=null&&type+"queueHooks",timers=jQuery.timers,data=jQuery._data(this);if(index){if(data[index]&&data[index].stop){stopQueue(data[index])}}else{for(index in data){if(data[index]&&data[index].stop&&rrun.test(index)){stopQueue(data[index])}}}for(index=timers.length;index--;){if(timers[index].elem===this&&(type==null||timers[index].queue===type)){timers[index].anim.stop(gotoEnd);dequeue=false;timers.splice(index,1)}}if(dequeue||!gotoEnd){jQuery.dequeue(this,type)}})}});function genFx(type,includeWidth){var which,attrs={height:type},i=0;includeWidth=includeWidth?1:0;for(;i<4;i+=2-includeWidth){which=cssExpand[i];attrs["margin"+which]=attrs["padding"+which]=type}if(includeWidth){attrs.opacity=attrs.width=type}return attrs}jQuery.each({slideDown:genFx("show"),slideUp:genFx("hide"),slideToggle:genFx("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(name,props){jQuery.fn[name]=function(speed,easing,callback){return this.animate(props,speed,easing,callback)}});jQuery.speed=function(speed,easing,fn){var opt=speed&&typeof speed==="object"?jQuery.extend({},speed):{complete:fn||!fn&&easing||jQuery.isFunction(speed)&&speed,duration:speed,easing:fn&&easing||easing&&!jQuery.isFunction(easing)&&easing};opt.duration=jQuery.fx.off?0:typeof opt.duration==="number"?opt.duration:opt.duration in jQuery.fx.speeds?jQuery.fx.speeds[opt.duration]:jQuery.fx.speeds._default;if(opt.queue==null||opt.queue===true){opt.queue="fx"}opt.old=opt.complete;opt.complete=function(){if(jQuery.isFunction(opt.old)){opt.old.call(this)}if(opt.queue){jQuery.dequeue(this,opt.queue)}};return opt};jQuery.easing={linear:function(p){return p},swing:function(p){return.5-Math.cos(p*Math.PI)/2}};jQuery.timers=[];jQuery.fx=Tween.prototype.init;jQuery.fx.tick=function(){var timer,timers=jQuery.timers,i=0;for(;i<timers.length;i++){timer=timers[i];if(!timer()&&timers[i]===timer){timers.splice(i--,1)}}if(!timers.length){jQuery.fx.stop()}};jQuery.fx.timer=function(timer){if(timer()&&jQuery.timers.push(timer)&&!timerId){timerId=setInterval(jQuery.fx.tick,jQuery.fx.interval)}};jQuery.fx.interval=13;jQuery.fx.stop=function(){clearInterval(timerId);timerId=null};jQuery.fx.speeds={slow:600,fast:200,_default:400};jQuery.fx.step={};if(jQuery.expr&&jQuery.expr.filters){jQuery.expr.filters.animated=function(elem){return jQuery.grep(jQuery.timers,function(fn){return elem===fn.elem}).length}}var rroot=/^(?:body|html)$/i;jQuery.fn.offset=function(options){if(arguments.length){return options===undefined?this:this.each(function(i){jQuery.offset.setOffset(this,options,i)})}var box,docElem,body,win,clientTop,clientLeft,scrollTop,scrollLeft,top,left,elem=this[0],doc=elem&&elem.ownerDocument;if(!doc){return}if((body=doc.body)===elem){return jQuery.offset.bodyOffset(elem)}docElem=doc.documentElement;if(!jQuery.contains(docElem,elem)){return{top:0,left:0}}box=elem.getBoundingClientRect();win=getWindow(doc);clientTop=docElem.clientTop||body.clientTop||0;clientLeft=docElem.clientLeft||body.clientLeft||0;scrollTop=win.pageYOffset||docElem.scrollTop;scrollLeft=win.pageXOffset||docElem.scrollLeft;top=box.top+scrollTop-clientTop;left=box.left+scrollLeft-clientLeft;return{top:top,left:left}};jQuery.offset={bodyOffset:function(body){var top=body.offsetTop,left=body.offsetLeft;if(jQuery.support.doesNotIncludeMarginInBodyOffset){top+=parseFloat(jQuery.css(body,"marginTop"))||0;left+=parseFloat(jQuery.css(body,"marginLeft"))||0}return{top:top,left:left}},setOffset:function(elem,options,i){var position=jQuery.css(elem,"position");if(position==="static"){elem.style.position="relative"}var curElem=jQuery(elem),curOffset=curElem.offset(),curCSSTop=jQuery.css(elem,"top"),curCSSLeft=jQuery.css(elem,"left"),calculatePosition=(position==="absolute"||position==="fixed")&&jQuery.inArray("auto",[curCSSTop,curCSSLeft])>-1,props={},curPosition={},curTop,curLeft;if(calculatePosition){curPosition=curElem.position();curTop=curPosition.top;curLeft=curPosition.left}else{curTop=parseFloat(curCSSTop)||0;curLeft=parseFloat(curCSSLeft)||0}if(jQuery.isFunction(options)){options=options.call(elem,i,curOffset)}if(options.top!=null){props.top=options.top-curOffset.top+curTop}if(options.left!=null){props.left=options.left-curOffset.left+curLeft}if("using"in options){options.using.call(elem,props)}else{curElem.css(props)}}};jQuery.fn.extend({position:function(){if(!this[0]){return}var elem=this[0],offsetParent=this.offsetParent(),offset=this.offset(),parentOffset=rroot.test(offsetParent[0].nodeName)?{top:0,left:0}:offsetParent.offset();offset.top-=parseFloat(jQuery.css(elem,"marginTop"))||0;offset.left-=parseFloat(jQuery.css(elem,"marginLeft"))||0;parentOffset.top+=parseFloat(jQuery.css(offsetParent[0],"borderTopWidth"))||0;parentOffset.left+=parseFloat(jQuery.css(offsetParent[0],"borderLeftWidth"))||0;return{top:offset.top-parentOffset.top,left:offset.left-parentOffset.left}},offsetParent:function(){return this.map(function(){var offsetParent=this.offsetParent||document.body;while(offsetParent&&!rroot.test(offsetParent.nodeName)&&jQuery.css(offsetParent,"position")==="static"){offsetParent=offsetParent.offsetParent}return offsetParent||document.body})}});jQuery.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(method,prop){var top=/Y/.test(prop);jQuery.fn[method]=function(val){return jQuery.access(this,function(elem,method,val){var win=getWindow(elem);if(val===undefined){return win?prop in win?win[prop]:win.document.documentElement[method]:elem[method]}if(win){win.scrollTo(!top?val:jQuery(win).scrollLeft(),top?val:jQuery(win).scrollTop())}else{elem[method]=val}},method,val,arguments.length,null)}});function getWindow(elem){return jQuery.isWindow(elem)?elem:elem.nodeType===9?elem.defaultView||elem.parentWindow:false}jQuery.each({Height:"height",Width:"width"},function(name,type){jQuery.each({padding:"inner"+name,content:type,"":"outer"+name},function(defaultExtra,funcName){jQuery.fn[funcName]=function(margin,value){var chainable=arguments.length&&(defaultExtra||typeof margin!=="boolean"),extra=defaultExtra||(margin===true||value===true?"margin":"border");return jQuery.access(this,function(elem,type,value){var doc;if(jQuery.isWindow(elem)){return elem.document.documentElement["client"+name]}if(elem.nodeType===9){doc=elem.documentElement;return Math.max(elem.body["scroll"+name],doc["scroll"+name],elem.body["offset"+name],doc["offset"+name],doc["client"+name])}return value===undefined?jQuery.css(elem,type,value,extra):jQuery.style(elem,type,value,extra)},type,chainable?margin:undefined,chainable,null)}})});window.jQuery=window.$=jQuery;if(typeof define==="function"&&define.amd&&define.amd.jQuery){define("jquery",[],function(){return jQuery})}return jQuery}(window)})}()},{}],1:[function(require,module,exports){window.onload=function(){var App=require("./app");window.app=new App(document.getElementById("app"));window.app.start(window.bootstrap)}},{"./app":2}],3:[function(require,module,exports){var process=module.exports={};process.nextTick=function(){var canSetImmediate=typeof window!=="undefined"&&window.setImmediate;var canPost=typeof window!=="undefined"&&window.postMessage&&window.addEventListener;if(canSetImmediate){return function(f){return window.setImmediate(f)}}if(canPost){var queue=[];window.addEventListener("message",function(ev){if(ev.source===window&&ev.data==="process-tick"){ev.stopPropagation();if(queue.length>0){var fn=queue.shift();fn()}}},true);return function nextTick(fn){queue.push(fn);window.postMessage("process-tick","*")}}return function nextTick(fn){setTimeout(fn,0)}}();process.title="browser";process.browser=true;process.env={};process.argv=[];process.binding=function(name){throw new Error("process.binding is not supported")};process.cwd=function(){return"/"};process.chdir=function(dir){throw new Error("process.chdir is not supported")}},{}],4:[function(require,module,exports){!function(process){function filter(xs,fn){var res=[];for(var i=0;i<xs.length;i++){if(fn(xs[i],i,xs))res.push(xs[i])}return res}function normalizeArray(parts,allowAboveRoot){var up=0;for(var i=parts.length;i>=0;i--){var last=parts[i];if(last=="."){parts.splice(i,1)}else if(last===".."){parts.splice(i,1);up++}else if(up){parts.splice(i,1);up--}}if(allowAboveRoot){for(;up--;up){parts.unshift("..")}}return parts}var splitPathRe=/^(.+\/(?!$)|\/)?((?:.+?)?(\.[^.]*)?)$/;exports.resolve=function(){var resolvedPath="",resolvedAbsolute=false;for(var i=arguments.length;i>=-1&&!resolvedAbsolute;i--){var path=i>=0?arguments[i]:process.cwd();if(typeof path!=="string"||!path){continue}resolvedPath=path+"/"+resolvedPath;resolvedAbsolute=path.charAt(0)==="/"}resolvedPath=normalizeArray(filter(resolvedPath.split("/"),function(p){return!!p}),!resolvedAbsolute).join("/");return(resolvedAbsolute?"/":"")+resolvedPath||"."};exports.normalize=function(path){var isAbsolute=path.charAt(0)==="/",trailingSlash=path.slice(-1)==="/";path=normalizeArray(filter(path.split("/"),function(p){return!!p}),!isAbsolute).join("/");if(!path&&!isAbsolute){path="."}if(path&&trailingSlash){path+="/"}return(isAbsolute?"/":"")+path};exports.join=function(){var paths=Array.prototype.slice.call(arguments,0);return exports.normalize(filter(paths,function(p,index){return p&&typeof p==="string"}).join("/"))};exports.dirname=function(path){var dir=splitPathRe.exec(path)[1]||"";var isWindows=false;if(!dir){return"."}else if(dir.length===1||isWindows&&dir.length<=3&&dir.charAt(1)===":"){return dir}else{return dir.substring(0,dir.length-1)}};exports.basename=function(path,ext){var f=splitPathRe.exec(path)[2]||"";if(ext&&f.substr(-1*ext.length)===ext){f=f.substr(0,f.length-ext.length)}return f};exports.extname=function(path){return splitPathRe.exec(path)[3]||""};exports.relative=function(from,to){from=exports.resolve(from).substr(1);to=exports.resolve(to).substr(1);function trim(arr){var start=0;for(;start<arr.length;start++){if(arr[start]!=="")break}var end=arr.length-1;for(;end>=0;end--){if(arr[end]!=="")break}if(start>end)return[];return arr.slice(start,end-start+1)}var fromParts=trim(from.split("/"));var toParts=trim(to.split("/"));var length=Math.min(fromParts.length,toParts.length);var samePartsLength=length;for(var i=0;i<length;i++){if(fromParts[i]!==toParts[i]){samePartsLength=i;break}}var outputParts=[];for(var i=samePartsLength;i<fromParts.length;i++){outputParts.push("..")}outputParts=outputParts.concat(toParts.slice(samePartsLength));return outputParts.join("/")}}(require("__browserify_process"))},{__browserify_process:3}],5:[function(require,module,exports){!function(){function Messenger(targetFrame,targetDomain,prefix){this.init(targetFrame,targetDomain,prefix)}Messenger.prototype={init:function(targetFrame,targetDomain,prefix){this.targetFrame=targetFrame;this.targetDomain=targetDomain;this.prefix=prefix;this.replies={};this.nextTicket=0;this.ready=false;this.queue=[];var self=this;window.addEventListener("message",function(e){self.receive(e)},false)},send:function(functionName,args,replyFn){var ticket="ticket_"+this.prefix+"_"+this.nextTicket++;var text=JSON.stringify({"function":functionName,args:args,ticket:ticket});if(replyFn){this.replies[ticket]=replyFn}this.sendInternal(text)},receive:function(e){if(e.origin.replace(/https?:\/\//,"")!==this.targetDomain.replace(/\/$/,"").replace(/https?:\/\//,"")){return}var json;try{json=JSON.parse(e.data)}catch(except){alert("Syntax error in response from "+e.origin+": "+e.data);return}if(json["event"]==="ready"){this.ready=true;this.sendQueuedEvents();return}if(!(json["ticket"]in this.replies)){return}var replyFn=this.replies[json["ticket"]];delete this.replies[json["ticket"]];var args=[];if("args"in json){args=json["args"]}replyFn.apply(undefined,args)},sendInternal:function(text){if(this.ready){this.targetFrame.contentWindow.postMessage(text,this.targetDomain)}else{this.queue.push(text)}},sendQueuedEvents:function(){for(var i=0;i<this.queue.length;i++){this.targetFrame.contentWindow.postMessage(this.queue[i],this.targetDomain)}this.queue.length=0}};module.exports=Messenger}()},{}],6:[function(require,module,exports){!function(){var config={};if(undefined||undefined==="staging"){config.baseUrl="http://staging.toolkitt.com"}else if(undefined==="development"){config.baseUrl="http://localdev.toolkitt.com:4000"}else{config.baseUrl="http://www.toolkitt.com"}config.videoExts=[".mp4",".m4v",".f4v",".webm",".ogv",".flv",".mov"];config.imageExts=[".gif",".png",".jpeg",".jpg",".bmp"];config.thumbnailDims={width:340,height:192};config.flashMessage=null;config.s3prefix="https://toolkitt.s3.amazonaws.com/";config.thumberUrl="https://toolkitt.s3.amazonaws.com/thumber.html";config.videoPlayerId="media_video";config.imageViewerId="media_image";module.exports=config}()},{}],7:[function(require,module,exports){module.exports=function(config){var util={};util.placeholderThumbnail=function(halfSize){var w=config.thumbnailDims.width;var h=config.thumbnailDims.height;if(halfSize){w=Math.round(w/2);h=Math.round(h/2)}return"http://holder.js/"+w+"x"+h+"/text:No Thumbnail"};util.isVideo=function(filename){var ext="."+filename.split(".").pop().toLowerCase();return config.videoExts.indexOf(ext)>=0};util.isImage=function(filename){var ext="."+filename.split(".").pop().toLowerCase();return config.imageExts.indexOf(ext)>=0};util.ucfirst=function(str){var s=str.charAt(0).toUpperCase();return s+str.substr(1)};util.uuid=function(length){var possible="abcdefghijklmnopqrstuvwxyz",length=length||10,id,output=[];for(i=0;i<length;i++){output.push(possible.charAt(Math.floor(Math.random()*possible.length)))}return output.join("")};util.mime=function(mime){if(mime==="video/quicktime"){return"video/mp4"}return mime};return util}},{}],8:[function(require,module,exports){!function(){var Logout=function(){var self=this;self.getUser().save({id:"logout",token:null},{success:function(){self.navigate("login",{trigger:true})}})};module.exports=Logout}()},{}],9:[function(require,module,exports){!function(){var $=require("jquery-browserify");require("./lib/elastislide")($,window);require("./lib/switch")($,window);require("./lib/sortable")($,window);require("./lib/tags")($,window);module.exports=$}()},{"./lib/elastislide":10,"./lib/sortable":12,"./lib/switch":11,"./lib/tags":13,"jquery-browserify":"Gb3VIQ"}],14:[function(require,module,exports){!function(){var View=require("../views/routes/index"),Action=function(){var view=new View({app:this});this.show(view)};module.exports=Action}()},{"../views/routes/index":15}],16:[function(require,module,exports){!function(){var View=require("../views/routes/login"),Action=function(){var view=new View({app:this});this.show(view)};module.exports=Action}()},{"../views/routes/login":17}],18:[function(require,module,exports){!function(){var View=require("../views/routes/review"),Action=function(){var view=new View({app:this});this.show(view)};module.exports=Action}()},{"../views/routes/review":19}],20:[function(require,module,exports){!function(){var View=require("../../views/routes/pages/create"),Action=function(){var view=new View({app:this});this.show(view)};module.exports=Action}()},{"../../views/routes/pages/create":21}],22:[function(require,module,exports){!function(){var View=require("../../views/routes/pages/edit"),Action=function(pageName){var view=new View({app:this,pageName:pageName});this.show(view)};module.exports=Action}()},{"../../views/routes/pages/edit":23}],24:[function(require,module,exports){!function(){var View=require("../../views/routes/pages/show"),Action=function(pageName){var view=new View({app:this,pageName:pageName});this.show(view)};module.exports=Action}()},{"../../views/routes/pages/show":25}],26:[function(require,module,exports){!function(){var View=require("../../views/routes/media/add"),Action=function(pageName){var view=new View({app:this,pageName:pageName});this.show(view)};module.exports=Action}()},{"../../views/routes/media/add":27}],28:[function(require,module,exports){!function(){var View=require("../../views/routes/media/edit"),Action=function(mediaType,mediaId){var view=new View({app:this,mediaType:mediaType,mediaId:mediaId});this.show(view)};module.exports=Action}()},{"../../views/routes/media/edit":29}],30:[function(require,module,exports){!function(){var View=require("../../views/routes/media/show"),Action=function(pageName,mediaType,mediaId){var view=new View({app:this,mediaType:mediaType,mediaId:mediaId,pageName:pageName});this.show(view)};module.exports=Action}()},{"../../views/routes/media/show":31}],11:[function(require,module,exports){module.exports=function($){"use strict";$.fn["bootstrapSwitch"]=function(method){var methods={init:function(){return this.each(function(){var $element=$(this),$div,$switchLeft,$switchRight,$label,myClasses="",classes=$element.attr("class"),color,moving,onLabel="ON",offLabel="OFF",icon=false;$.each(["switch-mini","switch-small","switch-large"],function(i,el){if(classes.indexOf(el)>=0)myClasses=el});$element.addClass("has-switch");if($element.data("on")!==undefined)color="switch-"+$element.data("on");if($element.data("on-label")!==undefined)onLabel=$element.data("on-label");if($element.data("off-label")!==undefined)offLabel=$element.data("off-label");if($element.data("icon")!==undefined)icon=$element.data("icon");$switchLeft=$("<span>").addClass("switch-left").addClass(myClasses).addClass(color).html(onLabel);color="";if($element.data("off")!==undefined)color="switch-"+$element.data("off");$switchRight=$("<span>").addClass("switch-right").addClass(myClasses).addClass(color).html(offLabel);$label=$("<label>").html("&nbsp;").addClass(myClasses).attr("for",$element.find("input").attr("id"));if(icon){$label.html('<i class="'+icon+'"></i>')}$div=$element.find(":checkbox").wrap($("<div>")).parent().data("animated",false);if($element.data("animated")!==false)$div.addClass("switch-animate").data("animated",true);$div.append($switchLeft).append($label).append($switchRight);$element.find(">div").addClass($element.find("input").is(":checked")?"switch-on":"switch-off");if($element.find("input").is(":disabled"))$(this).addClass("deactivate");var changeStatus=function($this){$this.siblings("label").trigger("mousedown").trigger("mouseup").trigger("click")};$element.on("keydown",function(e){if(e.keyCode===32){e.stopImmediatePropagation();e.preventDefault();changeStatus($(e.target).find("span:first"))}});$switchLeft.on("click",function(e){changeStatus($(this))});$switchRight.on("click",function(e){changeStatus($(this))});$element.find("input").on("change",function(e){var $this=$(this),$element=$this.parent(),thisState=$this.is(":checked"),state=$element.is(".switch-off");e.preventDefault();$element.css("left","");if(state===thisState){if(thisState)$element.removeClass("switch-off").addClass("switch-on");else $element.removeClass("switch-on").addClass("switch-off");if($element.data("animated")!==false)$element.addClass("switch-animate");$element.parent().trigger("switch-change",{el:$this,value:thisState})}});$element.find("label").on("mousedown touchstart",function(e){var $this=$(this);moving=false;e.preventDefault();e.stopImmediatePropagation();$this.closest("div").removeClass("switch-animate");if($this.closest(".has-switch").is(".deactivate"))$this.unbind("click");else{$this.on("mousemove touchmove",function(e){var $element=$(this).closest(".switch"),relativeX=(e.pageX||e.originalEvent.targetTouches[0].pageX)-$element.offset().left,percent=relativeX/$element.width()*100,left=25,right=75;moving=true;if(percent<left)percent=left;else if(percent>right)percent=right;$element.find(">div").css("left",percent-right+"%")});$this.on("click touchend",function(e){var $this=$(this),$target=$(e.target),$myCheckBox=$target.siblings("input");e.stopImmediatePropagation();e.preventDefault();$this.unbind("mouseleave");if(moving)$myCheckBox.prop("checked",!(parseInt($this.parent().css("left"))<-25));else $myCheckBox.prop("checked",!$myCheckBox.is(":checked"));moving=false;$myCheckBox.trigger("change")});$this.on("mouseleave",function(e){var $this=$(this),$myCheckBox=$this.siblings("input");e.preventDefault();e.stopImmediatePropagation();$this.unbind("mouseleave");$this.trigger("mouseup");$myCheckBox.prop("checked",!(parseInt($this.parent().css("left"))<-25)).trigger("change")});$this.on("mouseup",function(e){e.stopImmediatePropagation();e.preventDefault();$(this).unbind("mousemove")})}})})},toggleActivation:function(){$(this).toggleClass("deactivate")},isActive:function(){return!$(this).hasClass("deactivate")},setActive:function(active){if(active)$(this).removeClass("deactivate");else $(this).addClass("deactivate")},toggleState:function(skipOnChange){var $input=$(this).find("input:checkbox");$input.prop("checked",!$input.is(":checked")).trigger("change",skipOnChange)},setState:function(value,skipOnChange){$(this).find("input:checkbox").prop("checked",value).trigger("change",skipOnChange)},status:function(){return $(this).find("input:checkbox").is(":checked")},destroy:function(){var $div=$(this).find("div"),$checkbox;$div.find(":not(input:checkbox)").remove();$checkbox=$div.children();$checkbox.unwrap().unwrap();$checkbox.unbind("change");return $checkbox}};if(methods[method])return methods[method].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof method==="object"||!method)return methods.init.apply(this,arguments);else $.error("Method "+method+" does not exist!")}}},{}],12:[function(require,module,exports){module.exports=function($){var dragging,placeholders=$();$.fn.sortable=function(options){var method=String(options);options=$.extend({connectWith:false},options);return this.each(function(){if(/^enable|disable|destroy$/.test(method)){var items=$(this).children($(this).data("items")).attr("draggable",method=="enable");if(method=="destroy"){items.add(this).removeData("connectWith items").off("dragstart.h5s dragend.h5s selectstart.h5s dragover.h5s dragenter.h5s drop.h5s")}return}var isHandle,index,items=$(this).children(options.items);var placeholder=$("<"+(/^ul|ol$/i.test(this.tagName)?"li":"div")+' class="sortable-placeholder">');items.find(options.handle).mousedown(function(){isHandle=true}).mouseup(function(){isHandle=false});$(this).data("items",options.items);placeholders=placeholders.add(placeholder);if(options.connectWith){$(options.connectWith).add(this).data("connectWith",options.connectWith)}items.attr("draggable","true").on("dragstart.h5s",function(e){if(options.handle&&!isHandle){return false}isHandle=false;var dt=e.originalEvent.dataTransfer;dt.effectAllowed="move";dt.setData("Text","dummy");index=(dragging=$(this)).addClass("sortable-dragging").index()}).on("dragend.h5s",function(){dragging.removeClass("sortable-dragging").show();placeholders.detach();if(index!=dragging.index()){items.parent().trigger("sortupdate",{item:dragging})}dragging=null}).not("a[href], img").on("selectstart.h5s",function(){this.dragDrop&&this.dragDrop();return false}).end().add([this,placeholder]).on("dragover.h5s dragenter.h5s drop.h5s",function(e){if(!items.is(dragging)&&options.connectWith!==$(dragging).parent().data("connectWith")){return true}if(e.type=="drop"){e.stopPropagation();placeholders.filter(":visible").after(dragging);return false}e.preventDefault();e.originalEvent.dataTransfer.dropEffect="move";if(items.is(this)){if(options.forcePlaceholderSize){placeholder.height(dragging.outerHeight())}dragging.hide();$(this)[placeholder.index()<$(this).index()?"after":"before"](placeholder);placeholders.not(placeholder).detach()}else if(!placeholders.is(this)&&!$(this).children(options.items).length){placeholders.detach();$(this).append(placeholder)}return false})})}}},{}],13:[function(require,module,exports){module.exports=function($){var delimiter=new Array;var tags_callbacks=new Array;$.fn.doAutosize=function(o){var minWidth=$(this).data("minwidth"),maxWidth=$(this).data("maxwidth"),val="",input=$(this),testSubject=$("#"+$(this).data("tester_id"));if(val===(val=input.val())){return}var escaped=val.replace(/&/g,"&amp;").replace(/\s/g," ").replace(/</g,"&lt;").replace(/>/g,"&gt;");testSubject.html(escaped);var testerWidth=testSubject.width(),newWidth=testerWidth+o.comfortZone>=minWidth?testerWidth+o.comfortZone:minWidth,currentWidth=input.width(),isValidWidthChange=newWidth<currentWidth&&newWidth>=minWidth||newWidth>minWidth&&newWidth<maxWidth;if(isValidWidthChange){input.width(newWidth)}};$.fn.resetAutosize=function(options){var minWidth=$(this).data("minwidth")||options.minInputWidth||$(this).width(),maxWidth=$(this).data("maxwidth")||options.maxInputWidth||$(this).closest(".tagsinput").width()-options.inputPadding,val="",input=$(this),testSubject=$("<tester/>").css({position:"absolute",top:-9999,left:-9999,width:"auto",fontSize:input.css("fontSize"),fontFamily:input.css("fontFamily"),fontWeight:input.css("fontWeight"),letterSpacing:input.css("letterSpacing"),whiteSpace:"nowrap"}),testerId=$(this).attr("id")+"_autosize_tester";if(!$("#"+testerId).length>0){testSubject.attr("id",testerId);testSubject.appendTo("body")}input.data("minwidth",minWidth);input.data("maxwidth",maxWidth);input.data("tester_id",testerId);input.css("width",minWidth)};$.fn.addTag=function(value,options){options=jQuery.extend({focus:false,callback:true},options);this.each(function(){var id=$(this).attr("id");var tagslist=$(this).val().split(delimiter[id]);if(tagslist[0]==""){tagslist=new Array}value=jQuery.trim(value);if(options.unique){var skipTag=$(this).tagExist(value);if(skipTag==true){$("#"+id+"_tag").addClass("not_valid")}}else{var skipTag=false}if(value!=""&&skipTag!=true){$("<span>").addClass("tag").append($("<span>").text(value).append("&nbsp;&nbsp;"),$('<a class="tagsinput-remove-link">',{href:"#",title:"Remove tag",text:""}).click(function(){return $("#"+id).removeTag(escape(value))})).insertBefore("#"+id+"_addTag");tagslist.push(value);$("#"+id+"_tag").val("");if(options.focus){$("#"+id+"_tag").focus()}else{$("#"+id+"_tag").blur()}$.fn.tagsInput.updateTagsField(this,tagslist);if(options.callback&&tags_callbacks[id]&&tags_callbacks[id]["onAddTag"]){var f=tags_callbacks[id]["onAddTag"];f.call(this,value)}if(tags_callbacks[id]&&tags_callbacks[id]["onChange"]){var i=tagslist.length;var f=tags_callbacks[id]["onChange"];f.call(this,$(this),tagslist[i-1])}}});return false};$.fn.removeTag=function(value){value=unescape(value);
this.each(function(){var id=$(this).attr("id");var old=$(this).val().split(delimiter[id]);$("#"+id+"_tagsinput .tag").remove();str="";for(i=0;i<old.length;i++){if(old[i]!=value){str=str+delimiter[id]+old[i]}}$.fn.tagsInput.importTags(this,str);if(tags_callbacks[id]&&tags_callbacks[id]["onRemoveTag"]){var f=tags_callbacks[id]["onRemoveTag"];f.call(this,value)}});return false};$.fn.tagExist=function(val){var id=$(this).attr("id");var tagslist=$(this).val().split(delimiter[id]);return jQuery.inArray(val,tagslist)>=0};$.fn.importTags=function(str){id=$(this).attr("id");$("#"+id+"_tagsinput .tag").remove();$.fn.tagsInput.importTags(this,str)};$.fn.tagsInput=function(options){var settings=jQuery.extend({interactive:true,defaultText:"",minChars:0,width:"",height:"",autocomplete:{selectFirst:false},hide:true,delimiter:",",unique:true,removeWithBackspace:true,placeholderColor:"#666666",autosize:true,comfortZone:20,inputPadding:6*2},options);this.each(function(){if(settings.hide){$(this).hide()}var id=$(this).attr("id");if(!id||delimiter[$(this).attr("id")]){id=$(this).attr("id","tags"+(new Date).getTime()).attr("id")}var data=jQuery.extend({pid:id,real_input:"#"+id,holder:"#"+id+"_tagsinput",input_wrapper:"#"+id+"_addTag",fake_input:"#"+id+"_tag"},settings);delimiter[id]=data.delimiter;if(settings.onAddTag||settings.onRemoveTag||settings.onChange){tags_callbacks[id]=new Array;tags_callbacks[id]["onAddTag"]=settings.onAddTag;tags_callbacks[id]["onRemoveTag"]=settings.onRemoveTag;tags_callbacks[id]["onChange"]=settings.onChange}var containerClass=$("#"+id).attr("class").replace("tagsinput","");var markup='<div id="'+id+'_tagsinput" class="tagsinput '+containerClass+'"><div class="tagsinput-add-container" id="'+id+'_addTag"><div class="tagsinput-add"></div>';if(settings.interactive){markup=markup+'<input id="'+id+'_tag" value="" data-default="'+settings.defaultText+'" />'}markup=markup+"</div></div>";$(markup).insertAfter(this);$(data.holder).css("width",settings.width);$(data.holder).css("min-height",settings.height);$(data.holder).css("height","100%");if($(data.real_input).val()!=""){$.fn.tagsInput.importTags($(data.real_input),$(data.real_input).val())}if(settings.interactive){$(data.fake_input).val($(data.fake_input).attr("data-default"));$(data.fake_input).css("color",settings.placeholderColor);$(data.fake_input).resetAutosize(settings);$(data.holder).bind("click",data,function(event){$(event.data.fake_input).focus()});$(data.fake_input).bind("focus",data,function(event){if($(event.data.fake_input).val()==$(event.data.fake_input).attr("data-default")){$(event.data.fake_input).val("")}$(event.data.fake_input).css("color","#000000")});if(settings.autocomplete_url!=undefined){autocomplete_options={source:settings.autocomplete_url};for(attrname in settings.autocomplete){autocomplete_options[attrname]=settings.autocomplete[attrname]}if(jQuery.Autocompleter!==undefined){$(data.fake_input).autocomplete(settings.autocomplete_url,settings.autocomplete);$(data.fake_input).bind("result",data,function(event,data,formatted){if(data){$("#"+id).addTag(data[0]+"",{focus:true,unique:settings.unique})}})}else if(jQuery.ui.autocomplete!==undefined){$(data.fake_input).autocomplete(autocomplete_options);$(data.fake_input).bind("autocompleteselect",data,function(event,ui){$(event.data.real_input).addTag(ui.item.value,{focus:true,unique:settings.unique});return false})}}else{$(data.fake_input).bind("blur",data,function(event){var d=$(this).attr("data-default");if($(event.data.fake_input).val()!=""&&$(event.data.fake_input).val()!=d){if(event.data.minChars<=$(event.data.fake_input).val().length&&(!event.data.maxChars||event.data.maxChars>=$(event.data.fake_input).val().length))$(event.data.real_input).addTag($(event.data.fake_input).val(),{focus:true,unique:settings.unique})}else{$(event.data.fake_input).val($(event.data.fake_input).attr("data-default"));$(event.data.fake_input).css("color",settings.placeholderColor)}return false})}$(data.fake_input).bind("keypress",data,function(event){if(event.which==event.data.delimiter.charCodeAt(0)||event.which==13){event.preventDefault();if(event.data.minChars<=$(event.data.fake_input).val().length&&(!event.data.maxChars||event.data.maxChars>=$(event.data.fake_input).val().length))$(event.data.real_input).addTag($(event.data.fake_input).val(),{focus:true,unique:settings.unique});$(event.data.fake_input).resetAutosize(settings);return false}else if(event.data.autosize){$(event.data.fake_input).doAutosize(settings)}});data.removeWithBackspace&&$(data.fake_input).bind("keydown",function(event){if(event.keyCode==8&&$(this).val()==""){event.preventDefault();var last_tag=$(this).closest(".tagsinput").find(".tag:last").text();var id=$(this).attr("id").replace(/_tag$/,"");last_tag=last_tag.replace(/[\s\u00a0]+x$/,"");$("#"+id).removeTag(escape(last_tag));$(this).trigger("focus")}});$(data.fake_input).blur();if(data.unique){$(data.fake_input).keydown(function(event){if(event.keyCode==8||String.fromCharCode(event.which).match(/\w+|[áéíóúÁÉÍÓÚñÑ,/]+/)){$(this).removeClass("not_valid")}})}}});return this};$.fn.tagsInput.updateTagsField=function(obj,tagslist){var id=$(obj).attr("id");$(obj).val(tagslist.join(delimiter[id]))};$.fn.tagsInput.importTags=function(obj,val){$(obj).val("");var id=$(obj).attr("id");var tags=val.split(delimiter[id]);for(i=0;i<tags.length;i++){$(obj).addTag(tags[i],{focus:false,callback:false})}if(tags_callbacks[id]&&tags_callbacks[id]["onChange"]){var f=tags_callbacks[id]["onChange"];f.call(obj,obj,tags[i])}}}},{}],2:[function(require,module,exports){!function(){var _=require("lodash"),$=require("./helpers/JqueryLoader"),path=require("path"),Backbone=require("./helpers/BackboneLoader.js"),Messenger=require("./helpers/lib/messenger.js"),db=require("./helpers/db"),Routes={"":require("./routes/index"),login:require("./routes/login"),logout:require("./routes/logout"),createPage:require("./routes/pages/create"),"page/:name":require("./routes/pages/show"),"page/:name/edit":require("./routes/pages/edit"),"page/:name/addMedia":require("./routes/media/add"),review:require("./routes/review"),"page/:name/:type/:id":require("./routes/media/show"),"media/:type/:id/edit":require("./routes/media/edit")},App=Backbone.Router.extend({initialize:function(el,config){_.each(Routes,function(func,route){this.route(route,_.bind(func,this))},this);el=el||document.body;this.el=el;this.$el=$(el);this.db=new db(this);this.config=_.clone(require("./config/config.js"));this.util=require("./helpers/util.js")(this.config);this.messenger=new Messenger(null,this.config.s3prefix,"thumbnailer");return this},start:function(bootstrap){this.bootstrap=bootstrap||{};Backbone.history.start();return this},handleAppLink:function(e){e.preventDefault();e.stopPropagation();var target=e.target;while(target.pathname==null){target=target.parentElement}this.navigate(target.pathname,{trigger:true});return this},isLoggedIn:function(){return this.getUser().attributes&&this.getUser().attributes.token},show:function(view){if(this.currentView){this.currentView.close();this.currentView=null}this.currentView=view;view.render();this.$el.append(view.$el);return this},flash:null,setFlash:function(type,message){if(!type){type="info"}this.flash={message:message,type:type};this.trigger("flash");this.listenToOnce(this,"route",function(route,router,params){this.clearFlash()});return this},clearFlash:function(){this.flash=null;this.trigger("flash");return this},error:function(model,err){if(!err){err=model}var self=this,errToShow=err,buff="";if(errToShow==null){errToShow="Unknown (Null) Error"}if(typeof errToShow==="object"){buff=[];if(errToShow instanceof Array){for(var i=0,ii=errToShow.length;i<ii;i++){buff.push(self.util.ucfirst(errToShow[i].attr)+": "+self.util.ucfirst(errToShow[i].message))}}else if(errToShow.toString){buff=[errToShow.toString()]}else{for(var key in errToShow){buff.push(self.util.ucfirst(key)+": "+self.util.ucfirst(errToShow[key]))}}buff=buff.join(",")}else{buff+=errToShow}this.setFlash("error",buff)},getUser:function(){return this.db.fetchModel("user")},getCustomization:function(){if(this.isLoggedIn()){return this.db.createModel("customization").set(this.getUser().attributes.customization)}else{return false}},getUserVars:function(){var customization=this.getCustomization();if(!customization){return this.bootstrap.userVars}else{return customization.attributes.config}}});module.exports=App}()},{"./config/config.js":6,"./helpers/BackboneLoader.js":32,"./helpers/JqueryLoader":9,"./helpers/db":33,"./helpers/lib/messenger.js":5,"./helpers/util.js":7,"./routes/index":14,"./routes/login":16,"./routes/logout":8,"./routes/media/add":26,"./routes/media/edit":28,"./routes/media/show":30,"./routes/pages/create":20,"./routes/pages/edit":22,"./routes/pages/show":24,"./routes/review":18,lodash:34,path:4}],34:[function(require,module,exports){!function(global){!function(window){var undefined;var arrayPool=[],objectPool=[];var idCounter=0;var indicatorObject={};var keyPrefix=+new Date+"";var largeArraySize=75;var maxPoolSize=40;var reEmptyStringLeading=/\b__p \+= '';/g,reEmptyStringMiddle=/\b(__p \+=) '' \+/g,reEmptyStringTrailing=/(__e\(.*?\)|\b__t\)) \+\n'';/g;var reEscapedHtml=/&(?:amp|lt|gt|quot|#39);/g;var reEsTemplate=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g;var reFlags=/\w*$/;var reInterpolate=/<%=([\s\S]+?)%>/g;var reThis=(reThis=/\bthis\b/)&&reThis.test(runInContext)&&reThis;var whitespace=" 	\f ﻿"+"\n\r\u2028\u2029"+" ᠎             　";var reLeadingSpacesAndZeros=RegExp("^["+whitespace+"]*0+(?=.$)");var reNoMatch=/($^)/;var reUnescapedHtml=/[&<>"']/g;var reUnescapedString=/['\n\r\t\u2028\u2029\\]/g;var contextProps=["Array","Boolean","Date","Function","Math","Number","Object","RegExp","String","_","attachEvent","clearTimeout","isFinite","isNaN","parseInt","setImmediate","setTimeout"];var templateCounter=0;var argsClass="[object Arguments]",arrayClass="[object Array]",boolClass="[object Boolean]",dateClass="[object Date]",errorClass="[object Error]",funcClass="[object Function]",numberClass="[object Number]",objectClass="[object Object]",regexpClass="[object RegExp]",stringClass="[object String]";var cloneableClasses={};cloneableClasses[funcClass]=false;cloneableClasses[argsClass]=cloneableClasses[arrayClass]=cloneableClasses[boolClass]=cloneableClasses[dateClass]=cloneableClasses[numberClass]=cloneableClasses[objectClass]=cloneableClasses[regexpClass]=cloneableClasses[stringClass]=true;var objectTypes={"boolean":false,"function":true,object:true,number:false,string:false,undefined:false};var stringEscapes={"\\":"\\","'":"'","\n":"n","\r":"r","	":"t","\u2028":"u2028","\u2029":"u2029"};var freeExports=objectTypes[typeof exports]&&exports;var freeModule=objectTypes[typeof module]&&module&&module.exports==freeExports&&module;var freeGlobal=objectTypes[typeof global]&&global;if(freeGlobal&&(freeGlobal.global===freeGlobal||freeGlobal.window===freeGlobal)){window=freeGlobal}function basicIndexOf(array,value,fromIndex){var index=(fromIndex||0)-1,length=array.length;while(++index<length){if(array[index]===value){return index}}return-1}function cacheIndexOf(cache,value){var type=typeof value;cache=cache.cache;if(type=="boolean"||value==null){return cache[value]}if(type!="number"&&type!="string"){type="object"}var key=type=="number"?value:keyPrefix+value;cache=cache[type]||(cache[type]={});return type=="object"?cache[key]&&basicIndexOf(cache[key],value)>-1?0:-1:cache[key]?0:-1}function cachePush(value){var cache=this.cache,type=typeof value;if(type=="boolean"||value==null){cache[value]=true}else{if(type!="number"&&type!="string"){type="object"}var key=type=="number"?value:keyPrefix+value,typeCache=cache[type]||(cache[type]={});if(type=="object"){if((typeCache[key]||(typeCache[key]=[])).push(value)==this.array.length){cache[type]=false}}else{typeCache[key]=true}}}function charAtCallback(value){return value.charCodeAt(0)}function compareAscending(a,b){var ai=a.index,bi=b.index;a=a.criteria;b=b.criteria;if(a!==b){if(a>b||typeof a=="undefined"){return 1}if(a<b||typeof b=="undefined"){return-1}}return ai<bi?-1:1}function createCache(array){var index=-1,length=array.length;var cache=getObject();cache["false"]=cache["null"]=cache["true"]=cache["undefined"]=false;var result=getObject();result.array=array;result.cache=cache;result.push=cachePush;while(++index<length){result.push(array[index])}return cache.object===false?(releaseObject(result),null):result}function escapeStringChar(match){return"\\"+stringEscapes[match]}function getArray(){return arrayPool.pop()||[]}function getObject(){return objectPool.pop()||{array:null,cache:null,criteria:null,"false":false,index:0,leading:false,maxWait:0,"null":false,number:null,object:null,push:null,string:null,trailing:false,"true":false,undefined:false,value:null}}function noop(){}function releaseArray(array){array.length=0;if(arrayPool.length<maxPoolSize){arrayPool.push(array)}}function releaseObject(object){var cache=object.cache;if(cache){releaseObject(cache)}object.array=object.cache=object.criteria=object.object=object.number=object.string=object.value=null;if(objectPool.length<maxPoolSize){objectPool.push(object)}}function slice(array,start,end){start||(start=0);if(typeof end=="undefined"){end=array?array.length:0}var index=-1,length=end-start||0,result=Array(length<0?0:length);while(++index<length){result[index]=array[start+index]}return result}function runInContext(context){context=context?_.defaults(window.Object(),context,_.pick(window,contextProps)):window;var Array=context.Array,Boolean=context.Boolean,Date=context.Date,Function=context.Function,Math=context.Math,Number=context.Number,Object=context.Object,RegExp=context.RegExp,String=context.String,TypeError=context.TypeError;var arrayRef=[];var objectProto=Object.prototype,stringProto=String.prototype;var oldDash=context._;var reNative=RegExp("^"+String(objectProto.valueOf).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/valueOf|for [^\]]+/g,".+?")+"$");var ceil=Math.ceil,clearTimeout=context.clearTimeout,concat=arrayRef.concat,floor=Math.floor,fnToString=Function.prototype.toString,getPrototypeOf=reNative.test(getPrototypeOf=Object.getPrototypeOf)&&getPrototypeOf,hasOwnProperty=objectProto.hasOwnProperty,push=arrayRef.push,propertyIsEnumerable=objectProto.propertyIsEnumerable,setImmediate=context.setImmediate,setTimeout=context.setTimeout,toString=objectProto.toString;var nativeBind=reNative.test(nativeBind=toString.bind)&&nativeBind,nativeCreate=reNative.test(nativeCreate=Object.create)&&nativeCreate,nativeIsArray=reNative.test(nativeIsArray=Array.isArray)&&nativeIsArray,nativeIsFinite=context.isFinite,nativeIsNaN=context.isNaN,nativeKeys=reNative.test(nativeKeys=Object.keys)&&nativeKeys,nativeMax=Math.max,nativeMin=Math.min,nativeParseInt=context.parseInt,nativeRandom=Math.random,nativeSlice=arrayRef.slice;var isIeOpera=reNative.test(context.attachEvent),isV8=nativeBind&&!/\n|true/.test(nativeBind+isIeOpera);var ctorByClass={};ctorByClass[arrayClass]=Array;ctorByClass[boolClass]=Boolean;ctorByClass[dateClass]=Date;ctorByClass[funcClass]=Function;ctorByClass[objectClass]=Object;ctorByClass[numberClass]=Number;ctorByClass[regexpClass]=RegExp;ctorByClass[stringClass]=String;function lodash(value){return value&&typeof value=="object"&&!isArray(value)&&hasOwnProperty.call(value,"__wrapped__")?value:new lodashWrapper(value)}function lodashWrapper(value){this.__wrapped__=value}lodashWrapper.prototype=lodash.prototype;var support=lodash.support={};support.fastBind=nativeBind&&!isV8;lodash.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:reInterpolate,variable:"",imports:{_:lodash}};function createBound(func,thisArg,partialArgs,indicator){var isFunc=isFunction(func),isPartial=!partialArgs,key=thisArg;if(isPartial){var rightIndicator=indicator;partialArgs=thisArg}else if(!isFunc){if(!indicator){throw new TypeError}thisArg=func}function bound(){var args=arguments,thisBinding=isPartial?this:thisArg;if(!isFunc){func=thisArg[key]}if(partialArgs.length){args=args.length?(args=nativeSlice.call(args),rightIndicator?args.concat(partialArgs):partialArgs.concat(args)):partialArgs}if(this instanceof bound){thisBinding=createObject(func.prototype);var result=func.apply(thisBinding,args);return isObject(result)?result:thisBinding}return func.apply(thisBinding,args)}return bound}function createObject(prototype){return isObject(prototype)?nativeCreate(prototype):{}}function escapeHtmlChar(match){return htmlEscapes[match]}function getIndexOf(array,value,fromIndex){var result=(result=lodash.indexOf)===indexOf?basicIndexOf:result;return result}function overloadWrapper(func){return function(array,flag,callback,thisArg){if(typeof flag!="boolean"&&flag!=null){thisArg=callback;callback=!(thisArg&&thisArg[flag]===array)?flag:undefined;flag=false}if(callback!=null){callback=lodash.createCallback(callback,thisArg)}return func(array,flag,callback,thisArg)}}function shimIsPlainObject(value){var ctor,result;if(!(value&&toString.call(value)==objectClass)||(ctor=value.constructor,isFunction(ctor)&&!(ctor instanceof ctor))){return false}forIn(value,function(value,key){result=key});return result===undefined||hasOwnProperty.call(value,result)}function unescapeHtmlChar(match){return htmlUnescapes[match]}function isArguments(value){return toString.call(value)==argsClass}var isArray=nativeIsArray;var shimKeys=function(object){var index,iterable=object,result=[];if(!iterable)return result;if(!objectTypes[typeof object])return result;for(index in iterable){if(hasOwnProperty.call(iterable,index)){result.push(index)}}return result};var keys=!nativeKeys?shimKeys:function(object){if(!isObject(object)){return[]}return nativeKeys(object)};var htmlEscapes={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};var htmlUnescapes=invert(htmlEscapes);var assign=function(object,source,guard){var index,iterable=object,result=iterable;if(!iterable)return result;var args=arguments,argsIndex=0,argsLength=typeof guard=="number"?2:args.length;if(argsLength>3&&typeof args[argsLength-2]=="function"){var callback=lodash.createCallback(args[--argsLength-1],args[argsLength--],2)}else if(argsLength>2&&typeof args[argsLength-1]=="function"){callback=args[--argsLength]}while(++argsIndex<argsLength){iterable=args[argsIndex];if(iterable&&objectTypes[typeof iterable]){var ownIndex=-1,ownProps=objectTypes[typeof iterable]&&keys(iterable),length=ownProps?ownProps.length:0;while(++ownIndex<length){index=ownProps[ownIndex];result[index]=callback?callback(result[index],iterable[index]):iterable[index]}}}return result};function clone(value,deep,callback,thisArg,stackA,stackB){var result=value;if(typeof deep!="boolean"&&deep!=null){thisArg=callback;callback=deep;deep=false}if(typeof callback=="function"){callback=typeof thisArg=="undefined"?callback:lodash.createCallback(callback,thisArg,1);result=callback(result);if(typeof result!="undefined"){return result}result=value}var isObj=isObject(result);if(isObj){var className=toString.call(result);if(!cloneableClasses[className]){return result}var isArr=isArray(result)}if(!isObj||!deep){return isObj?isArr?slice(result):assign({},result):result}var ctor=ctorByClass[className];switch(className){case boolClass:case dateClass:return new ctor(+result);case numberClass:case stringClass:return new ctor(result);case regexpClass:return ctor(result.source,reFlags.exec(result))}var initedStack=!stackA;stackA||(stackA=getArray());stackB||(stackB=getArray());var length=stackA.length;while(length--){if(stackA[length]==value){return stackB[length]}}result=isArr?ctor(result.length):{};if(isArr){if(hasOwnProperty.call(value,"index")){result.index=value.index}if(hasOwnProperty.call(value,"input")){result.input=value.input}}stackA.push(value);stackB.push(result);(isArr?forEach:forOwn)(value,function(objValue,key){result[key]=clone(objValue,deep,callback,undefined,stackA,stackB)});if(initedStack){releaseArray(stackA);releaseArray(stackB)}return result}function cloneDeep(value,callback,thisArg){return clone(value,true,callback,thisArg)}var defaults=function(object,source,guard){var index,iterable=object,result=iterable;if(!iterable)return result;var args=arguments,argsIndex=0,argsLength=typeof guard=="number"?2:args.length;while(++argsIndex<argsLength){iterable=args[argsIndex];if(iterable&&objectTypes[typeof iterable]){var ownIndex=-1,ownProps=objectTypes[typeof iterable]&&keys(iterable),length=ownProps?ownProps.length:0;while(++ownIndex<length){index=ownProps[ownIndex];if(typeof result[index]=="undefined")result[index]=iterable[index]}}}return result};function findKey(object,callback,thisArg){var result;callback=lodash.createCallback(callback,thisArg);forOwn(object,function(value,key,object){if(callback(value,key,object)){result=key;return false}});return result}var forIn=function(collection,callback,thisArg){var index,iterable=collection,result=iterable;if(!iterable)return result;if(!objectTypes[typeof iterable])return result;callback=callback&&typeof thisArg=="undefined"?callback:lodash.createCallback(callback,thisArg);for(index in iterable){if(callback(iterable[index],index,collection)===false)return result}return result};var forOwn=function(collection,callback,thisArg){var index,iterable=collection,result=iterable;if(!iterable)return result;if(!objectTypes[typeof iterable])return result;callback=callback&&typeof thisArg=="undefined"?callback:lodash.createCallback(callback,thisArg);var ownIndex=-1,ownProps=objectTypes[typeof iterable]&&keys(iterable),length=ownProps?ownProps.length:0;while(++ownIndex<length){index=ownProps[ownIndex];if(callback(iterable[index],index,collection)===false)return result}return result};function functions(object){var result=[];forIn(object,function(value,key){if(isFunction(value)){result.push(key)}});return result.sort()}function has(object,property){return object?hasOwnProperty.call(object,property):false}function invert(object){var index=-1,props=keys(object),length=props.length,result={};while(++index<length){var key=props[index];result[object[key]]=key}return result}function isBoolean(value){return value===true||value===false||toString.call(value)==boolClass}function isDate(value){return value?typeof value=="object"&&toString.call(value)==dateClass:false}function isElement(value){return value?value.nodeType===1:false}function isEmpty(value){var result=true;if(!value){return result}var className=toString.call(value),length=value.length;if(className==arrayClass||className==stringClass||className==argsClass||className==objectClass&&typeof length=="number"&&isFunction(value.splice)){return!length}forOwn(value,function(){return result=false});return result}function isEqual(a,b,callback,thisArg,stackA,stackB){var whereIndicator=callback===indicatorObject;if(typeof callback=="function"&&!whereIndicator){callback=lodash.createCallback(callback,thisArg,2);var result=callback(a,b);if(typeof result!="undefined"){return!!result}}if(a===b){return a!==0||1/a==1/b}var type=typeof a,otherType=typeof b;if(a===a&&(!a||type!="function"&&type!="object")&&(!b||otherType!="function"&&otherType!="object")){return false}if(a==null||b==null){return a===b}var className=toString.call(a),otherClass=toString.call(b);if(className==argsClass){className=objectClass}if(otherClass==argsClass){otherClass=objectClass}if(className!=otherClass){return false}switch(className){case boolClass:case dateClass:return+a==+b;case numberClass:return a!=+a?b!=+b:a==0?1/a==1/b:a==+b;case regexpClass:case stringClass:return a==String(b)}var isArr=className==arrayClass;if(!isArr){if(hasOwnProperty.call(a,"__wrapped__ ")||hasOwnProperty.call(b,"__wrapped__")){return isEqual(a.__wrapped__||a,b.__wrapped__||b,callback,thisArg,stackA,stackB)}if(className!=objectClass){return false}var ctorA=a.constructor,ctorB=b.constructor;if(ctorA!=ctorB&&!(isFunction(ctorA)&&ctorA instanceof ctorA&&isFunction(ctorB)&&ctorB instanceof ctorB)){return false}}var initedStack=!stackA;stackA||(stackA=getArray());stackB||(stackB=getArray());var length=stackA.length;while(length--){if(stackA[length]==a){return stackB[length]==b}}var size=0;result=true;stackA.push(a);stackB.push(b);if(isArr){length=a.length;size=b.length;result=size==a.length;if(!result&&!whereIndicator){return result}while(size--){var index=length,value=b[size];if(whereIndicator){while(index--){if(result=isEqual(a[index],value,callback,thisArg,stackA,stackB)){break}}}else if(!(result=isEqual(a[size],value,callback,thisArg,stackA,stackB))){break}}return result}forIn(b,function(value,key,b){if(hasOwnProperty.call(b,key)){size++;return result=hasOwnProperty.call(a,key)&&isEqual(a[key],value,callback,thisArg,stackA,stackB)}});if(result&&!whereIndicator){forIn(a,function(value,key,a){if(hasOwnProperty.call(a,key)){return result=--size>-1}})}if(initedStack){releaseArray(stackA);releaseArray(stackB)}return result}function isFinite(value){return nativeIsFinite(value)&&!nativeIsNaN(parseFloat(value))}function isFunction(value){return typeof value=="function"}function isObject(value){return!!(value&&objectTypes[typeof value])}function isNaN(value){return isNumber(value)&&value!=+value}function isNull(value){return value===null}function isNumber(value){return typeof value=="number"||toString.call(value)==numberClass}var isPlainObject=function(value){if(!(value&&toString.call(value)==objectClass)){return false}var valueOf=value.valueOf,objProto=typeof valueOf=="function"&&(objProto=getPrototypeOf(valueOf))&&getPrototypeOf(objProto);return objProto?value==objProto||getPrototypeOf(value)==objProto:shimIsPlainObject(value)};function isRegExp(value){return value?typeof value=="object"&&toString.call(value)==regexpClass:false}function isString(value){return typeof value=="string"||toString.call(value)==stringClass}function isUndefined(value){return typeof value=="undefined"}function merge(object,source,deepIndicator){var args=arguments,index=0,length=2;if(!isObject(object)){return object}if(deepIndicator===indicatorObject){var callback=args[3],stackA=args[4],stackB=args[5]}else{var initedStack=true;stackA=getArray();stackB=getArray();if(typeof deepIndicator!="number"){length=args.length}if(length>3&&typeof args[length-2]=="function"){callback=lodash.createCallback(args[--length-1],args[length--],2)}else if(length>2&&typeof args[length-1]=="function"){callback=args[--length]}}while(++index<length){(isArray(args[index])?forEach:forOwn)(args[index],function(source,key){var found,isArr,result=source,value=object[key];if(source&&((isArr=isArray(source))||isPlainObject(source))){var stackLength=stackA.length;while(stackLength--){if(found=stackA[stackLength]==source){value=stackB[stackLength];break}}if(!found){var isShallow;if(callback){result=callback(value,source);if(isShallow=typeof result!="undefined"){value=result}}if(!isShallow){value=isArr?isArray(value)?value:[]:isPlainObject(value)?value:{}}stackA.push(source);stackB.push(value);if(!isShallow){value=merge(value,source,indicatorObject,callback,stackA,stackB)}}}else{if(callback){result=callback(value,source);if(typeof result=="undefined"){result=source}}if(typeof result!="undefined"){value=result}}object[key]=value})}if(initedStack){releaseArray(stackA);releaseArray(stackB)}return object}function omit(object,callback,thisArg){var indexOf=getIndexOf(),isFunc=typeof callback=="function",result={};if(isFunc){callback=lodash.createCallback(callback,thisArg)}else{var props=concat.apply(arrayRef,nativeSlice.call(arguments,1))}forIn(object,function(value,key,object){if(isFunc?!callback(value,key,object):indexOf(props,key)<0){result[key]=value}});return result}function pairs(object){var index=-1,props=keys(object),length=props.length,result=Array(length);while(++index<length){var key=props[index];result[index]=[key,object[key]]}return result}function pick(object,callback,thisArg){var result={};if(typeof callback!="function"){var index=-1,props=concat.apply(arrayRef,nativeSlice.call(arguments,1)),length=isObject(object)?props.length:0;while(++index<length){var key=props[index];if(key in object){result[key]=object[key]}}}else{callback=lodash.createCallback(callback,thisArg);forIn(object,function(value,key,object){if(callback(value,key,object)){result[key]=value}})}return result}function transform(object,callback,accumulator,thisArg){var isArr=isArray(object);callback=lodash.createCallback(callback,thisArg,4);if(accumulator==null){if(isArr){accumulator=[]}else{var ctor=object&&object.constructor,proto=ctor&&ctor.prototype;accumulator=createObject(proto)}}(isArr?forEach:forOwn)(object,function(value,index,object){return callback(accumulator,value,index,object)});return accumulator}function values(object){var index=-1,props=keys(object),length=props.length,result=Array(length);while(++index<length){result[index]=object[props[index]]}return result}function at(collection){var index=-1,props=concat.apply(arrayRef,nativeSlice.call(arguments,1)),length=props.length,result=Array(length);while(++index<length){result[index]=collection[props[index]]}return result}function contains(collection,target,fromIndex){var index=-1,indexOf=getIndexOf(),length=collection?collection.length:0,result=false;fromIndex=(fromIndex<0?nativeMax(0,length+fromIndex):fromIndex)||0;if(length&&typeof length=="number"){result=(isString(collection)?collection.indexOf(target,fromIndex):indexOf(collection,target,fromIndex))>-1}else{forOwn(collection,function(value){if(++index>=fromIndex){return!(result=value===target)}})}return result}function countBy(collection,callback,thisArg){var result={};callback=lodash.createCallback(callback,thisArg);forEach(collection,function(value,key,collection){key=String(callback(value,key,collection));hasOwnProperty.call(result,key)?result[key]++:result[key]=1});return result}function every(collection,callback,thisArg){var result=true;callback=lodash.createCallback(callback,thisArg);var index=-1,length=collection?collection.length:0;if(typeof length=="number"){while(++index<length){if(!(result=!!callback(collection[index],index,collection))){break}}}else{forOwn(collection,function(value,index,collection){return result=!!callback(value,index,collection)})}return result}function filter(collection,callback,thisArg){var result=[];callback=lodash.createCallback(callback,thisArg);var index=-1,length=collection?collection.length:0;if(typeof length=="number"){while(++index<length){var value=collection[index];if(callback(value,index,collection)){result.push(value)}}}else{forOwn(collection,function(value,index,collection){if(callback(value,index,collection)){result.push(value)}})}return result}function find(collection,callback,thisArg){callback=lodash.createCallback(callback,thisArg);var index=-1,length=collection?collection.length:0;if(typeof length=="number"){while(++index<length){var value=collection[index];if(callback(value,index,collection)){return value}}}else{var result;forOwn(collection,function(value,index,collection){if(callback(value,index,collection)){result=value;return false}});return result}}function forEach(collection,callback,thisArg){var index=-1,length=collection?collection.length:0;callback=callback&&typeof thisArg=="undefined"?callback:lodash.createCallback(callback,thisArg);if(typeof length=="number"){while(++index<length){if(callback(collection[index],index,collection)===false){break}}}else{forOwn(collection,callback)}return collection}function groupBy(collection,callback,thisArg){var result={};callback=lodash.createCallback(callback,thisArg);forEach(collection,function(value,key,collection){key=String(callback(value,key,collection));(hasOwnProperty.call(result,key)?result[key]:result[key]=[]).push(value)});return result}function invoke(collection,methodName){var args=nativeSlice.call(arguments,2),index=-1,isFunc=typeof methodName=="function",length=collection?collection.length:0,result=Array(typeof length=="number"?length:0);forEach(collection,function(value){result[++index]=(isFunc?methodName:value[methodName]).apply(value,args)});return result}function map(collection,callback,thisArg){var index=-1,length=collection?collection.length:0;
callback=lodash.createCallback(callback,thisArg);if(typeof length=="number"){var result=Array(length);while(++index<length){result[index]=callback(collection[index],index,collection)}}else{result=[];forOwn(collection,function(value,key,collection){result[++index]=callback(value,key,collection)})}return result}function max(collection,callback,thisArg){var computed=-Infinity,result=computed;if(!callback&&isArray(collection)){var index=-1,length=collection.length;while(++index<length){var value=collection[index];if(value>result){result=value}}}else{callback=!callback&&isString(collection)?charAtCallback:lodash.createCallback(callback,thisArg);forEach(collection,function(value,index,collection){var current=callback(value,index,collection);if(current>computed){computed=current;result=value}})}return result}function min(collection,callback,thisArg){var computed=Infinity,result=computed;if(!callback&&isArray(collection)){var index=-1,length=collection.length;while(++index<length){var value=collection[index];if(value<result){result=value}}}else{callback=!callback&&isString(collection)?charAtCallback:lodash.createCallback(callback,thisArg);forEach(collection,function(value,index,collection){var current=callback(value,index,collection);if(current<computed){computed=current;result=value}})}return result}function pluck(collection,property){var index=-1,length=collection?collection.length:0;if(typeof length=="number"){var result=Array(length);while(++index<length){result[index]=collection[index][property]}}return result||map(collection,property)}function reduce(collection,callback,accumulator,thisArg){if(!collection)return accumulator;var noaccum=arguments.length<3;callback=lodash.createCallback(callback,thisArg,4);var index=-1,length=collection.length;if(typeof length=="number"){if(noaccum){accumulator=collection[++index]}while(++index<length){accumulator=callback(accumulator,collection[index],index,collection)}}else{forOwn(collection,function(value,index,collection){accumulator=noaccum?(noaccum=false,value):callback(accumulator,value,index,collection)})}return accumulator}function reduceRight(collection,callback,accumulator,thisArg){var iterable=collection,length=collection?collection.length:0,noaccum=arguments.length<3;if(typeof length!="number"){var props=keys(collection);length=props.length}callback=lodash.createCallback(callback,thisArg,4);forEach(collection,function(value,index,collection){index=props?props[--length]:--length;accumulator=noaccum?(noaccum=false,iterable[index]):callback(accumulator,iterable[index],index,collection)});return accumulator}function reject(collection,callback,thisArg){callback=lodash.createCallback(callback,thisArg);return filter(collection,function(value,index,collection){return!callback(value,index,collection)})}function shuffle(collection){var index=-1,length=collection?collection.length:0,result=Array(typeof length=="number"?length:0);forEach(collection,function(value){var rand=floor(nativeRandom()*(++index+1));result[index]=result[rand];result[rand]=value});return result}function size(collection){var length=collection?collection.length:0;return typeof length=="number"?length:keys(collection).length}function some(collection,callback,thisArg){var result;callback=lodash.createCallback(callback,thisArg);var index=-1,length=collection?collection.length:0;if(typeof length=="number"){while(++index<length){if(result=callback(collection[index],index,collection)){break}}}else{forOwn(collection,function(value,index,collection){return!(result=callback(value,index,collection))})}return!!result}function sortBy(collection,callback,thisArg){var index=-1,length=collection?collection.length:0,result=Array(typeof length=="number"?length:0);callback=lodash.createCallback(callback,thisArg);forEach(collection,function(value,key,collection){var object=result[++index]=getObject();object.criteria=callback(value,key,collection);object.index=index;object.value=value});length=result.length;result.sort(compareAscending);while(length--){var object=result[length];result[length]=object.value;releaseObject(object)}return result}function toArray(collection){if(collection&&typeof collection.length=="number"){return slice(collection)}return values(collection)}var where=filter;function compact(array){var index=-1,length=array?array.length:0,result=[];while(++index<length){var value=array[index];if(value){result.push(value)}}return result}function difference(array){var index=-1,indexOf=getIndexOf(),length=array?array.length:0,seen=concat.apply(arrayRef,nativeSlice.call(arguments,1)),result=[];var isLarge=length>=largeArraySize&&indexOf===basicIndexOf;if(isLarge){var cache=createCache(seen);if(cache){indexOf=cacheIndexOf;seen=cache}else{isLarge=false}}while(++index<length){var value=array[index];if(indexOf(seen,value)<0){result.push(value)}}if(isLarge){releaseObject(seen)}return result}function findIndex(array,callback,thisArg){var index=-1,length=array?array.length:0;callback=lodash.createCallback(callback,thisArg);while(++index<length){if(callback(array[index],index,array)){return index}}return-1}function first(array,callback,thisArg){if(array){var n=0,length=array.length;if(typeof callback!="number"&&callback!=null){var index=-1;callback=lodash.createCallback(callback,thisArg);while(++index<length&&callback(array[index],index,array)){n++}}else{n=callback;if(n==null||thisArg){return array[0]}}return slice(array,0,nativeMin(nativeMax(0,n),length))}}var flatten=overloadWrapper(function flatten(array,isShallow,callback){var index=-1,length=array?array.length:0,result=[];while(++index<length){var value=array[index];if(callback){value=callback(value,index,array)}if(isArray(value)){push.apply(result,isShallow?value:flatten(value))}else{result.push(value)}}return result});function indexOf(array,value,fromIndex){if(typeof fromIndex=="number"){var length=array?array.length:0;fromIndex=fromIndex<0?nativeMax(0,length+fromIndex):fromIndex||0}else if(fromIndex){var index=sortedIndex(array,value);return array[index]===value?index:-1}return array?basicIndexOf(array,value,fromIndex):-1}function initial(array,callback,thisArg){if(!array){return[]}var n=0,length=array.length;if(typeof callback!="number"&&callback!=null){var index=length;callback=lodash.createCallback(callback,thisArg);while(index--&&callback(array[index],index,array)){n++}}else{n=callback==null||thisArg?1:callback||n}return slice(array,0,nativeMin(nativeMax(0,length-n),length))}function intersection(array){var args=arguments,argsLength=args.length,argsIndex=-1,caches=getArray(),index=-1,indexOf=getIndexOf(),length=array?array.length:0,result=[],seen=getArray();while(++argsIndex<argsLength){var value=args[argsIndex];caches[argsIndex]=indexOf===basicIndexOf&&(value?value.length:0)>=largeArraySize&&createCache(argsIndex?args[argsIndex]:seen)}outer:while(++index<length){var cache=caches[0];value=array[index];if((cache?cacheIndexOf(cache,value):indexOf(seen,value))<0){argsIndex=argsLength;(cache||seen).push(value);while(--argsIndex){cache=caches[argsIndex];if((cache?cacheIndexOf(cache,value):indexOf(args[argsIndex],value))<0){continue outer}}result.push(value)}}while(argsLength--){cache=caches[argsLength];if(cache){releaseObject(cache)}}releaseArray(caches);releaseArray(seen);return result}function last(array,callback,thisArg){if(array){var n=0,length=array.length;if(typeof callback!="number"&&callback!=null){var index=length;callback=lodash.createCallback(callback,thisArg);while(index--&&callback(array[index],index,array)){n++}}else{n=callback;if(n==null||thisArg){return array[length-1]}}return slice(array,nativeMax(0,length-n))}}function lastIndexOf(array,value,fromIndex){var index=array?array.length:0;if(typeof fromIndex=="number"){index=(fromIndex<0?nativeMax(0,index+fromIndex):nativeMin(fromIndex,index-1))+1}while(index--){if(array[index]===value){return index}}return-1}function range(start,end,step){start=+start||0;step=+step||1;if(end==null){end=start;start=0}var index=-1,length=nativeMax(0,ceil((end-start)/step)),result=Array(length);while(++index<length){result[index]=start;start+=step}return result}function rest(array,callback,thisArg){if(typeof callback!="number"&&callback!=null){var n=0,index=-1,length=array?array.length:0;callback=lodash.createCallback(callback,thisArg);while(++index<length&&callback(array[index],index,array)){n++}}else{n=callback==null||thisArg?1:nativeMax(0,callback)}return slice(array,n)}function sortedIndex(array,value,callback,thisArg){var low=0,high=array?array.length:low;callback=callback?lodash.createCallback(callback,thisArg,1):identity;value=callback(value);while(low<high){var mid=low+high>>>1;callback(array[mid])<value?low=mid+1:high=mid}return low}function union(array){if(!isArray(array)){arguments[0]=array?nativeSlice.call(array):arrayRef}return uniq(concat.apply(arrayRef,arguments))}var uniq=overloadWrapper(function(array,isSorted,callback){var index=-1,indexOf=getIndexOf(),length=array?array.length:0,result=[];var isLarge=!isSorted&&length>=largeArraySize&&indexOf===basicIndexOf,seen=callback||isLarge?getArray():result;if(isLarge){var cache=createCache(seen);if(cache){indexOf=cacheIndexOf;seen=cache}else{isLarge=false;seen=callback?seen:(releaseArray(seen),result)}}while(++index<length){var value=array[index],computed=callback?callback(value,index,array):value;if(isSorted?!index||seen[seen.length-1]!==computed:indexOf(seen,computed)<0){if(callback||isLarge){seen.push(computed)}result.push(value)}}if(isLarge){releaseArray(seen.array);releaseObject(seen)}else if(callback){releaseArray(seen)}return result});function unzip(array){var index=-1,length=array?max(pluck(array,"length")):0,result=Array(length<0?0:length);while(++index<length){result[index]=pluck(array,index)}return result}function without(array){return difference(array,nativeSlice.call(arguments,1))}function zip(array){return array?unzip(arguments):[]}function zipObject(keys,values){var index=-1,length=keys?keys.length:0,result={};while(++index<length){var key=keys[index];if(values){result[key]=values[index]}else{result[key[0]]=key[1]}}return result}function after(n,func){if(n<1){return func()}return function(){if(--n<1){return func.apply(this,arguments)}}}function bind(func,thisArg){return support.fastBind||nativeBind&&arguments.length>2?nativeBind.call.apply(nativeBind,arguments):createBound(func,thisArg,nativeSlice.call(arguments,2))}function bindAll(object){var funcs=arguments.length>1?concat.apply(arrayRef,nativeSlice.call(arguments,1)):functions(object),index=-1,length=funcs.length;while(++index<length){var key=funcs[index];object[key]=bind(object[key],object)}return object}function bindKey(object,key){return createBound(object,key,nativeSlice.call(arguments,2),indicatorObject)}function compose(){var funcs=arguments;return function(){var args=arguments,length=funcs.length;while(length--){args=[funcs[length].apply(this,args)]}return args[0]}}function createCallback(func,thisArg,argCount){if(func==null){return identity}var type=typeof func;if(type!="function"){if(type!="object"){return function(object){return object[func]}}var props=keys(func);return function(object){var length=props.length,result=false;while(length--){if(!(result=isEqual(object[props[length]],func[props[length]],indicatorObject))){break}}return result}}if(typeof thisArg=="undefined"||reThis&&!reThis.test(fnToString.call(func))){return func}if(argCount===1){return function(value){return func.call(thisArg,value)}}if(argCount===2){return function(a,b){return func.call(thisArg,a,b)}}if(argCount===4){return function(accumulator,value,index,collection){return func.call(thisArg,accumulator,value,index,collection)}}return function(value,index,collection){return func.call(thisArg,value,index,collection)}}function debounce(func,wait,options){var args,result,thisArg,callCount=0,lastCalled=0,maxWait=false,maxTimeoutId=null,timeoutId=null,trailing=true;function clear(){clearTimeout(maxTimeoutId);clearTimeout(timeoutId);callCount=0;maxTimeoutId=timeoutId=null}function delayed(){var isCalled=trailing&&(!leading||callCount>1);clear();if(isCalled){if(maxWait!==false){lastCalled=new Date}result=func.apply(thisArg,args)}}function maxDelayed(){clear();if(trailing||maxWait!==wait){lastCalled=new Date;result=func.apply(thisArg,args)}}wait=nativeMax(0,wait||0);if(options===true){var leading=true;trailing=false}else if(isObject(options)){leading=options.leading;maxWait="maxWait"in options&&nativeMax(wait,options.maxWait||0);trailing="trailing"in options?options.trailing:trailing}return function(){args=arguments;thisArg=this;callCount++;clearTimeout(timeoutId);if(maxWait===false){if(leading&&callCount<2){result=func.apply(thisArg,args)}}else{var now=new Date;if(!maxTimeoutId&&!leading){lastCalled=now}var remaining=maxWait-(now-lastCalled);if(remaining<=0){clearTimeout(maxTimeoutId);maxTimeoutId=null;lastCalled=now;result=func.apply(thisArg,args)}else if(!maxTimeoutId){maxTimeoutId=setTimeout(maxDelayed,remaining)}}if(wait!==maxWait){timeoutId=setTimeout(delayed,wait)}return result}}function defer(func){var args=nativeSlice.call(arguments,1);return setTimeout(function(){func.apply(undefined,args)},1)}if(isV8&&freeModule&&typeof setImmediate=="function"){defer=bind(setImmediate,context)}function delay(func,wait){var args=nativeSlice.call(arguments,2);return setTimeout(function(){func.apply(undefined,args)},wait)}function memoize(func,resolver){function memoized(){var cache=memoized.cache,key=keyPrefix+(resolver?resolver.apply(this,arguments):arguments[0]);return hasOwnProperty.call(cache,key)?cache[key]:cache[key]=func.apply(this,arguments)}memoized.cache={};return memoized}function once(func){var ran,result;return function(){if(ran){return result}ran=true;result=func.apply(this,arguments);func=null;return result}}function partial(func){return createBound(func,nativeSlice.call(arguments,1))}function partialRight(func){return createBound(func,nativeSlice.call(arguments,1),null,indicatorObject)}function throttle(func,wait,options){var leading=true,trailing=true;if(options===false){leading=false}else if(isObject(options)){leading="leading"in options?options.leading:leading;trailing="trailing"in options?options.trailing:trailing}options=getObject();options.leading=leading;options.maxWait=wait;options.trailing=trailing;var result=debounce(func,wait,options);releaseObject(options);return result}function wrap(value,wrapper){return function(){var args=[value];push.apply(args,arguments);return wrapper.apply(this,args)}}function escape(string){return string==null?"":String(string).replace(reUnescapedHtml,escapeHtmlChar)}function identity(value){return value}function mixin(object){forEach(functions(object),function(methodName){var func=lodash[methodName]=object[methodName];lodash.prototype[methodName]=function(){var value=this.__wrapped__,args=[value];push.apply(args,arguments);var result=func.apply(lodash,args);return value&&typeof value=="object"&&value===result?this:new lodashWrapper(result)}})}function noConflict(){context._=oldDash;return this}var parseInt=nativeParseInt(whitespace+"08")==8?nativeParseInt:function(value,radix){return nativeParseInt(isString(value)?value.replace(reLeadingSpacesAndZeros,""):value,radix||0)};function random(min,max){if(min==null&&max==null){max=1}min=+min||0;if(max==null){max=min;min=0}else{max=+max||0}var rand=nativeRandom();return min%1||max%1?min+nativeMin(rand*(max-min+parseFloat("1e-"+((rand+"").length-1))),max):min+floor(rand*(max-min+1))}function result(object,property){var value=object?object[property]:undefined;return isFunction(value)?object[property]():value}function template(text,data,options){var settings=lodash.templateSettings;text||(text="");options=defaults({},options,settings);var imports=defaults({},options.imports,settings.imports),importsKeys=keys(imports),importsValues=values(imports);var isEvaluating,index=0,interpolate=options.interpolate||reNoMatch,source="__p += '";var reDelimiters=RegExp((options.escape||reNoMatch).source+"|"+interpolate.source+"|"+(interpolate===reInterpolate?reEsTemplate:reNoMatch).source+"|"+(options.evaluate||reNoMatch).source+"|$","g");text.replace(reDelimiters,function(match,escapeValue,interpolateValue,esTemplateValue,evaluateValue,offset){interpolateValue||(interpolateValue=esTemplateValue);source+=text.slice(index,offset).replace(reUnescapedString,escapeStringChar);if(escapeValue){source+="' +\n__e("+escapeValue+") +\n'"}if(evaluateValue){isEvaluating=true;source+="';\n"+evaluateValue+";\n__p += '"}if(interpolateValue){source+="' +\n((__t = ("+interpolateValue+")) == null ? '' : __t) +\n'"}index=offset+match.length;return match});source+="';\n";var variable=options.variable,hasVariable=variable;if(!hasVariable){variable="obj";source="with ("+variable+") {\n"+source+"\n}\n"}source=(isEvaluating?source.replace(reEmptyStringLeading,""):source).replace(reEmptyStringMiddle,"$1").replace(reEmptyStringTrailing,"$1;");source="function("+variable+") {\n"+(hasVariable?"":variable+" || ("+variable+" = {});\n")+"var __t, __p = '', __e = _.escape"+(isEvaluating?", __j = Array.prototype.join;\n"+"function print() { __p += __j.call(arguments, '') }\n":";\n")+source+"return __p\n}";var sourceURL="\n/*\n//@ sourceURL="+(options.sourceURL||"/lodash/template/source["+templateCounter++ +"]")+"\n*/";try{var result=Function(importsKeys,"return "+source+sourceURL).apply(undefined,importsValues)}catch(e){e.source=source;throw e}if(data){return result(data)}result.source=source;return result}function times(n,callback,thisArg){n=(n=+n)>-1?n:0;var index=-1,result=Array(n);callback=lodash.createCallback(callback,thisArg,1);while(++index<n){result[index]=callback(index)}return result}function unescape(string){return string==null?"":String(string).replace(reEscapedHtml,unescapeHtmlChar)}function uniqueId(prefix){var id=++idCounter;return String(prefix==null?"":prefix)+id}function tap(value,interceptor){interceptor(value);return value}function wrapperToString(){return String(this.__wrapped__)}function wrapperValueOf(){return this.__wrapped__}lodash.after=after;lodash.assign=assign;lodash.at=at;lodash.bind=bind;lodash.bindAll=bindAll;lodash.bindKey=bindKey;lodash.compact=compact;lodash.compose=compose;lodash.countBy=countBy;lodash.createCallback=createCallback;lodash.debounce=debounce;lodash.defaults=defaults;lodash.defer=defer;lodash.delay=delay;lodash.difference=difference;lodash.filter=filter;lodash.flatten=flatten;lodash.forEach=forEach;lodash.forIn=forIn;lodash.forOwn=forOwn;lodash.functions=functions;lodash.groupBy=groupBy;lodash.initial=initial;lodash.intersection=intersection;lodash.invert=invert;lodash.invoke=invoke;lodash.keys=keys;lodash.map=map;lodash.max=max;lodash.memoize=memoize;lodash.merge=merge;lodash.min=min;lodash.omit=omit;lodash.once=once;lodash.pairs=pairs;lodash.partial=partial;lodash.partialRight=partialRight;lodash.pick=pick;lodash.pluck=pluck;lodash.range=range;lodash.reject=reject;lodash.rest=rest;lodash.shuffle=shuffle;lodash.sortBy=sortBy;lodash.tap=tap;lodash.throttle=throttle;lodash.times=times;lodash.toArray=toArray;lodash.transform=transform;lodash.union=union;lodash.uniq=uniq;lodash.unzip=unzip;lodash.values=values;lodash.where=where;lodash.without=without;lodash.wrap=wrap;lodash.zip=zip;lodash.zipObject=zipObject;lodash.collect=map;lodash.drop=rest;lodash.each=forEach;lodash.extend=assign;lodash.methods=functions;lodash.object=zipObject;lodash.select=filter;lodash.tail=rest;lodash.unique=uniq;mixin(lodash);lodash.chain=lodash;lodash.prototype.chain=function(){return this};lodash.clone=clone;lodash.cloneDeep=cloneDeep;lodash.contains=contains;lodash.escape=escape;lodash.every=every;lodash.find=find;lodash.findIndex=findIndex;lodash.findKey=findKey;lodash.has=has;lodash.identity=identity;lodash.indexOf=indexOf;lodash.isArguments=isArguments;lodash.isArray=isArray;lodash.isBoolean=isBoolean;lodash.isDate=isDate;lodash.isElement=isElement;lodash.isEmpty=isEmpty;lodash.isEqual=isEqual;lodash.isFinite=isFinite;lodash.isFunction=isFunction;lodash.isNaN=isNaN;lodash.isNull=isNull;lodash.isNumber=isNumber;lodash.isObject=isObject;lodash.isPlainObject=isPlainObject;lodash.isRegExp=isRegExp;lodash.isString=isString;lodash.isUndefined=isUndefined;lodash.lastIndexOf=lastIndexOf;lodash.mixin=mixin;lodash.noConflict=noConflict;lodash.parseInt=parseInt;lodash.random=random;lodash.reduce=reduce;lodash.reduceRight=reduceRight;lodash.result=result;lodash.runInContext=runInContext;lodash.size=size;lodash.some=some;lodash.sortedIndex=sortedIndex;lodash.template=template;lodash.unescape=unescape;lodash.uniqueId=uniqueId;lodash.all=every;lodash.any=some;lodash.detect=find;lodash.findWhere=find;lodash.foldl=reduce;lodash.foldr=reduceRight;lodash.include=contains;lodash.inject=reduce;forOwn(lodash,function(func,methodName){if(!lodash.prototype[methodName]){lodash.prototype[methodName]=function(){var args=[this.__wrapped__];push.apply(args,arguments);return func.apply(lodash,args)}}});lodash.first=first;lodash.last=last;lodash.take=first;lodash.head=first;forOwn(lodash,function(func,methodName){if(!lodash.prototype[methodName]){lodash.prototype[methodName]=function(callback,thisArg){var result=func(this.__wrapped__,callback,thisArg);return callback==null||thisArg&&typeof callback!="function"?result:new lodashWrapper(result)}}});lodash.VERSION="1.3.1";lodash.prototype.toString=wrapperToString;lodash.prototype.value=wrapperValueOf;lodash.prototype.valueOf=wrapperValueOf;forEach(["join","pop","shift"],function(methodName){var func=arrayRef[methodName];lodash.prototype[methodName]=function(){return func.apply(this.__wrapped__,arguments)}});forEach(["push","reverse","sort","unshift"],function(methodName){var func=arrayRef[methodName];lodash.prototype[methodName]=function(){func.apply(this.__wrapped__,arguments);return this}});forEach(["concat","slice","splice"],function(methodName){var func=arrayRef[methodName];lodash.prototype[methodName]=function(){return new lodashWrapper(func.apply(this.__wrapped__,arguments))}});return lodash}var _=runInContext();if(typeof define=="function"&&typeof define.amd=="object"&&define.amd){window._=_;define(function(){return _})}else if(freeExports&&!freeExports.nodeType){if(freeModule){(freeModule.exports=_)._=_}else{freeExports._=_}}else{window._=_}}(this)}(self)},{}],35:[function(require,module,exports){!function(){var Model=require("./base"),Customization=require("./customization"),User=Model.extend({name:"user",url:function(){return this.app.config.baseUrl+"/users/auth.json"},parse:function(data,options){data=data.user;try{data.customization=new Customization({},{app:this.app}).parse({customization:data.customization})}catch(e){data.customization=null}return data},defaults:{username:"",password:"",token:false,policy:"",signature:"",path:"",customization:{},error:null}});module.exports=User}()},{"./base":36,"./customization":37}],38:[function(require,module,exports){!function(){var Media=require("./media"),Image=Media.extend({name:"image",urlRoot:function(){return this.app.config.baseUrl+"/images"}});module.exports=Image}()},{"./media":39}],40:[function(require,module,exports){!function(){var Media=require("./media"),Video=Media.extend({name:"video",urlRoot:function(){return this.app.config.baseUrl+"/videos"}});module.exports=Video}()},{"./media":39}],37:[function(require,module,exports){!function(){var Model=require("./base"),Customization=Model.extend({name:"customization",urlRoot:function(){return this.app.config.baseUrl+"/customizations"},parse:function(data,options){data=data.customization;delete data.customization;try{data.config=JSON.parse(data.config)}catch(e){data.config={error:"Could not parse the JSON"}}return data}});module.exports=Customization}()},{"./base":36}],10:[function(require,module,exports){!function(){module.exports=function($,window,undefined){"use strict";var $event=$.event,$special,resizeTimeout;$special=$event.special.debouncedresize={setup:function(){$(this).on("resize",$special.handler)},teardown:function(){$(this).off("resize",$special.handler)},handler:function(event,execAsap){var context=this,args=arguments,dispatch=function(){event.type="debouncedresize";$event.dispatch.apply(context,args)};if(resizeTimeout){clearTimeout(resizeTimeout)}execAsap?dispatch():resizeTimeout=setTimeout(dispatch,$special.threshold)},threshold:150};var BLANK="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==";$.fn.imagesLoaded=function(callback){var $this=this,deferred=$.isFunction($.Deferred)?$.Deferred():0,hasNotify=$.isFunction(deferred.notify),$images=$this.find("img").add($this.filter("img")),loaded=[],proper=[],broken=[];if($.isPlainObject(callback)){$.each(callback,function(key,value){if(key==="callback"){callback=value}else if(deferred){deferred[key](value)}})}function doneLoading(){var $proper=$(proper),$broken=$(broken);if(deferred){if(broken.length){deferred.reject($images,$proper,$broken)}else{deferred.resolve($images)}}if($.isFunction(callback)){callback.call($this,$images,$proper,$broken)}}function imgLoaded(img,isBroken){if(img.src===BLANK||$.inArray(img,loaded)!==-1){return}loaded.push(img);if(isBroken){broken.push(img)}else{proper.push(img)}$.data(img,"imagesLoaded",{isBroken:isBroken,src:img.src});if(hasNotify){deferred.notifyWith($(img),[isBroken,$images,$(proper),$(broken)])}if($images.length===loaded.length){setTimeout(doneLoading);$images.unbind(".imagesLoaded")}}if(!$images.length){doneLoading()}else{$images.bind("load.imagesLoaded error.imagesLoaded",function(event){imgLoaded(event.target,event.type==="error")}).each(function(i,el){var src=el.src;var cached=$.data(el,"imagesLoaded");if(cached&&cached.src===src){imgLoaded(el,cached.isBroken);return}if(el.complete&&el.naturalWidth!==undefined){imgLoaded(el,el.naturalWidth===0||el.naturalHeight===0);return}if(el.readyState||el.complete){el.src=BLANK;el.src=src}})}return deferred?deferred.promise($this):$this};var $window=$(window),Modernizr=window.Modernizr;$.Elastislide=function(options,element){this.$el=$(element);this._init(options)};$.Elastislide.defaults={orientation:"horizontal",speed:500,easing:"ease-in-out",minItems:3,start:0,onClick:function(el,position,evt){return false},onReady:function(){return false},onBeforeSlide:function(){return false},onAfterSlide:function(){return false}};$.Elastislide.prototype={_init:function(options){var Modernizr=require("./modernizr");this.options=$.extend(true,{},$.Elastislide.defaults,options);var self=this,transEndEventNames={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd",transition:"transitionend"};this.transEndEventName=transEndEventNames[Modernizr.prefixed("transition")];this.support=Modernizr.csstransitions&&Modernizr.csstransforms;this.current=this.options.start;this.isSliding=false;this.$items=this.$el.children("li");this.itemsCount=this.$items.length;if(this.itemsCount===0){return false}this._validate();this.$items.detach();this.$el.empty();this.$el.append(this.$items);this.$el.wrap('<div class="elastislide-wrapper elastislide-loading elastislide-'+this.options.orientation+'"></div>');this.hasTransition=false;this.hasTransitionTimeout=setTimeout(function(){self._addTransition()},100);this.$el.imagesLoaded(function(){self.$el.show();self._layout();self._configure();if(self.hasTransition){self._removeTransition();self._slideToItem(self.current);self.$el.on(self.transEndEventName,function(){self.$el.off(self.transEndEventName);self._setWrapperSize();self._addTransition();self._initEvents()})}else{clearTimeout(self.hasTransitionTimeout);self._setWrapperSize();self._initEvents();self._slideToItem(self.current);setTimeout(function(){self._addTransition()},25)}self.options.onReady()})},_validate:function(){if(this.options.speed<0){this.options.speed=500}if(this.options.minItems<1||this.options.minItems>this.itemsCount){this.options.minItems=1}if(this.options.start<0||this.options.start>this.itemsCount-1){this.options.start=0}if(this.options.orientation!="horizontal"&&this.options.orientation!="vertical"){this.options.orientation="horizontal"}},_layout:function(){this.$el.wrap('<div class="elastislide-carousel"></div>');this.$carousel=this.$el.parent();this.$wrapper=this.$carousel.parent().removeClass("elastislide-loading");var $img=this.$items.find("img:first");this.imgSize={width:$img.outerWidth(true),height:$img.outerHeight(true)};this._setItemsSize();this.options.orientation==="horizontal"?this.$el.css("max-height",this.imgSize.height):this.$el.css("height",this.options.minItems*this.imgSize.height);this._addControls()},_addTransition:function(){if(this.support){this.$el.css("transition","all "+this.options.speed+"ms "+this.options.easing)}this.hasTransition=true},_removeTransition:function(){if(this.support){this.$el.css("transition","all 0s")}this.hasTransition=false},_addControls:function(){var self=this;this.$navigation=$('<nav><span class="elastislide-prev">Previous</span><span class="elastislide-next">Next</span></nav>').appendTo(this.$wrapper);this.$navPrev=this.$navigation.find("span.elastislide-prev").on("mousedown.elastislide",function(event){self._slide("prev");return false});this.$navNext=this.$navigation.find("span.elastislide-next").on("mousedown.elastislide",function(event){self._slide("next");return false})},_setItemsSize:function(){var w=this.options.orientation==="horizontal"?Math.floor(this.$carousel.width()/this.options.minItems)*100/this.$carousel.width():100;this.$items.css({width:w+"%","max-width":this.imgSize.width,"max-height":this.imgSize.height});if(this.options.orientation==="vertical"){this.$wrapper.css("max-width",this.imgSize.width+parseInt(this.$wrapper.css("padding-left"))+parseInt(this.$wrapper.css("padding-right")))}},_setWrapperSize:function(){if(this.options.orientation==="vertical"){this.$wrapper.css({height:this.options.minItems*this.imgSize.height+parseInt(this.$wrapper.css("padding-top"))+parseInt(this.$wrapper.css("padding-bottom"))})}},_configure:function(){this.fitCount=this.options.orientation==="horizontal"?this.$carousel.width()<this.options.minItems*this.imgSize.width?this.options.minItems:Math.floor(this.$carousel.width()/this.imgSize.width):this.$carousel.height()<this.options.minItems*this.imgSize.height?this.options.minItems:Math.floor(this.$carousel.height()/this.imgSize.height)},_initEvents:function(){var self=this;$window.on("debouncedresize.elastislide",function(){self._setItemsSize();self._configure();self._slideToItem(self.current)});this.$el.on(this.transEndEventName,function(){self._onEndTransition()});if(this.options.orientation==="horizontal"){this.$el.on({swipeleft:function(){self._slide("next")},swiperight:function(){self._slide("prev")}})}else{this.$el.on({swipeup:function(){self._slide("next")},swipedown:function(){self._slide("prev")}})}this.$el.on("click.elastislide","li",function(event){var $item=$(this);self.options.onClick($item,$item.index(),event)})},_destroy:function(callback){this.$el.off(this.transEndEventName).off("swipeleft swiperight swipeup swipedown .elastislide");$window.off(".elastislide");this.$el.css({"max-height":"none",transition:"none"}).unwrap(this.$carousel).unwrap(this.$wrapper);this.$items.css({width:"auto","max-width":"none","max-height":"none"});this.$navigation.remove();this.$wrapper.remove();if(callback){callback.call()}},_toggleControls:function(dir,display){if(display){dir==="next"?this.$navNext.show():this.$navPrev.show()}else{dir==="next"?this.$navNext.hide():this.$navPrev.hide()}},_slide:function(dir,tvalue){if(this.isSliding){return false}this.options.onBeforeSlide();this.isSliding=true;var self=this,translation=this.translation||0,itemSpace=this.options.orientation==="horizontal"?this.$items.outerWidth(true):this.$items.outerHeight(true),totalSpace=this.itemsCount*itemSpace,visibleSpace=this.options.orientation==="horizontal"?this.$carousel.width():this.$carousel.height();if(tvalue===undefined){var amount=this.fitCount*itemSpace;if(amount<0){return false}if(dir==="next"&&totalSpace-(Math.abs(translation)+amount)<visibleSpace){amount=totalSpace-(Math.abs(translation)+visibleSpace);
this._toggleControls("next",false);this._toggleControls("prev",true)}else if(dir==="prev"&&Math.abs(translation)-amount<0){amount=Math.abs(translation);this._toggleControls("next",true);this._toggleControls("prev",false)}else{var ftv=dir==="next"?Math.abs(translation)+Math.abs(amount):Math.abs(translation)-Math.abs(amount);ftv>0?this._toggleControls("prev",true):this._toggleControls("prev",false);ftv<totalSpace-visibleSpace?this._toggleControls("next",true):this._toggleControls("next",false)}tvalue=dir==="next"?translation-amount:translation+amount}else{var amount=Math.abs(tvalue);if(Math.max(totalSpace,visibleSpace)-amount<visibleSpace){tvalue=-(Math.max(totalSpace,visibleSpace)-visibleSpace)}amount>0?this._toggleControls("prev",true):this._toggleControls("prev",false);Math.max(totalSpace,visibleSpace)-visibleSpace>amount?this._toggleControls("next",true):this._toggleControls("next",false)}this.translation=tvalue;if(translation===tvalue){this._onEndTransition();return false}if(this.support){this.options.orientation==="horizontal"?this.$el.css("transform","translateX("+tvalue+"px)"):this.$el.css("transform","translateY("+tvalue+"px)")}else{$.fn.applyStyle=this.hasTransition?$.fn.animate:$.fn.css;var styleCSS=this.options.orientation==="horizontal"?{left:tvalue}:{top:tvalue};this.$el.stop().applyStyle(styleCSS,$.extend(true,[],{duration:this.options.speed,complete:function(){self._onEndTransition()}}))}if(!this.hasTransition){this._onEndTransition()}},_onEndTransition:function(){this.isSliding=false;this.options.onAfterSlide()},_slideTo:function(pos){var pos=pos||this.current,translation=Math.abs(this.translation)||0,itemSpace=this.options.orientation==="horizontal"?this.$items.outerWidth(true):this.$items.outerHeight(true),posR=translation+this.$carousel.width(),ftv=Math.abs(pos*itemSpace);if(ftv+itemSpace>posR||ftv<translation){this._slideToItem(pos)}},_slideToItem:function(pos){var amount=this.options.orientation==="horizontal"?pos*this.$items.outerWidth(true):pos*this.$items.outerHeight(true);this._slide("",-amount)},add:function(callback){var self=this,oldcurrent=this.current,$currentItem=this.$items.eq(this.current);this.$items=this.$el.children("li");this.itemsCount=this.$items.length;this.current=$currentItem.index();this._setItemsSize();this._configure();this._removeTransition();oldcurrent<this.current?this._slideToItem(this.current):this._slide("next",this.translation);setTimeout(function(){self._addTransition()},25);if(callback){callback.call()}},setCurrent:function(idx,callback){this.current=idx;this._slideTo();if(callback){callback.call()}},next:function(){self._slide("next")},previous:function(){self._slide("prev")},slideStart:function(){this._slideTo(0)},slideEnd:function(){this._slideTo(this.itemsCount-1)},destroy:function(callback){this._destroy(callback)}};var logError=function(message){if(window.console){window.console.error(message)}};$.fn.elastislide=function(options){var self=$.data(this,"elastislide");if(typeof options==="string"){var args=Array.prototype.slice.call(arguments,1);this.each(function(){if(!self){logError("cannot call methods on elastislide prior to initialization; "+"attempted to call method '"+options+"'");return}if(!$.isFunction(self[options])||options.charAt(0)==="_"){logError("no such method '"+options+"' for elastislide self");return}self[options].apply(self,args)})}else{this.each(function(){if(self){self._init()}else{self=$.data(this,"elastislide",new $.Elastislide(options,this))}})}return self}}}()},{"./modernizr":41}],15:[function(require,module,exports){!function(){var View=require("../base"),NavbarView=require("../layout/navbar.js"),FooterView=require("../layout/footer.js"),IndexView=View.extend({template:require("../../templates/routes/index.hbs"),initialize:function(options){this.app=options.app;this.listenTo(this.app.getUser(),"change",this.render,this)},afterRender:function(){var navbar=new NavbarView({app:this.app}),footer=new FooterView({app:this.app});navbar.remove();footer.remove();this.appendSubview(navbar,this.$("#header"));this.appendSubview(footer,this.$("#footer"));this.eachSubview(function(subview){subview.render()})},context:function(){return this.getContext()}});module.exports=IndexView}()},{"../../templates/routes/index.hbs":44,"../base":45,"../layout/footer.js":43,"../layout/navbar.js":42}],17:[function(require,module,exports){!function(){var View=require("../base"),NavbarView=require("../layout/navbar.js"),FooterView=require("../layout/footer.js"),LoginView=View.extend({template:require("../../templates/routes/login.hbs"),initialize:function(options){this.app=options.app;this.user=this.app.getUser();this.listenTo(this.user,"change",this.render,this);this.listenTo(this.user,"change",function(){if(this.app.bootstrap.userId&&this.user.attributes.token&&this.user.id!==this.app.bootstrap.userId){this.app.setFlash("error","Sorry, you can't log in here!");this.app.getUser().set({id:null,username:null,password:null,token:false,policy:null,signature:null,path:null,customization:{}})}},this);this.renderOnReady(this.user)},afterRender:function(){var navbar=new NavbarView({app:this.app}),footer=new FooterView({app:this.app});this.appendSubview(navbar,this.$("#header"));this.appendSubview(footer,this.$("#footer"));this.eachSubview(function(subview){subview.render()})},context:function(){return this.getContext({user:this.user.attributes})},events:{submit:"login","click a.app":"handleAppLink","click a.provisionTestAccount":"provisionTestAccount"},login:function(e){e.preventDefault();e.stopPropagation();var username=this.$("input[name=username]").val();var password=this.$("input[name=password]").val();this.user.set({username:username,password:password}).save()},provisionTestAccount:function(e){e.preventDefault();e.stopPropagation();this.user.set({id:"test"}).save()}});module.exports=LoginView}()},{"../../templates/routes/login.hbs":46,"../base":45,"../layout/footer.js":43,"../layout/navbar.js":42}],19:[function(require,module,exports){!function(){var View=require("../base"),NavbarView=require("../layout/navbar.js"),FooterView=require("../layout/footer.js"),IndexView=View.extend({template:require("../../templates/routes/review.hbs"),initialize:function(options){this.app=options.app;this.unprocessed=this.app.db.fetchCollection("unprocessedUploads");this.listenTo(this.app.getUser(),"change",this.render,this);this.listenTo(this.unprocessed,"add change remove sort",this.render,this)},afterRender:function(){var navbar=new NavbarView({app:this.app}),footer=new FooterView({app:this.app});navbar.remove();footer.remove();this.appendSubview(navbar,this.$("#header"));this.appendSubview(footer,this.$("#footer"));this.eachSubview(function(subview){subview.render()})},context:function(){var unprocessedAttrs=[];this.unprocessed.forEach(function(model){var attrs=model.attributes;attrs.editHref="/media/"+attrs.type+"/"+model.id+"/edit";unprocessedAttrs.push(attrs)});return this.getContext({unprocessed:unprocessedAttrs,nothingToReview:unprocessedAttrs.length===0})}});module.exports=IndexView}()},{"../../templates/routes/review.hbs":47,"../base":45,"../layout/footer.js":43,"../layout/navbar.js":42}],21:[function(require,module,exports){!function(){var View=require("../../base"),NavbarView=require("../../layout/navbar.js"),FooterView=require("../../layout/footer.js"),IndexView=View.extend({template:require("../../../templates/routes/pages/create.hbs"),events:{submit:"performSave","click a.app":"handleAppLink"},initialize:function(options){this.app=options.app;this.model=this.app.db.createModel("page");this.listenTo(this.model,"invalid",function(model,err){this.app.error(this.model,err)},this)},afterRender:function(){var inputElem;var navbar=new NavbarView({app:this.app}),footer=new FooterView({app:this.app});this.appendSubview(navbar,this.$("#header"));this.appendSubview(footer,this.$("#footer"));this.eachSubview(function(subview){subview.render()});inputElem=this.$("input[name=name]");if(inputElem.val().replace(/]w/,"")==""){inputElem.val("").focus()}},context:function(){return this.getContext()},performSave:function(e){var self=this;e.preventDefault();var name=this.$("input[name=name]").val();self.model.save({userId:self.app.getUser().id,name:name},{success:function(){self.app.db.fetchCollection("pages").add(self.model);self.app.navigate("page/"+name,{trigger:true})},error:self.app.error})}});module.exports=IndexView}()},{"../../../templates/routes/pages/create.hbs":48,"../../base":45,"../../layout/footer.js":43,"../../layout/navbar.js":42}],23:[function(require,module,exports){!function(){var View=require("../../base"),Holder=require("../../../helpers/lib/holder.js"),NavbarView=require("../../layout/navbar.js"),FooterView=require("../../layout/footer.js"),EditView=View.extend({template:require("../../../templates/routes/pages/edit.hbs"),events:{submit:"performSave"},initialize:function(options){this.app=options.app;this.page=this.app.db.createModel("page").set({name:"Loading..."});var pages=this.app.db.fetchCollection("pages");this.listenTo(this.page,"change",this.render,this);pages.once("ready",function(){var foundPage=pages.find(function(page){return page.attributes.name.toLowerCase()===options.pageName.toLowerCase()});if(foundPage){this.page.set(foundPage.attributes)}else{this.page.set({name:"404"});this.app.error("Error 404: The page could not be found")}this.media=this.page.getMedia();this.listenTo(this.media,"change add remove sort",this.render,this);this.media.once("ready",this.render,this)},this)},context:function(){var media=[];var safeName=encodeURIComponent(this.page.attributes.name);if(this.media){this.media.forEach(function(model){media.push(model.templateVars(safeName))})}return this.getContext({media:media,page:this.page.attributes})},afterRender:function(){var self=this,navbar=new NavbarView({app:self.app}),footer=new FooterView({app:self.app});self.appendSubview(navbar,self.$("#header"));self.appendSubview(footer,self.$("#footer"));self.eachSubview(function(subview){subview.render()});self.$(".sortable").sortable().bind("sortupdate",function(){self.readSortOrder.apply(self,arguments)});self.$(".switch").bootstrapSwitch();Holder.run()},performSave:function(e){var self=this;e.preventDefault();var name=this.$("input[name=name]").val(),isPublished=this.$("input[name=isPublished]").parent().hasClass("switch-on");this.page.save({userId:self.app.getUser().attributes.id,name:name,isPublished:isPublished},{success:function(){self.app.db.fetchCollection("pages").fetch();self.app.setFlash("success","Page Saved!")},error:self.app.error})},performDelete:function(e){e.preventDefault();e.stopPropagation();var self=this;var proceed=confirm("Are you sure you want to delete "+self.page.attributes.name+"?");if(proceed){self.page.destroy({success:function(){self.app.navigate("",{trigger:true})},error:self.app.error})}else{return false}},readSortOrder:function(e){e.preventDefault();e.stopPropagation();var self=this;var items=self.$(".sortable").children();var models=[];var pageItems=[];items.each(function(index,elem){var fModel=self.page.getMedia().get($(elem).attr("data-uuid"));models.push(fModel);pageItems.push({ID:fModel.attributes.id,NAME:fModel.attributes.name,TYPE:fModel.attributes.type,THUMB:fModel.attributes.thumbnailS3key})});self.page.getMedia().reset(models);self.page.set("items",pageItems);self.page.save({},{success:function(){self.app.setFlash("success","Page Saved!")},error:self.app.error})}});module.exports=EditView}()},{"../../../helpers/lib/holder.js":49,"../../../templates/routes/pages/edit.hbs":50,"../../base":45,"../../layout/footer.js":43,"../../layout/navbar.js":42}],25:[function(require,module,exports){!function(){var View=require("../../base"),NavbarView=require("../../layout/navbar.js"),FooterView=require("../../layout/footer.js"),GridView=require("../../routes/media/grid.js"),ShowView=View.extend({template:require("../../../templates/routes/pages/show.hbs"),initialize:function(options){this.app=options.app;this.page=this.app.db.createModel("page").set({name:"Loading..."});this.pageName=options.pageName;var pages=this.app.db.fetchCollection("pages");this.listenTo(this.app.getUser(),"change",this.render,this);this.listenTo(this.page,"change",this.render,this);pages.once("ready",function(){var foundPage=pages.find(function(page){return page.attributes.name.toLowerCase()===options.pageName.toLowerCase()});if(foundPage){this.page.set(foundPage.attributes)}else{this.page.set({name:"404"});this.app.error("Error 404: The page could not be found")}},this)},afterRender:function(){var navbar=new NavbarView({app:this.app}),grid=new GridView({app:this.app,pageName:this.pageName}),footer=new FooterView({app:this.app});this.appendSubview(navbar,this.$("#header"));this.appendSubview(grid,this.$("#content"));this.appendSubview(footer,this.$("#footer"));this.eachSubview(function(subview){subview.render()})},context:function(){return this.getContext()}});module.exports=ShowView}()},{"../../../templates/routes/pages/show.hbs":52,"../../base":45,"../../layout/footer.js":43,"../../layout/navbar.js":42,"../../routes/media/grid.js":51}],27:[function(require,module,exports){!function(){var View=require("../../base"),NavbarView=require("../../layout/navbar.js"),FooterView=require("../../layout/footer.js"),IndexView=View.extend({template:require("../../../templates/routes/media/add.hbs"),events:{"click a.filepicker":"startFilepicker","click a.app":"handleAppLink"},initialize:function(options){this.app=options.app;this.page=this.app.db.createModel("page").set({name:"Loading..."});var pages=this.app.db.fetchCollection("pages");this.listenTo(this.app.getUser(),"change",this.render,this);this.listenTo(this.page,"change",this.render,this);pages.once("ready",function(){var foundPage=pages.find(function(page){return page.attributes.name.toLowerCase()===options.pageName.toLowerCase()});if(foundPage){this.page.set(foundPage.attributes)}else{this.page.set({name:"404"});this.app.error("Error 404: The page could not be found")}},this)},afterRender:function(){var inputElem;var navbar=new NavbarView({app:this.app}),footer=new FooterView({app:this.app});this.appendSubview(navbar,this.$("#header"));this.appendSubview(footer,this.$("#footer"));this.eachSubview(function(subview){subview.render()})},context:function(){return this.getContext({page:this.page.attributes})},startFilepicker:function(e,debug_cb){var self=this;if(e){e.preventDefault();e.stopPropagation()}if(!this.page.id){self.app.error("The page hasn't loaded yet, try again in a few seconds");return}this.page.addMedia(function(err,FPFiles){if(err&&err.code!==101){self.app.error(err)}else if(FPFiles){self.app.setFlash("success",FPFiles.length+" files uploaded!")}},debug_cb)}});module.exports=IndexView}()},{"../../../templates/routes/media/add.hbs":53,"../../base":45,"../../layout/footer.js":43,"../../layout/navbar.js":42}],41:[function(require,module,exports){!function(){var Modernizr=function(window,document,undefined){var version="2.6.2",Modernizr={},enableClasses=true,docElement=document.documentElement,mod="modernizr",modElem=document.createElement(mod),mStyle=modElem.style,inputElem,toString={}.toString,prefixes=" -webkit- -moz- -o- -ms- ".split(" "),omPrefixes="Webkit Moz O ms",cssomPrefixes=omPrefixes.split(" "),domPrefixes=omPrefixes.toLowerCase().split(" "),tests={},inputs={},attrs={},classes=[],slice=classes.slice,featureName,injectElementWithStyles=function(rule,callback,nodes,testnames){var style,ret,node,docOverflow,div=document.createElement("div"),body=document.body,fakeBody=body||document.createElement("body");if(parseInt(nodes,10)){while(nodes--){node=document.createElement("div");node.id=testnames?testnames[nodes]:mod+(nodes+1);div.appendChild(node)}}style=["&#173;",'<style id="s',mod,'">',rule,"</style>"].join("");div.id=mod;(body?div:fakeBody).innerHTML+=style;fakeBody.appendChild(div);if(!body){fakeBody.style.background="";fakeBody.style.overflow="hidden";docOverflow=docElement.style.overflow;docElement.style.overflow="hidden";docElement.appendChild(fakeBody)}ret=callback(div,rule);if(!body){fakeBody.parentNode.removeChild(fakeBody);docElement.style.overflow=docOverflow}else{div.parentNode.removeChild(div)}return!!ret},_hasOwnProperty={}.hasOwnProperty,hasOwnProp;if(!is(_hasOwnProperty,"undefined")&&!is(_hasOwnProperty.call,"undefined")){hasOwnProp=function(object,property){return _hasOwnProperty.call(object,property)}}else{hasOwnProp=function(object,property){return property in object&&is(object.constructor.prototype[property],"undefined")}}if(!Function.prototype.bind){Function.prototype.bind=function bind(that){var target=this;if(typeof target!="function"){throw new TypeError}var args=slice.call(arguments,1),bound=function(){if(this instanceof bound){var F=function(){};F.prototype=target.prototype;var self=new F;var result=target.apply(self,args.concat(slice.call(arguments)));if(Object(result)===result){return result}return self}else{return target.apply(that,args.concat(slice.call(arguments)))}};return bound}}function setCss(str){mStyle.cssText=str}function setCssAll(str1,str2){return setCss(prefixes.join(str1+";")+(str2||""))}function is(obj,type){return typeof obj===type}function contains(str,substr){return!!~(""+str).indexOf(substr)}function testProps(props,prefixed){for(var i in props){var prop=props[i];if(!contains(prop,"-")&&mStyle[prop]!==undefined){return prefixed=="pfx"?prop:true}}return false}function testDOMProps(props,obj,elem){for(var i in props){var item=obj[props[i]];if(item!==undefined){if(elem===false)return props[i];if(is(item,"function")){return item.bind(elem||obj)}return item}}return false}function testPropsAll(prop,prefixed,elem){var ucProp=prop.charAt(0).toUpperCase()+prop.slice(1),props=(prop+" "+cssomPrefixes.join(ucProp+" ")+ucProp).split(" ");if(is(prefixed,"string")||is(prefixed,"undefined")){return testProps(props,prefixed)}else{props=(prop+" "+domPrefixes.join(ucProp+" ")+ucProp).split(" ");return testDOMProps(props,prefixed,elem)}}tests["touch"]=function(){var bool;if("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch){bool=true}else{injectElementWithStyles(["@media (",prefixes.join("touch-enabled),("),mod,")","{#modernizr{top:9px;position:absolute}}"].join(""),function(node){bool=node.offsetTop===9})}return bool};tests["csstransforms"]=function(){return!!testPropsAll("transform")};tests["csstransitions"]=function(){return testPropsAll("transition")};for(var feature in tests){if(hasOwnProp(tests,feature)){featureName=feature.toLowerCase();Modernizr[featureName]=tests[feature]();classes.push((Modernizr[featureName]?"":"no-")+featureName)}}Modernizr.addTest=function(feature,test){if(typeof feature=="object"){for(var key in feature){if(hasOwnProp(feature,key)){Modernizr.addTest(key,feature[key])}}}else{feature=feature.toLowerCase();if(Modernizr[feature]!==undefined){return Modernizr}test=typeof test=="function"?test():test;if(typeof enableClasses!=="undefined"&&enableClasses){docElement.className+=" "+(test?"":"no-")+feature}Modernizr[feature]=test}return Modernizr};setCss("");modElem=inputElem=null;!function(window,document){var options=window.html5||{};var reSkip=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i;var saveClones=/^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i;var supportsHtml5Styles;var expando="_html5shiv";var expanID=0;var expandoData={};var supportsUnknownElements;!function(){try{var a=document.createElement("a");a.innerHTML="<xyz></xyz>";supportsHtml5Styles="hidden"in a;supportsUnknownElements=a.childNodes.length==1||function(){document.createElement("a");var frag=document.createDocumentFragment();return typeof frag.cloneNode=="undefined"||typeof frag.createDocumentFragment=="undefined"||typeof frag.createElement=="undefined"}()}catch(e){supportsHtml5Styles=true;supportsUnknownElements=true}}();function addStyleSheet(ownerDocument,cssText){var p=ownerDocument.createElement("p"),parent=ownerDocument.getElementsByTagName("head")[0]||ownerDocument.documentElement;p.innerHTML="x<style>"+cssText+"</style>";return parent.insertBefore(p.lastChild,parent.firstChild)}function getElements(){var elements=html5.elements;return typeof elements=="string"?elements.split(" "):elements}function getExpandoData(ownerDocument){var data=expandoData[ownerDocument[expando]];if(!data){data={};expanID++;ownerDocument[expando]=expanID;expandoData[expanID]=data}return data}function createElement(nodeName,ownerDocument,data){if(!ownerDocument){ownerDocument=document}if(supportsUnknownElements){return ownerDocument.createElement(nodeName)}if(!data){data=getExpandoData(ownerDocument)}var node;if(data.cache[nodeName]){node=data.cache[nodeName].cloneNode()}else if(saveClones.test(nodeName)){node=(data.cache[nodeName]=data.createElem(nodeName)).cloneNode()}else{node=data.createElem(nodeName)}return node.canHaveChildren&&!reSkip.test(nodeName)?data.frag.appendChild(node):node}function createDocumentFragment(ownerDocument,data){if(!ownerDocument){ownerDocument=document}if(supportsUnknownElements){return ownerDocument.createDocumentFragment()}data=data||getExpandoData(ownerDocument);var clone=data.frag.cloneNode(),i=0,elems=getElements(),l=elems.length;for(;i<l;i++){clone.createElement(elems[i])}return clone}function shivMethods(ownerDocument,data){if(!data.cache){data.cache={};data.createElem=ownerDocument.createElement;data.createFrag=ownerDocument.createDocumentFragment;data.frag=data.createFrag()}ownerDocument.createElement=function(nodeName){if(!html5.shivMethods){return data.createElem(nodeName)}return createElement(nodeName,ownerDocument,data)};ownerDocument.createDocumentFragment=Function("h,f","return function(){"+"var n=f.cloneNode(),c=n.createElement;"+"h.shivMethods&&("+getElements().join().replace(/\w+/g,function(nodeName){data.createElem(nodeName);data.frag.createElement(nodeName);return'c("'+nodeName+'")'})+");return n}")(html5,data.frag)}function shivDocument(ownerDocument){if(!ownerDocument){ownerDocument=document}var data=getExpandoData(ownerDocument);if(html5.shivCSS&&!supportsHtml5Styles&&!data.hasCSS){data.hasCSS=!!addStyleSheet(ownerDocument,"article,aside,figcaption,figure,footer,header,hgroup,nav,section{display:block}"+"mark{background:#FF0;color:#000}")}if(!supportsUnknownElements){shivMethods(ownerDocument,data)}return ownerDocument}var html5={elements:options.elements||"abbr article aside audio bdi canvas data datalist details figcaption figure footer header hgroup mark meter nav output progress section summary time video",shivCSS:options.shivCSS!==false,supportsUnknownElements:supportsUnknownElements,shivMethods:options.shivMethods!==false,type:"default",shivDocument:shivDocument,createElement:createElement,createDocumentFragment:createDocumentFragment};window.html5=html5;shivDocument(document)}(this,document);Modernizr._version=version;Modernizr._prefixes=prefixes;Modernizr._domPrefixes=domPrefixes;Modernizr._cssomPrefixes=cssomPrefixes;Modernizr.testProp=function(prop){return testProps([prop])};Modernizr.testAllProps=testPropsAll;Modernizr.testStyles=injectElementWithStyles;Modernizr.prefixed=function(prop,obj,elem){if(!obj){return testPropsAll(prop,"pfx")}else{return testPropsAll(prop,obj,elem)}};docElement.className=docElement.className.replace(/(^|\s)no-js(\s|$)/,"$1$2")+(enableClasses?" js "+classes.join(" "):"");return Modernizr}(this,this.document);!function(a,b,c){function d(a){return"[object Function]"==o.call(a)}function e(a){return"string"==typeof a}function f(){}function g(a){return!a||"loaded"==a||"complete"==a||"uninitialized"==a}function h(){var a=p.shift();q=1,a?a.t?m(function(){("c"==a.t?B.injectCss:B.injectJs)(a.s,0,a.a,a.x,a.e,1)},0):(a(),h()):q=0}function i(a,c,d,e,f,i,j){function k(b){if(!o&&g(l.readyState)&&(u.r=o=1,!q&&h(),l.onload=l.onreadystatechange=null,b)){"img"!=a&&m(function(){t.removeChild(l)},50);for(var d in y[c])y[c].hasOwnProperty(d)&&y[c][d].onload()}}var j=j||B.errorTimeout,l=b.createElement(a),o=0,r=0,u={t:d,s:c,e:f,a:i,x:j};1===y[c]&&(r=1,y[c]=[]),"object"==a?l.data=c:(l.src=c,l.type=a),l.width=l.height="0",l.onerror=l.onload=l.onreadystatechange=function(){k.call(this,r)},p.splice(e,0,u),"img"!=a&&(r||2===y[c]?(t.insertBefore(l,s?null:n),m(k,j)):y[c].push(l))}function j(a,b,c,d,f){return q=0,b=b||"j",e(a)?i("c"==b?v:u,a,b,this.i++,c,d,f):(p.splice(this.i++,0,a),1==p.length&&h()),this}function k(){var a=B;return a.loader={load:j,i:0},a}var l=b.documentElement,m=a.setTimeout,n=b.getElementsByTagName("script")[0],o={}.toString,p=[],q=0,r="MozAppearance"in l.style,s=r&&!!b.createRange().compareNode,t=s?l:n.parentNode,l=a.opera&&"[object Opera]"==o.call(a.opera),l=!!b.attachEvent&&!l,u=r?"object":l?"script":"img",v=l?"script":u,w=Array.isArray||function(a){return"[object Array]"==o.call(a)},x=[],y={},z={timeout:function(a,b){return b.length&&(a.timeout=b[0]),a}},A,B;B=function(a){function b(a){var a=a.split("!"),b=x.length,c=a.pop(),d=a.length,c={url:c,origUrl:c,prefixes:a},e,f,g;for(f=0;f<d;f++)g=a[f].split("="),(e=z[g.shift()])&&(c=e(c,g));for(f=0;f<b;f++)c=x[f](c);return c}function g(a,e,f,g,h){var i=b(a),j=i.autoCallback;i.url.split(".").pop().split("?").shift(),i.bypass||(e&&(e=d(e)?e:e[a]||e[g]||e[a.split("/").pop().split("?")[0]]),i.instead?i.instead(a,e,f,g,h):(y[i.url]?i.noexec=!0:y[i.url]=1,f.load(i.url,i.forceCSS||!i.forceJS&&"css"==i.url.split(".").pop().split("?").shift()?"c":c,i.noexec,i.attrs,i.timeout),(d(e)||d(j))&&f.load(function(){k(),e&&e(i.origUrl,h,g),j&&j(i.origUrl,h,g),y[i.url]=2})))}function h(a,b){function c(a,c){if(a){if(e(a))c||(j=function(){var a=[].slice.call(arguments);k.apply(this,a),l()}),g(a,j,b,0,h);else if(Object(a)===a)for(n in m=function(){var b=0,c;for(c in a)a.hasOwnProperty(c)&&b++;return b}(),a)a.hasOwnProperty(n)&&(!c&&!--m&&(d(j)?j=function(){var a=[].slice.call(arguments);k.apply(this,a),l()}:j[n]=function(a){return function(){var b=[].slice.call(arguments);a&&a.apply(this,b),l()}}(k[n])),g(a[n],j,b,n,h))}else!c&&l()}var h=!!a.test,i=a.load||a.both,j=a.callback||f,k=j,l=a.complete||f,m,n;c(h?a.yep:a.nope,!!i),i&&c(i)}var i,j,l=this.yepnope.loader;if(e(a))g(a,0,l,0);else if(w(a))for(i=0;i<a.length;i++)j=a[i],e(j)?g(j,0,l,0):w(j)?B(j):Object(j)===j&&h(j,l);else Object(a)===a&&h(a,l)},B.addPrefix=function(a,b){z[a]=b},B.addFilter=function(a){x.push(a)},B.errorTimeout=1e4,null==b.readyState&&b.addEventListener&&(b.readyState="loading",b.addEventListener("DOMContentLoaded",A=function(){b.removeEventListener("DOMContentLoaded",A,0),b.readyState="complete"},0)),a.yepnope=k(),a.yepnope.executeStack=h,a.yepnope.injectJs=function(a,c,d,e,i,j){var k=b.createElement("script"),l,o,e=e||B.errorTimeout;k.src=a;for(o in d)k.setAttribute(o,d[o]);c=j?h:c||f,k.onreadystatechange=k.onload=function(){!l&&g(k.readyState)&&(l=1,c(),k.onload=k.onreadystatechange=null)},m(function(){l||(l=1,c(1))},e),i?k.onload():n.parentNode.insertBefore(k,n)},a.yepnope.injectCss=function(a,c,d,e,g,i){var e=b.createElement("link"),j,c=i?h:c||f;e.href=a,e.rel="stylesheet",e.type="text/css";for(j in d)e.setAttribute(j,d[j]);g||(n.parentNode.insertBefore(e,n),m(c,0))}}(this,document);Modernizr.load=function(){yepnope.apply(window,[].slice.call(arguments,0))};module.exports=Modernizr}()},{}],49:[function(require,module,exports){!function(){var Holder=Holder||{};!function(app,win){var preempted=false,fallback=false,canvas=document.createElement("canvas");document.getElementsByClassName||(document.getElementsByClassName=function(e){var t=document,n,r,i,s=[];if(t.querySelectorAll)return t.querySelectorAll("."+e);if(t.evaluate){r=".//*[contains(concat(' ', @class, ' '), ' "+e+" ')]",n=t.evaluate(r,t,null,0,null);while(i=n.iterateNext())s.push(i)}else{n=t.getElementsByTagName("*"),r=new RegExp("(^|\\s)"+e+"(\\s|$)");for(i=0;i<n.length;i++)r.test(n[i].className)&&s.push(n[i])}return s});window.getComputedStyle||(window.getComputedStyle=function(e,t){return this.el=e,this.getPropertyValue=function(t){var n=/(\-([a-z]){1})/g;return t=="float"&&(t="styleFloat"),n.test(t)&&(t=t.replace(n,function(){return arguments[2].toUpperCase()})),e.currentStyle[t]?e.currentStyle[t]:null},this});function contentLoaded(n,t){var l="complete",s="readystatechange",u=!1,h=u,c=!0,i=n.document,a=i.documentElement,e=i.addEventListener?"addEventListener":"attachEvent",v=i.addEventListener?"removeEventListener":"detachEvent",f=i.addEventListener?"":"on",r=function(e){(e.type!=s||i.readyState==l)&&((e.type=="load"?n:i)[v](f+e.type,r,u),!h&&(h=!0)&&t.call(n,null))},o=function(){try{a.doScroll("left")}catch(n){setTimeout(o,50);return}r("poll")};if(i.readyState==l)t.call(n,"lazy");else{if(i.createEventObject&&a.doScroll){try{c=!n.frameElement}catch(y){}c&&o()}i[e](f+"DOMContentLoaded",r,u),i[e](f+s,r,u),n[e](f+"load",r,u)}}function selector(a){a=a.match(/^(\W)?(.*)/);var b=document["getElement"+(a[1]?a[1]=="#"?"ById":"sByClassName":"sByTagName")](a[2]);var ret=[];b!=null&&(b.length?ret=b:b.length==0?ret=b:ret=[b]);return ret}function extend(a,b){var c={};for(var d in a)c[d]=a[d];for(var e in b)c[e]=b[e];return c}if(!Object.prototype.hasOwnProperty)Object.prototype.hasOwnProperty=function(prop){var proto=this.__proto__||this.constructor.prototype;return prop in this&&(!(prop in proto)||proto[prop]!==this[prop])};function text_size(width,height,template){var dimension_arr=[height,width].sort();var maxFactor=Math.round(dimension_arr[1]/16),minFactor=Math.round(dimension_arr[0]/16);var text_height=Math.max(template.size,maxFactor);return{height:text_height}}function draw(ctx,dimensions,template,ratio){var ts=text_size(dimensions.width,dimensions.height,template);var text_height=ts.height;var width=dimensions.width*ratio,height=dimensions.height*ratio;var font=template.font?template.font:"sans-serif";canvas.width=width;canvas.height=height;ctx.textAlign="center";ctx.textBaseline="middle";ctx.fillStyle=template.background;ctx.fillRect(0,0,width,height);ctx.fillStyle=template.foreground;ctx.font="bold "+text_height+"px "+font;var text=template.text?template.text:dimensions.width+"x"+dimensions.height;if(ctx.measureText(text).width/width>1){text_height=template.size/(ctx.measureText(text).width/width)}ctx.font="bold "+text_height*ratio+"px "+font;ctx.fillText(text,width/2,height/2,width);return canvas.toDataURL("image/png")}function render(mode,el,holder,src){var dimensions=holder.dimensions,theme=holder.theme,text=holder.text?decodeURIComponent(holder.text):holder.text;var dimensions_caption=dimensions.width+"x"+dimensions.height;theme=text?extend(theme,{text:text}):theme;theme=holder.font?extend(theme,{font:holder.font}):theme;var ratio=1;if(window.devicePixelRatio&&window.devicePixelRatio>1){ratio=window.devicePixelRatio}if(mode=="image"){el.setAttribute("data-src",src);el.setAttribute("alt",text?text:theme.text?theme.text+" ["+dimensions_caption+"]":dimensions_caption);if(fallback||!holder.auto){el.style.width=dimensions.width+"px";el.style.height=dimensions.height+"px"}if(fallback){el.style.backgroundColor=theme.background}else{el.setAttribute("src",draw(ctx,dimensions,theme,ratio))}}else{if(!fallback){el.style.backgroundImage="url("+draw(ctx,dimensions,theme,ratio)+")";el.style.backgroundSize=dimensions.width+"px "+dimensions.height+"px"}}}function fluid(el,holder,src){var dimensions=holder.dimensions,theme=holder.theme,text=holder.text;var dimensions_caption=dimensions.width+"x"+dimensions.height;theme=text?extend(theme,{text:text}):theme;var fluid=document.createElement("div");fluid.style.backgroundColor=theme.background;fluid.style.color=theme.foreground;fluid.className=el.className+" holderjs-fluid";fluid.style.width=holder.dimensions.width+(holder.dimensions.width.indexOf("%")>0?"":"px");fluid.style.height=holder.dimensions.height+(holder.dimensions.height.indexOf("%")>0?"":"px");fluid.id=el.id;el.style.width=0;el.style.height=0;if(theme.text){fluid.appendChild(document.createTextNode(theme.text))}else{fluid.appendChild(document.createTextNode(dimensions_caption));
fluid_images.push(fluid);setTimeout(fluid_update,0)}el.parentNode.insertBefore(fluid,el.nextSibling);if(window.jQuery){jQuery(function($){$(el).on("load",function(){el.style.width=fluid.style.width;el.style.height=fluid.style.height;$(el).show();$(fluid).remove()})})}}function fluid_update(){for(i in fluid_images){if(!fluid_images.hasOwnProperty(i))continue;var el=fluid_images[i],label=el.firstChild;el.style.lineHeight=el.offsetHeight+"px";label.data=el.offsetWidth+"x"+el.offsetHeight}}function parse_flags(flags,options){var ret={theme:settings.themes.gray},render=false;for(sl=flags.length,j=0;j<sl;j++){var flag=flags[j];if(app.flags.dimensions.match(flag)){render=true;ret.dimensions=app.flags.dimensions.output(flag)}else if(app.flags.fluid.match(flag)){render=true;ret.dimensions=app.flags.fluid.output(flag);ret.fluid=true}else if(app.flags.colors.match(flag)){ret.theme=app.flags.colors.output(flag)}else if(options.themes[flag]){ret.theme=options.themes[flag]}else if(app.flags.text.match(flag)){ret.text=app.flags.text.output(flag)}else if(app.flags.font.match(flag)){ret.font=app.flags.font.output(flag)}else if(app.flags.auto.match(flag)){ret.auto=true}}return render?ret:false}if(!canvas.getContext){fallback=true}else{if(canvas.toDataURL("image/png").indexOf("data:image/png")<0){fallback=true}else{var ctx=canvas.getContext("2d")}}var fluid_images=[];var settings={domain:"holder.js",images:"img",bgnodes:".holderjs",themes:{gray:{background:"#eee",foreground:"#aaa",size:12},social:{background:"#3a5a97",foreground:"#fff",size:12},industrial:{background:"#434A52",foreground:"#C2F200",size:12}},stylesheet:".holderjs-fluid {font-size:16px;font-weight:bold;text-align:center;font-family:sans-serif;margin:0}"};app.flags={dimensions:{regex:/^(\d+)x(\d+)$/,output:function(val){var exec=this.regex.exec(val);return{width:+exec[1],height:+exec[2]}}},fluid:{regex:/^([0-9%]+)x([0-9%]+)$/,output:function(val){var exec=this.regex.exec(val);return{width:exec[1],height:exec[2]}}},colors:{regex:/#([0-9a-f]{3,})\:#([0-9a-f]{3,})/i,output:function(val){var exec=this.regex.exec(val);return{size:settings.themes.gray.size,foreground:"#"+exec[2],background:"#"+exec[1]}}},text:{regex:/text\:(.*)/,output:function(val){return this.regex.exec(val)[1]}},font:{regex:/font\:(.*)/,output:function(val){return this.regex.exec(val)[1]}},auto:{regex:/^auto$/}};for(var flag in app.flags){if(!app.flags.hasOwnProperty(flag))continue;app.flags[flag].match=function(val){return val.match(this.regex)}}app.add_theme=function(name,theme){name!=null&&theme!=null&&(settings.themes[name]=theme);return app};app.add_image=function(src,el){var node=selector(el);if(node.length){for(var i=0,l=node.length;i<l;i++){var img=document.createElement("img");img.setAttribute("data-src",src);node[i].appendChild(img)}}return app};app.run=function(o){var options=extend(settings,o),images=[];if(options.images instanceof window.NodeList){imageNodes=options.images}else if(options.images instanceof window.Node){imageNodes=[options.images]}else{imageNodes=selector(options.images)}if(options.elements instanceof window.NodeList){bgnodes=options.bgnodes}else if(options.bgnodes instanceof window.Node){bgnodes=[options.bgnodes]}else{bgnodes=selector(options.bgnodes)}preempted=true;for(i=0,l=imageNodes.length;i<l;i++)images.push(imageNodes[i]);var holdercss=document.getElementById("holderjs-style");if(!holdercss){holdercss=document.createElement("style");holdercss.setAttribute("id","holderjs-style");holdercss.type="text/css";document.getElementsByTagName("head")[0].appendChild(holdercss)}if(holdercss.styleSheet){holdercss.styleSheet+=options.stylesheet}else{holdercss.textContent+=options.stylesheet}var cssregex=new RegExp(options.domain+'/(.*?)"?\\)');for(var l=bgnodes.length,i=0;i<l;i++){var src=window.getComputedStyle(bgnodes[i],null).getPropertyValue("background-image");var flags=src.match(cssregex);if(flags){var holder=parse_flags(flags[1].split("/"),options);if(holder){render("background",bgnodes[i],holder,src)}}}for(var l=images.length,i=0;i<l;i++){var src=images[i].getAttribute("src")||images[i].getAttribute("data-src");if(src!=null&&src.indexOf(options.domain)>=0){var holder=parse_flags(src.substr(src.lastIndexOf(options.domain)+options.domain.length+1).split("/"),options);if(holder){if(holder.fluid){fluid(images[i],holder,src)}else{render("image",images[i],holder,src)}}}}return app};contentLoaded(win,function(){if(window.addEventListener){window.addEventListener("resize",fluid_update,false);window.addEventListener("orientationchange",fluid_update,false)}else{window.attachEvent("onresize",fluid_update)}preempted||app.run()});if(typeof define==="function"&&define.amd){define("Holder",[],function(){return app})}}(Holder,window);module.exports=Holder}()},{}],54:[function(require,module,exports){!function(){!function(){document.createElement("video");document.createElement("audio");var vjs=function(id,options,ready){var tag;if(typeof id==="string"){if(id.indexOf("#")===0){id=id.slice(1)}if(vjs.players[id]){return vjs.players[id]}else{tag=vjs.el(id)}}else{tag=id}if(!tag||!tag.nodeName){throw new TypeError("The element or ID supplied is not valid. (videojs)")}return tag["player"]||new vjs.Player(tag,options,ready)};var videojs=vjs;vjs.CDN_VERSION="4.0";vjs.ACCESS_PROTOCOL="https:"==document.location.protocol?"https://":"http://";vjs.options={techOrder:["html5","flash"],html5:{},flash:{},width:300,height:150,defaultVolume:0,children:{mediaLoader:{},posterImage:{},textTrackDisplay:{},loadingSpinner:{},bigPlayButton:{},controlBar:{}}};if(vjs.CDN_VERSION!=="GENERATED"+"_CDN_VSN"){videojs.options["flash"]["swf"]=vjs.ACCESS_PROTOCOL+"vjs.zencdn.net/"+vjs.CDN_VERSION+"/video-js.swf"}vjs.players={};vjs.CoreObject=vjs["CoreObject"]=function(){};vjs.CoreObject.extend=function(props){var init,subObj;props=props||{};init=props["init"]||props.init||this.prototype["init"]||this.prototype.init||function(){};subObj=function(){init.apply(this,arguments)};subObj.prototype=vjs.obj.create(this.prototype);subObj.prototype.constructor=subObj;subObj.extend=vjs.CoreObject.extend;subObj.create=vjs.CoreObject.create;for(var name in props){if(props.hasOwnProperty(name)){subObj.prototype[name]=props[name]}}return subObj};vjs.CoreObject.create=function(){var inst=vjs.obj.create(this.prototype);this.apply(inst,arguments);return inst};vjs.on=function(elem,type,fn){var data=vjs.getData(elem);if(!data.handlers)data.handlers={};if(!data.handlers[type])data.handlers[type]=[];if(!fn.guid)fn.guid=vjs.guid++;data.handlers[type].push(fn);if(!data.dispatcher){data.disabled=false;data.dispatcher=function(event){if(data.disabled)return;event=vjs.fixEvent(event);var handlers=data.handlers[event.type];if(handlers){var handlersCopy=handlers.slice(0);for(var m=0,n=handlersCopy.length;m<n;m++){if(event.isImmediatePropagationStopped()){break}else{handlersCopy[m].call(elem,event)}}}}}if(data.handlers[type].length==1){if(document.addEventListener){elem.addEventListener(type,data.dispatcher,false)}else if(document.attachEvent){elem.attachEvent("on"+type,data.dispatcher)}}};vjs.off=function(elem,type,fn){if(!vjs.hasData(elem))return;var data=vjs.getData(elem);if(!data.handlers){return}var removeType=function(t){data.handlers[t]=[];vjs.cleanUpEvents(elem,t)};if(!type){for(var t in data.handlers)removeType(t);return}var handlers=data.handlers[type];if(!handlers)return;if(!fn){removeType(type);return}if(fn.guid){for(var n=0;n<handlers.length;n++){if(handlers[n].guid===fn.guid){handlers.splice(n--,1)}}}vjs.cleanUpEvents(elem,type)};vjs.cleanUpEvents=function(elem,type){var data=vjs.getData(elem);if(data.handlers[type].length===0){delete data.handlers[type];if(document.removeEventListener){elem.removeEventListener(type,data.dispatcher,false)}else if(document.detachEvent){elem.detachEvent("on"+type,data.dispatcher)}}if(vjs.isEmpty(data.handlers)){delete data.handlers;delete data.dispatcher;delete data.disabled}if(vjs.isEmpty(data)){vjs.removeData(elem)}};vjs.fixEvent=function(event){function returnTrue(){return true}function returnFalse(){return false}if(!event||!event.isPropagationStopped){var old=event||window.event;event={};for(var key in old){if(key!=="layerX"&&key!=="layerY"){event[key]=old[key]}}if(!event.target){event.target=event.srcElement||document}event.relatedTarget=event.fromElement===event.target?event.toElement:event.fromElement;event.preventDefault=function(){if(old.preventDefault){old.preventDefault()}event.returnValue=false;event.isDefaultPrevented=returnTrue};event.isDefaultPrevented=returnFalse;event.stopPropagation=function(){if(old.stopPropagation){old.stopPropagation()}event.cancelBubble=true;event.isPropagationStopped=returnTrue};event.isPropagationStopped=returnFalse;event.stopImmediatePropagation=function(){if(old.stopImmediatePropagation){old.stopImmediatePropagation()}event.isImmediatePropagationStopped=returnTrue;event.stopPropagation()};event.isImmediatePropagationStopped=returnFalse;if(event.clientX!=null){var doc=document.documentElement,body=document.body;event.pageX=event.clientX+(doc&&doc.scrollLeft||body&&body.scrollLeft||0)-(doc&&doc.clientLeft||body&&body.clientLeft||0);event.pageY=event.clientY+(doc&&doc.scrollTop||body&&body.scrollTop||0)-(doc&&doc.clientTop||body&&body.clientTop||0)}event.which=event.charCode||event.keyCode;if(event.button!=null){event.button=event.button&1?0:event.button&4?1:event.button&2?2:0}}return event};vjs.trigger=function(elem,event){var elemData=vjs.hasData(elem)?vjs.getData(elem):{};var parent=elem.parentNode||elem.ownerDocument;if(typeof event==="string"){event={type:event,target:elem}}event=vjs.fixEvent(event);if(elemData.dispatcher){elemData.dispatcher.call(elem,event)}if(parent&&!event.isPropagationStopped()){vjs.trigger(parent,event)}else if(!parent&&!event.isDefaultPrevented()){var targetData=vjs.getData(event.target);if(event.target[event.type]){targetData.disabled=true;if(typeof event.target[event.type]==="function"){event.target[event.type]()}targetData.disabled=false}}return!event.isDefaultPrevented()};vjs.one=function(elem,type,fn){vjs.on(elem,type,function(){vjs.off(elem,type,arguments.callee);fn.apply(this,arguments)})};var hasOwnProp=Object.prototype.hasOwnProperty;vjs.createEl=function(tagName,properties){var el=document.createElement(tagName||"div");for(var propName in properties){if(hasOwnProp.call(properties,propName)){if(propName.indexOf("aria-")!==-1||propName=="role"){el.setAttribute(propName,properties[propName])}else{el[propName]=properties[propName]}}}return el};vjs.capitalize=function(string){return string.charAt(0).toUpperCase()+string.slice(1)};vjs.obj={};vjs.obj.create=Object.create||function(obj){function F(){}F.prototype=obj;return new F};vjs.obj.each=function(obj,fn,context){for(var key in obj){if(hasOwnProp.call(obj,key)){fn.call(context||this,key,obj[key])}}};vjs.obj.merge=function(obj1,obj2){if(!obj2){return obj1}for(var key in obj2){if(hasOwnProp.call(obj2,key)){obj1[key]=obj2[key]}}return obj1};vjs.obj.deepMerge=function(obj1,obj2){var key,val1,val2,objDef;objDef="[object Object]";obj1=vjs.obj.copy(obj1);for(key in obj2){if(hasOwnProp.call(obj2,key)){val1=obj1[key];val2=obj2[key];if(vjs.obj.isPlain(val1)&&vjs.obj.isPlain(val2)){obj1[key]=vjs.obj.deepMerge(val1,val2)}else{obj1[key]=obj2[key]}}}return obj1};vjs.obj.copy=function(obj){return vjs.obj.merge({},obj)};vjs.obj.isPlain=function(obj){return!!obj&&typeof obj==="object"&&obj.toString()==="[object Object]"&&obj.constructor===Object};vjs.bind=function(context,fn,uid){if(!fn.guid){fn.guid=vjs.guid++}var ret=function(){return fn.apply(context,arguments)};ret.guid=uid?uid+"_"+fn.guid:fn.guid;return ret};vjs.cache={};vjs.guid=1;vjs.expando="vdata"+(new Date).getTime();vjs.getData=function(el){var id=el[vjs.expando];if(!id){id=el[vjs.expando]=vjs.guid++;vjs.cache[id]={}}return vjs.cache[id]};vjs.hasData=function(el){var id=el[vjs.expando];return!(!id||vjs.isEmpty(vjs.cache[id]))};vjs.removeData=function(el){var id=el[vjs.expando];if(!id){return}delete vjs.cache[id];try{delete el[vjs.expando]}catch(e){if(el.removeAttribute){el.removeAttribute(vjs.expando)}else{el[vjs.expando]=null}}};vjs.isEmpty=function(obj){for(var prop in obj){if(obj[prop]!==null){return false}}return true};vjs.addClass=function(element,classToAdd){if((" "+element.className+" ").indexOf(" "+classToAdd+" ")==-1){element.className=element.className===""?classToAdd:element.className+" "+classToAdd}};vjs.removeClass=function(element,classToRemove){if(element.className.indexOf(classToRemove)==-1){return}var classNames=element.className.split(" ");for(var i=classNames.length-1;i>=0;i--){if(classNames[i]===classToRemove){classNames.splice(i,1)}}element.className=classNames.join(" ")};vjs.TEST_VID=vjs.createEl("video");vjs.USER_AGENT=navigator.userAgent;vjs.IS_IPHONE=!!vjs.USER_AGENT.match(/iPhone/i);vjs.IS_IPAD=!!vjs.USER_AGENT.match(/iPad/i);vjs.IS_IPOD=!!vjs.USER_AGENT.match(/iPod/i);vjs.IS_IOS=vjs.IS_IPHONE||vjs.IS_IPAD||vjs.IS_IPOD;vjs.IOS_VERSION=function(){var match=vjs.USER_AGENT.match(/OS (\d+)_/i);if(match&&match[1]){return match[1]}}();vjs.IS_ANDROID=!!vjs.USER_AGENT.match(/Android.*AppleWebKit/i);vjs.ANDROID_VERSION=function(){var match=vjs.USER_AGENT.match(/Android (\d+)\./i);if(match&&match[1]){return match[1]}return null}();vjs.IS_FIREFOX=function(){return!!vjs.USER_AGENT.match("Firefox")};vjs.getAttributeValues=function(tag){var obj={};var knownBooleans=","+"autoplay,controls,loop,muted,default"+",";if(tag&&tag.attributes&&tag.attributes.length>0){var attrs=tag.attributes;var attrName,attrVal;for(var i=attrs.length-1;i>=0;i--){attrName=attrs[i].name;attrVal=attrs[i].value;if(typeof tag[attrName]==="boolean"||knownBooleans.indexOf(","+attrName+",")!==-1){attrVal=attrVal!==null?true:false}obj[attrName]=attrVal}}return obj};vjs.getComputedDimension=function(el,strCssRule){var strValue="";if(document.defaultView&&document.defaultView.getComputedStyle){strValue=document.defaultView.getComputedStyle(el,"").getPropertyValue(strCssRule)}else if(el.currentStyle){strValue=el["client"+strCssRule.substr(0,1).toUpperCase()+strCssRule.substr(1)]+"px"}return strValue};vjs.insertFirst=function(child,parent){if(parent.firstChild){parent.insertBefore(child,parent.firstChild)}else{parent.appendChild(child)}};vjs.support={};vjs.el=function(id){if(id.indexOf("#")===0){id=id.slice(1)}return document.getElementById(id)};vjs.formatTime=function(seconds,guide){guide=guide||seconds;var s=Math.floor(seconds%60),m=Math.floor(seconds/60%60),h=Math.floor(seconds/3600),gm=Math.floor(guide/60%60),gh=Math.floor(guide/3600);h=h>0||gh>0?h+":":"";m=((h||gm>=10)&&m<10?"0"+m:m)+":";s=s<10?"0"+s:s;return h+m+s};vjs.blockTextSelection=function(){document.body.focus();document.onselectstart=function(){return false}};vjs.unblockTextSelection=function(){document.onselectstart=function(){return true}};vjs.trim=function(string){return string.toString().replace(/^\s+/,"").replace(/\s+$/,"")};vjs.round=function(num,dec){if(!dec){dec=0}return Math.round(num*Math.pow(10,dec))/Math.pow(10,dec)};vjs.createTimeRange=function(start,end){return{length:1,start:function(){return start},end:function(){return end}}};vjs.get=function(url,onSuccess,onError){var local=url.indexOf("file:")===0||window.location.href.indexOf("file:")===0&&url.indexOf("http")===-1;if(typeof XMLHttpRequest==="undefined"){window.XMLHttpRequest=function(){try{return new window.ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(e){}try{return new window.ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(f){}try{return new window.ActiveXObject("Msxml2.XMLHTTP")}catch(g){}throw new Error("This browser does not support XMLHttpRequest.")}}var request=new XMLHttpRequest;try{request.open("GET",url)}catch(e){onError(e)}request.onreadystatechange=function(){if(request.readyState===4){if(request.status===200||local&&request.status===0){onSuccess(request.responseText)}else{if(onError){onError()}}}};try{request.send()}catch(e){if(onError){onError(e)}}};vjs.setLocalStorage=function(key,value){try{var localStorage=window.localStorage||false;if(!localStorage){return}localStorage[key]=value}catch(e){if(e.code==22||e.code==1014){vjs.log("LocalStorage Full (VideoJS)",e)}else{if(e.code==18){vjs.log("LocalStorage not allowed (VideoJS)",e)}else{vjs.log("LocalStorage Error (VideoJS)",e)}}}};vjs.getAbsoluteURL=function(url){if(!url.match(/^https?:\/\//)){url=vjs.createEl("div",{innerHTML:'<a href="'+url+'">x</a>'}).firstChild.href}return url};vjs.log=function(){vjs.log.history=vjs.log.history||[];vjs.log.history.push(arguments);if(window.console){window.console.log(Array.prototype.slice.call(arguments))}};vjs.findPosition=function(el){var box,docEl,body,clientLeft,scrollLeft,left,clientTop,scrollTop,top;if(el.getBoundingClientRect&&el.parentNode){box=el.getBoundingClientRect()}if(!box){return{left:0,top:0}}docEl=document.documentElement;body=document.body;clientLeft=docEl.clientLeft||body.clientLeft||0;scrollLeft=window.pageXOffset||body.scrollLeft;left=box.left+scrollLeft-clientLeft;clientTop=docEl.clientTop||body.clientTop||0;scrollTop=window.pageYOffset||body.scrollTop;top=box.top+scrollTop-clientTop;return{left:left,top:top}};vjs.Component=vjs.CoreObject.extend({init:function(player,options,ready){this.player_=player;this.options_=vjs.obj.copy(this.options_);options=this.options(options);this.id_=options["id"]||(options["el"]&&options["el"]["id"]?options["el"]["id"]:player.id()+"_component_"+vjs.guid++);this.name_=options["name"]||null;this.el_=options["el"]||this.createEl();this.children_=[];this.childIndex_={};this.childNameIndex_={};this.initChildren();this.ready(ready)}});vjs.Component.prototype.dispose=function(){if(this.children_){for(var i=this.children_.length-1;i>=0;i--){if(this.children_[i].dispose){this.children_[i].dispose()}}}this.children_=null;this.childIndex_=null;this.childNameIndex_=null;this.off();if(this.el_.parentNode){this.el_.parentNode.removeChild(this.el_)}vjs.removeData(this.el_);this.el_=null};vjs.Component.prototype.player_;vjs.Component.prototype.player=function(){return this.player_};vjs.Component.prototype.options_;vjs.Component.prototype.options=function(obj){if(obj===undefined)return this.options_;return this.options_=vjs.obj.deepMerge(this.options_,obj)};vjs.Component.prototype.el_;vjs.Component.prototype.createEl=function(tagName,attributes){return vjs.createEl(tagName,attributes)};vjs.Component.prototype.el=function(){return this.el_};vjs.Component.prototype.contentEl_;vjs.Component.prototype.contentEl=function(){return this.contentEl_||this.el_};vjs.Component.prototype.id_;vjs.Component.prototype.id=function(){return this.id_};vjs.Component.prototype.name_;vjs.Component.prototype.name=function(){return this.name_};vjs.Component.prototype.children_;vjs.Component.prototype.children=function(){return this.children_};vjs.Component.prototype.childIndex_;vjs.Component.prototype.getChildById=function(id){return this.childIndex_[id]};vjs.Component.prototype.childNameIndex_;vjs.Component.prototype.getChild=function(name){return this.childNameIndex_[name]};vjs.Component.prototype.addChild=function(child,options){var component,componentClass,componentName,componentId;if(typeof child==="string"){componentName=child;options=options||{};componentClass=options["componentClass"]||vjs.capitalize(componentName);options["name"]=componentName;component=new vjs[componentClass](this.player_||this,options)}else{component=child}this.children_.push(component);if(typeof component.id==="function"){this.childIndex_[component.id()]=component}componentName=componentName||component.name&&component.name();if(componentName){this.childNameIndex_[componentName]=component}if(typeof component["el"]==="function"&&component["el"]()){this.contentEl().appendChild(component["el"]())}return component};vjs.Component.prototype.removeChild=function(component){if(typeof component==="string"){component=this.getChild(component)}if(!component||!this.children_)return;var childFound=false;for(var i=this.children_.length-1;i>=0;i--){if(this.children_[i]===component){childFound=true;this.children_.splice(i,1);break}}if(!childFound)return;this.childIndex_[component.id]=null;this.childNameIndex_[component.name]=null;var compEl=component.el();if(compEl&&compEl.parentNode===this.contentEl()){this.contentEl().removeChild(component.el())}};vjs.Component.prototype.initChildren=function(){var options=this.options_;if(options&&options["children"]){var self=this;vjs.obj.each(options["children"],function(name,opts){if(opts===false)return;var tempAdd=function(){self[name]=self.addChild(name,opts)};if(opts["loadEvent"]){}else{tempAdd()}})}};vjs.Component.prototype.buildCSSClass=function(){return""};vjs.Component.prototype.on=function(type,fn){vjs.on(this.el_,type,vjs.bind(this,fn));return this};vjs.Component.prototype.off=function(type,fn){vjs.off(this.el_,type,fn);return this};vjs.Component.prototype.one=function(type,fn){vjs.one(this.el_,type,vjs.bind(this,fn));return this};vjs.Component.prototype.trigger=function(type,event){vjs.trigger(this.el_,type,event);return this};vjs.Component.prototype.isReady_;vjs.Component.prototype.isReadyOnInitFinish_=true;vjs.Component.prototype.readyQueue_;vjs.Component.prototype.ready=function(fn){if(fn){if(this.isReady_){fn.call(this)}else{if(this.readyQueue_===undefined){this.readyQueue_=[]}this.readyQueue_.push(fn)}}return this};vjs.Component.prototype.triggerReady=function(){this.isReady_=true;var readyQueue=this.readyQueue_;if(readyQueue&&readyQueue.length>0){for(var i=0,j=readyQueue.length;i<j;i++){readyQueue[i].call(this)}this.readyQueue_=[];this.trigger("ready")}};vjs.Component.prototype.addClass=function(classToAdd){vjs.addClass(this.el_,classToAdd);return this};vjs.Component.prototype.removeClass=function(classToRemove){vjs.removeClass(this.el_,classToRemove);return this};vjs.Component.prototype.show=function(){this.el_.style.display="block";return this};vjs.Component.prototype.hide=function(){this.el_.style.display="none";return this};vjs.Component.prototype.fadeIn=function(){this.removeClass("vjs-fade-out");this.addClass("vjs-fade-in");return this};vjs.Component.prototype.fadeOut=function(){this.removeClass("vjs-fade-in");this.addClass("vjs-fade-out");return this};vjs.Component.prototype.lockShowing=function(){this.addClass("vjs-lock-showing");return this};vjs.Component.prototype.unlockShowing=function(){this.removeClass("vjs-lock-showing");return this};vjs.Component.prototype.disable=function(){this.hide();this.show=function(){};this.fadeIn=function(){}};vjs.Component.prototype.width=function(num,skipListeners){return this.dimension("width",num,skipListeners)};vjs.Component.prototype.height=function(num,skipListeners){return this.dimension("height",num,skipListeners)};vjs.Component.prototype.dimensions=function(width,height){return this.width(width,true).height(height)};vjs.Component.prototype.dimension=function(widthOrHeight,num,skipListeners){if(num!==undefined){if((""+num).indexOf("%")!==-1||(""+num).indexOf("px")!==-1){this.el_.style[widthOrHeight]=num}else if(num==="auto"){this.el_.style[widthOrHeight]=""}else{this.el_.style[widthOrHeight]=num+"px"}if(!skipListeners){this.trigger("resize")}return this}if(!this.el_)return 0;var val=this.el_.style[widthOrHeight];var pxIndex=val.indexOf("px");if(pxIndex!==-1){return parseInt(val.slice(0,pxIndex),10)}else{return parseInt(this.el_["offset"+vjs.capitalize(widthOrHeight)],10)}};vjs.Button=vjs.Component.extend({init:function(player,options){vjs.Component.call(this,player,options);var touchstart=false;this.on("touchstart",function(){touchstart=true});this.on("touchmove",function(){touchstart=false});var self=this;this.on("touchend",function(event){if(touchstart){self.onClick(event)}event.preventDefault();event.stopPropagation()});this.on("click",this.onClick);this.on("focus",this.onFocus);this.on("blur",this.onBlur)}});vjs.Button.prototype.createEl=function(type,props){props=vjs.obj.merge({className:this.buildCSSClass(),innerHTML:'<div class="vjs-control-content"><span class="vjs-control-text">'+(this.buttonText||"Need Text")+"</span></div>",role:"button","aria-live":"polite",tabIndex:0},props);return vjs.Component.prototype.createEl.call(this,type,props)};vjs.Button.prototype.buildCSSClass=function(){return"vjs-control "+vjs.Component.prototype.buildCSSClass.call(this)};vjs.Button.prototype.onClick=function(){};vjs.Button.prototype.onFocus=function(){vjs.on(document,"keyup",vjs.bind(this,this.onKeyPress))};vjs.Button.prototype.onKeyPress=function(event){if(event.which==32||event.which==13){event.preventDefault();this.onClick()}};vjs.Button.prototype.onBlur=function(){vjs.off(document,"keyup",vjs.bind(this,this.onKeyPress))};vjs.Slider=vjs.Component.extend({init:function(player,options){vjs.Component.call(this,player,options);this.bar=this.getChild(this.options_["barName"]);this.handle=this.getChild(this.options_["handleName"]);player.on(this.playerEvent,vjs.bind(this,this.update));this.on("mousedown",this.onMouseDown);this.on("touchstart",this.onMouseDown);this.on("focus",this.onFocus);this.on("blur",this.onBlur);this.on("click",this.onClick);this.player_.on("controlsvisible",vjs.bind(this,this.update));player.ready(vjs.bind(this,this.update));this.boundEvents={}}});vjs.Slider.prototype.createEl=function(type,props){props=props||{};props.className=props.className+" vjs-slider";props=vjs.obj.merge({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100,tabIndex:0},props);return vjs.Component.prototype.createEl.call(this,type,props)};vjs.Slider.prototype.onMouseDown=function(event){event.preventDefault();vjs.blockTextSelection();this.boundEvents.move=vjs.bind(this,this.onMouseMove);this.boundEvents.end=vjs.bind(this,this.onMouseUp);vjs.on(document,"mousemove",this.boundEvents.move);vjs.on(document,"mouseup",this.boundEvents.end);vjs.on(document,"touchmove",this.boundEvents.move);vjs.on(document,"touchend",this.boundEvents.end);this.onMouseMove(event)};vjs.Slider.prototype.onMouseUp=function(){vjs.unblockTextSelection();vjs.off(document,"mousemove",this.boundEvents.move,false);vjs.off(document,"mouseup",this.boundEvents.end,false);vjs.off(document,"touchmove",this.boundEvents.move,false);vjs.off(document,"touchend",this.boundEvents.end,false);this.update()};vjs.Slider.prototype.update=function(){if(!this.el_)return;var barProgress,progress=this.getPercent(),handle=this.handle,bar=this.bar;if(isNaN(progress)){progress=0}barProgress=progress;if(handle){var box=this.el_,boxWidth=box.offsetWidth,handleWidth=handle.el().offsetWidth,handlePercent=handleWidth?handleWidth/boxWidth:0,boxAdjustedPercent=1-handlePercent,adjustedProgress=progress*boxAdjustedPercent;barProgress=adjustedProgress+handlePercent/2;handle.el().style.left=vjs.round(adjustedProgress*100,2)+"%"}bar.el().style.width=vjs.round(barProgress*100,2)+"%"};vjs.Slider.prototype.calculateDistance=function(event){var el,box,boxX,boxY,boxW,boxH,handle,pageX,pageY;el=this.el_;box=vjs.findPosition(el);boxW=boxH=el.offsetWidth;handle=this.handle;if(this.options_.vertical){boxY=box.top;if(event.changedTouches){pageY=event.changedTouches[0].pageY}else{pageY=event.pageY}if(handle){var handleH=handle.el().offsetHeight;boxY=boxY+handleH/2;boxH=boxH-handleH}return Math.max(0,Math.min(1,(boxY-pageY+boxH)/boxH))}else{boxX=box.left;if(event.changedTouches){pageX=event.changedTouches[0].pageX}else{pageX=event.pageX}if(handle){var handleW=handle.el().offsetWidth;boxX=boxX+handleW/2;boxW=boxW-handleW}return Math.max(0,Math.min(1,(pageX-boxX)/boxW))}};vjs.Slider.prototype.onFocus=function(){vjs.on(document,"keyup",vjs.bind(this,this.onKeyPress))};vjs.Slider.prototype.onKeyPress=function(event){if(event.which==37){event.preventDefault();this.stepBack()}else if(event.which==39){event.preventDefault();this.stepForward()}};vjs.Slider.prototype.onBlur=function(){vjs.off(document,"keyup",vjs.bind(this,this.onKeyPress))};vjs.Slider.prototype.onClick=function(event){event.stopImmediatePropagation();event.preventDefault()};vjs.SliderHandle=vjs.Component.extend();vjs.SliderHandle.prototype.defaultValue=0;vjs.SliderHandle.prototype.createEl=function(type,props){props=props||{};props.className=props.className+" vjs-slider-handle";props=vjs.obj.merge({innerHTML:'<span class="vjs-control-text">'+this.defaultValue+"</span>"},props);return vjs.Component.prototype.createEl.call(this,"div",props)};vjs.Menu=vjs.Component.extend();vjs.Menu.prototype.addItem=function(component){this.addChild(component);component.on("click",vjs.bind(this,function(){this.unlockShowing()}))};vjs.Menu.prototype.createEl=function(){var contentElType=this.options().contentElType||"ul";this.contentEl_=vjs.createEl(contentElType,{className:"vjs-menu-content"});var el=vjs.Component.prototype.createEl.call(this,"div",{append:this.contentEl_,className:"vjs-menu"});el.appendChild(this.contentEl_);vjs.on(el,"click",function(event){event.preventDefault();event.stopImmediatePropagation()});return el};vjs.MenuItem=vjs.Button.extend({init:function(player,options){vjs.Button.call(this,player,options);this.selected(options["selected"])}});vjs.MenuItem.prototype.createEl=function(type,props){return vjs.Button.prototype.createEl.call(this,"li",vjs.obj.merge({className:"vjs-menu-item",innerHTML:this.options_["label"]},props))};vjs.MenuItem.prototype.onClick=function(){this.selected(true)};vjs.MenuItem.prototype.selected=function(selected){if(selected){this.addClass("vjs-selected");this.el_.setAttribute("aria-selected",true)}else{this.removeClass("vjs-selected");this.el_.setAttribute("aria-selected",false)}};vjs.MenuButton=vjs.Button.extend({init:function(player,options){vjs.Button.call(this,player,options);this.menu=this.createMenu();this.addChild(this.menu);if(this.items&&this.items.length===0){this.hide()}this.on("keyup",this.onKeyPress);this.el_.setAttribute("aria-haspopup",true);this.el_.setAttribute("role","button")}});vjs.MenuButton.prototype.buttonPressed_=false;vjs.MenuButton.prototype.createMenu=function(){var menu=new vjs.Menu(this.player_);if(this.options().title){menu.el().appendChild(vjs.createEl("li",{className:"vjs-menu-title",innerHTML:vjs.capitalize(this.kind_),tabindex:-1}))}this.items=this.createItems();if(this.items){for(var i=0;i<this.items.length;i++){menu.addItem(this.items[i])}}return menu};vjs.MenuButton.prototype.createItems=function(){};vjs.MenuButton.prototype.buildCSSClass=function(){return this.className+" vjs-menu-button "+vjs.Button.prototype.buildCSSClass.call(this)};vjs.MenuButton.prototype.onFocus=function(){};vjs.MenuButton.prototype.onBlur=function(){};vjs.MenuButton.prototype.onClick=function(){this.one("mouseout",vjs.bind(this,function(){this.menu.unlockShowing();this.el_.blur()}));if(this.buttonPressed_){this.unpressButton()}else{this.pressButton()}};vjs.MenuButton.prototype.onKeyPress=function(event){event.preventDefault();if(event.which==32||event.which==13){if(this.buttonPressed_){this.unpressButton()}else{this.pressButton()}}else if(event.which==27){if(this.buttonPressed_){this.unpressButton()}}};vjs.MenuButton.prototype.pressButton=function(){this.buttonPressed_=true;this.menu.lockShowing();this.el_.setAttribute("aria-pressed",true);if(this.items&&this.items.length>0){this.items[0].el().focus()}};vjs.MenuButton.prototype.unpressButton=function(){this.buttonPressed_=false;this.menu.unlockShowing();this.el_.setAttribute("aria-pressed",false)};vjs.Player=vjs.Component.extend({init:function(tag,options,ready){this.tag=tag;options=vjs.obj.merge(this.getTagSettings(tag),options);this.cache_={};this.poster_=options["poster"];this.controls_=options["controls"];if(options["customControlsOnMobile"]!==true&&(vjs.IS_IOS||vjs.IS_ANDROID)){tag.controls=options["controls"];this.controls_=false}else{tag.controls=false}vjs.Component.call(this,this,options,ready);this.one("play",function(e){var fpEvent={type:"firstplay",target:this.el_};var keepGoing=vjs.trigger(this.el_,fpEvent);if(!keepGoing){e.preventDefault();e.stopPropagation();e.stopImmediatePropagation()}});this.on("ended",this.onEnded);this.on("play",this.onPlay);this.on("firstplay",this.onFirstPlay);
this.on("pause",this.onPause);this.on("progress",this.onProgress);this.on("durationchange",this.onDurationChange);this.on("error",this.onError);this.on("fullscreenchange",this.onFullscreenChange);vjs.players[this.id_]=this;if(options["plugins"]){vjs.obj.each(options["plugins"],function(key,val){this[key](val)},this)}}});vjs.Player.prototype.options_=vjs.options;vjs.Player.prototype.dispose=function(){vjs.players[this.id_]=null;if(this.tag&&this.tag["player"]){this.tag["player"]=null}if(this.el_&&this.el_["player"]){this.el_["player"]=null}this.stopTrackingProgress();this.stopTrackingCurrentTime();if(this.tech){this.tech.dispose()}vjs.Component.prototype.dispose.call(this)};vjs.Player.prototype.getTagSettings=function(tag){var options={sources:[],tracks:[]};vjs.obj.merge(options,vjs.getAttributeValues(tag));if(tag.hasChildNodes()){var child,childName,children=tag.childNodes,i=0,j=children.length;for(;i<j;i++){child=children[i];childName=child.nodeName.toLowerCase();if(childName==="source"){options["sources"].push(vjs.getAttributeValues(child))}else if(childName==="track"){options["tracks"].push(vjs.getAttributeValues(child))}}}return options};vjs.Player.prototype.createEl=function(){var el=this.el_=vjs.Component.prototype.createEl.call(this,"div");var tag=this.tag;tag.removeAttribute("width");tag.removeAttribute("height");if(tag.hasChildNodes()){var nrOfChildNodes=tag.childNodes.length;for(var i=0,j=tag.childNodes;i<nrOfChildNodes;i++){if(j[0].nodeName.toLowerCase()=="source"||j[0].nodeName.toLowerCase()=="track"){tag.removeChild(j[0])}}}tag.id=tag.id||"vjs_video_"+vjs.guid++;el.id=tag.id;el.className=tag.className;tag.id+="_html5_api";tag.className="vjs-tech";tag["player"]=el["player"]=this;this.addClass("vjs-paused");this.width(this.options_["width"],true);this.height(this.options_["height"],true);if(tag.parentNode){tag.parentNode.insertBefore(el,tag)}vjs.insertFirst(tag,el);return el};vjs.Player.prototype.loadTech=function(techName,source){if(this.tech){this.unloadTech()}else if(techName!=="Html5"&&this.tag){this.el_.removeChild(this.tag);this.tag.player=null;this.tag=null}this.techName=techName;this.isReady_=false;var techReady=function(){this.player_.triggerReady();if(!this.features.progressEvents){this.player_.manualProgressOn()}if(!this.features.timeupdateEvents){this.player_.manualTimeUpdatesOn()}};var techOptions=vjs.obj.merge({source:source,parentEl:this.el_},this.options_[techName.toLowerCase()]);if(source){if(source.src==this.cache_.src&&this.cache_.currentTime>0){techOptions["startTime"]=this.cache_.currentTime}this.cache_.src=source.src}this.tech=new vjs[techName](this,techOptions);this.tech.ready(techReady)};vjs.Player.prototype.unloadTech=function(){this.isReady_=false;this.tech.dispose();if(this.manualProgress){this.manualProgressOff()}if(this.manualTimeUpdates){this.manualTimeUpdatesOff()}this.tech=false};vjs.Player.prototype.manualProgressOn=function(){this.manualProgress=true;this.trackProgress();this.tech.one("progress",function(){this.features.progressEvents=true;this.player_.manualProgressOff()})};vjs.Player.prototype.manualProgressOff=function(){this.manualProgress=false;this.stopTrackingProgress()};vjs.Player.prototype.trackProgress=function(){this.progressInterval=setInterval(vjs.bind(this,function(){if(this.cache_.bufferEnd<this.buffered().end(0)){this.trigger("progress")}else if(this.bufferedPercent()==1){this.stopTrackingProgress();this.trigger("progress")}}),500)};vjs.Player.prototype.stopTrackingProgress=function(){clearInterval(this.progressInterval)};vjs.Player.prototype.manualTimeUpdatesOn=function(){this.manualTimeUpdates=true;this.on("play",this.trackCurrentTime);this.on("pause",this.stopTrackingCurrentTime);this.tech.one("timeupdate",function(){this.features.timeupdateEvents=true;this.player_.manualTimeUpdatesOff()})};vjs.Player.prototype.manualTimeUpdatesOff=function(){this.manualTimeUpdates=false;this.stopTrackingCurrentTime();this.off("play",this.trackCurrentTime);this.off("pause",this.stopTrackingCurrentTime)};vjs.Player.prototype.trackCurrentTime=function(){if(this.currentTimeInterval){this.stopTrackingCurrentTime()}this.currentTimeInterval=setInterval(vjs.bind(this,function(){this.trigger("timeupdate")}),250)};vjs.Player.prototype.stopTrackingCurrentTime=function(){clearInterval(this.currentTimeInterval)};vjs.Player.prototype.onEnded=function(){if(this.options_["loop"]){this.currentTime(0);this.play()}};vjs.Player.prototype.onPlay=function(){vjs.removeClass(this.el_,"vjs-paused");vjs.addClass(this.el_,"vjs-playing")};vjs.Player.prototype.onFirstPlay=function(){if(this.options_["starttime"]){this.currentTime(this.options_["starttime"])}};vjs.Player.prototype.onPause=function(){vjs.removeClass(this.el_,"vjs-playing");vjs.addClass(this.el_,"vjs-paused")};vjs.Player.prototype.onProgress=function(){if(this.bufferedPercent()==1){this.trigger("loadedalldata")}};vjs.Player.prototype.onDurationChange=function(){this.duration(this.techGet("duration"))};vjs.Player.prototype.onError=function(e){vjs.log("Video Error",e)};vjs.Player.prototype.onFullscreenChange=function(){if(this.isFullScreen){this.addClass("vjs-fullscreen")}else{this.removeClass("vjs-fullscreen")}};vjs.Player.prototype.cache_;vjs.Player.prototype.getCache=function(){return this.cache_};vjs.Player.prototype.techCall=function(method,arg){if(this.tech&&this.tech.isReady_){this.tech.ready(function(){this[method](arg)})}else{try{this.tech[method](arg)}catch(e){vjs.log(e);throw e}}};vjs.Player.prototype.techGet=function(method){if(this.tech.isReady_){try{return this.tech[method]()}catch(e){if(this.tech[method]===undefined){vjs.log("Video.js: "+method+" method not defined for "+this.techName+" playback technology.",e)}else{if(e.name=="TypeError"){vjs.log("Video.js: "+method+" unavailable on "+this.techName+" playback technology element.",e);this.tech.isReady_=false}else{vjs.log(e)}}throw e}}return};vjs.Player.prototype.play=function(){this.techCall("play");return this};vjs.Player.prototype.pause=function(){this.techCall("pause");return this};vjs.Player.prototype.paused=function(){return this.techGet("paused")===false?false:true};vjs.Player.prototype.currentTime=function(seconds){if(seconds!==undefined){this.cache_.lastSetCurrentTime=seconds;this.techCall("setCurrentTime",seconds);if(this.manualTimeUpdates){this.trigger("timeupdate")}return this}return this.cache_.currentTime=this.techGet("currentTime")||0};vjs.Player.prototype.duration=function(seconds){if(seconds!==undefined){this.cache_.duration=parseFloat(seconds);return this}return this.cache_.duration};vjs.Player.prototype.remainingTime=function(){return this.duration()-this.currentTime()};vjs.Player.prototype.buffered=function(){var buffered=this.techGet("buffered"),start=0,end=this.cache_.bufferEnd=this.cache_.bufferEnd||0;if(buffered&&buffered.length>0&&buffered.end(0)!==end){end=buffered.end(0);this.cache_.bufferEnd=end}return vjs.createTimeRange(start,end)};vjs.Player.prototype.bufferedPercent=function(){return this.duration()?this.buffered().end(0)/this.duration():0};vjs.Player.prototype.volume=function(percentAsDecimal){var vol;if(percentAsDecimal!==undefined){vol=Math.max(0,Math.min(1,parseFloat(percentAsDecimal)));this.cache_.volume=vol;this.techCall("setVolume",vol);vjs.setLocalStorage("volume",vol);return this}vol=parseFloat(this.techGet("volume"));return isNaN(vol)?1:vol};vjs.Player.prototype.muted=function(muted){if(muted!==undefined){this.techCall("setMuted",muted);return this}return this.techGet("muted")||false};vjs.Player.prototype.supportsFullScreen=function(){return this.techGet("supportsFullScreen")||false};vjs.Player.prototype.requestFullScreen=function(){var requestFullScreen=vjs.support.requestFullScreen;this.isFullScreen=true;if(requestFullScreen){vjs.on(document,requestFullScreen.eventName,vjs.bind(this,function(e){this.isFullScreen=document[requestFullScreen.isFullScreen];if(this.isFullScreen===false){vjs.off(document,requestFullScreen.eventName,arguments.callee)}this.trigger("fullscreenchange")}));this.el_[requestFullScreen.requestFn]()}else if(this.tech.supportsFullScreen()){this.techCall("enterFullScreen")}else{this.enterFullWindow();this.trigger("fullscreenchange")}return this};vjs.Player.prototype.cancelFullScreen=function(){var requestFullScreen=vjs.support.requestFullScreen;this.isFullScreen=false;if(requestFullScreen){document[requestFullScreen.cancelFn]()}else if(this.tech.supportsFullScreen()){this.techCall("exitFullScreen")}else{this.exitFullWindow();this.trigger("fullscreenchange")}return this};vjs.Player.prototype.enterFullWindow=function(){this.isFullWindow=true;this.docOrigOverflow=document.documentElement.style.overflow;vjs.on(document,"keydown",vjs.bind(this,this.fullWindowOnEscKey));document.documentElement.style.overflow="hidden";vjs.addClass(document.body,"vjs-full-window");this.trigger("enterFullWindow")};vjs.Player.prototype.fullWindowOnEscKey=function(event){if(event.keyCode===27){if(this.isFullScreen===true){this.cancelFullScreen()}else{this.exitFullWindow()}}};vjs.Player.prototype.exitFullWindow=function(){this.isFullWindow=false;vjs.off(document,"keydown",this.fullWindowOnEscKey);document.documentElement.style.overflow=this.docOrigOverflow;vjs.removeClass(document.body,"vjs-full-window");this.trigger("exitFullWindow")};vjs.Player.prototype.selectSource=function(sources){for(var i=0,j=this.options_["techOrder"];i<j.length;i++){var techName=vjs.capitalize(j[i]),tech=vjs[techName];if(tech.isSupported()){for(var a=0,b=sources;a<b.length;a++){var source=b[a];if(tech["canPlaySource"](source)){return{source:source,tech:techName}}}}}return false};vjs.Player.prototype.src=function(source){if(source instanceof Array){var sourceTech=this.selectSource(source),techName;if(sourceTech){source=sourceTech.source;techName=sourceTech.tech;if(techName==this.techName){this.src(source)}else{this.loadTech(techName,source)}}else{this.el_.appendChild(vjs.createEl("p",{innerHTML:'Sorry, no compatible source and playback technology were found for this video. Try using another browser like <a href="http://bit.ly/ccMUEC">Chrome</a> or download the latest <a href="http://adobe.ly/mwfN1">Adobe Flash Player</a>.'}))}}else if(source instanceof Object){if(vjs[this.techName]["canPlaySource"](source)){this.src(source.src)}else{this.src([source])}}else{this.cache_.src=source;if(!this.isReady_){this.ready(function(){this.src(source)})}else{this.techCall("src",source);if(this.options_["preload"]=="auto"){this.load()}if(this.options_["autoplay"]){this.play()}}}return this};vjs.Player.prototype.load=function(){this.techCall("load");return this};vjs.Player.prototype.currentSrc=function(){return this.techGet("currentSrc")||this.cache_.src||""};vjs.Player.prototype.preload=function(value){if(value!==undefined){this.techCall("setPreload",value);this.options_["preload"]=value;return this}return this.techGet("preload")};vjs.Player.prototype.autoplay=function(value){if(value!==undefined){this.techCall("setAutoplay",value);this.options_["autoplay"]=value;return this}return this.techGet("autoplay",value)};vjs.Player.prototype.loop=function(value){if(value!==undefined){this.techCall("setLoop",value);this.options_["loop"]=value;return this}return this.techGet("loop")};vjs.Player.prototype.poster_;vjs.Player.prototype.poster=function(src){if(src!==undefined){this.poster_=src}return this.poster_};vjs.Player.prototype.controls_;vjs.Player.prototype.controls=function(controls){if(controls!==undefined){if(this.controls_!==controls){this.controls_=!!controls;this.trigger("controlschange")}}return this.controls_};vjs.Player.prototype.error=function(){return this.techGet("error")};vjs.Player.prototype.ended=function(){return this.techGet("ended")};!function(){var prefix,requestFS,div;div=document.createElement("div");requestFS={};if(div.cancelFullscreen!==undefined){requestFS.requestFn="requestFullscreen";requestFS.cancelFn="exitFullscreen";requestFS.eventName="fullscreenchange";requestFS.isFullScreen="fullScreen"}else{if(document.mozCancelFullScreen){prefix="moz";requestFS.isFullScreen=prefix+"FullScreen"}else{prefix="webkit";requestFS.isFullScreen=prefix+"IsFullScreen"}if(div[prefix+"RequestFullScreen"]){requestFS.requestFn=prefix+"RequestFullScreen";requestFS.cancelFn=prefix+"CancelFullScreen"}requestFS.eventName=prefix+"fullscreenchange"}if(document[requestFS.cancelFn]){vjs.support.requestFullScreen=requestFS}}();vjs.ControlBar=vjs.Component.extend({init:function(player,options){vjs.Component.call(this,player,options);if(!player.controls()){this.disable()}player.one("play",vjs.bind(this,function(){var touchstart,fadeIn=vjs.bind(this,this.fadeIn),fadeOut=vjs.bind(this,this.fadeOut);this.fadeOut();if(!("ontouchstart"in window)){this.player_.on("mouseover",fadeIn);this.player_.on("mouseout",fadeOut);this.player_.on("pause",vjs.bind(this,this.lockShowing));this.player_.on("play",vjs.bind(this,this.unlockShowing))}touchstart=false;this.player_.on("touchstart",function(){touchstart=true});this.player_.on("touchmove",function(){touchstart=false});this.player_.on("touchend",vjs.bind(this,function(event){var idx;if(touchstart){idx=this.el().className.search("fade-in");if(idx!==-1){this.fadeOut()}else{this.fadeIn()}}touchstart=false;if(!this.player_.paused()){event.preventDefault()}}))}))}});vjs.ControlBar.prototype.options_={loadEvent:"play",children:{playToggle:{},currentTimeDisplay:{},timeDivider:{},durationDisplay:{},remainingTimeDisplay:{},progressControl:{},fullscreenToggle:{},volumeControl:{},muteToggle:{}}};vjs.ControlBar.prototype.createEl=function(){return vjs.createEl("div",{className:"vjs-control-bar"})};vjs.ControlBar.prototype.fadeIn=function(){vjs.Component.prototype.fadeIn.call(this);this.player_.trigger("controlsvisible")};vjs.ControlBar.prototype.fadeOut=function(){vjs.Component.prototype.fadeOut.call(this);this.player_.trigger("controlshidden")};vjs.PlayToggle=vjs.Button.extend({init:function(player,options){vjs.Button.call(this,player,options);player.on("play",vjs.bind(this,this.onPlay));player.on("pause",vjs.bind(this,this.onPause))}});vjs.PlayToggle.prototype.buttonText="Play";vjs.PlayToggle.prototype.buildCSSClass=function(){return"vjs-play-control "+vjs.Button.prototype.buildCSSClass.call(this)};vjs.PlayToggle.prototype.onClick=function(){if(this.player_.paused()){this.player_.play()}else{this.player_.pause()}};vjs.PlayToggle.prototype.onPlay=function(){vjs.removeClass(this.el_,"vjs-paused");vjs.addClass(this.el_,"vjs-playing");this.el_.children[0].children[0].innerHTML="Pause"};vjs.PlayToggle.prototype.onPause=function(){vjs.removeClass(this.el_,"vjs-playing");vjs.addClass(this.el_,"vjs-paused");this.el_.children[0].children[0].innerHTML="Play"};vjs.CurrentTimeDisplay=vjs.Component.extend({init:function(player,options){vjs.Component.call(this,player,options);player.on("timeupdate",vjs.bind(this,this.updateContent))}});vjs.CurrentTimeDisplay.prototype.createEl=function(){var el=vjs.Component.prototype.createEl.call(this,"div",{className:"vjs-current-time vjs-time-controls vjs-control"});this.content=vjs.createEl("div",{className:"vjs-current-time-display",innerHTML:'<span class="vjs-control-text">Current Time </span>'+"0:00","aria-live":"off"});el.appendChild(vjs.createEl("div").appendChild(this.content));return el};vjs.CurrentTimeDisplay.prototype.updateContent=function(){var time=this.player_.scrubbing?this.player_.getCache().currentTime:this.player_.currentTime();this.content.innerHTML='<span class="vjs-control-text">Current Time </span>'+vjs.formatTime(time,this.player_.duration())};vjs.DurationDisplay=vjs.Component.extend({init:function(player,options){vjs.Component.call(this,player,options);player.on("timeupdate",vjs.bind(this,this.updateContent))}});vjs.DurationDisplay.prototype.createEl=function(){var el=vjs.Component.prototype.createEl.call(this,"div",{className:"vjs-duration vjs-time-controls vjs-control"});this.content=vjs.createEl("div",{className:"vjs-duration-display",innerHTML:'<span class="vjs-control-text">Duration Time </span>'+"0:00","aria-live":"off"});el.appendChild(vjs.createEl("div").appendChild(this.content));return el};vjs.DurationDisplay.prototype.updateContent=function(){if(this.player_.duration()){this.content.innerHTML='<span class="vjs-control-text">Duration Time </span>'+vjs.formatTime(this.player_.duration())}};vjs.TimeDivider=vjs.Component.extend({init:function(player,options){vjs.Component.call(this,player,options)}});vjs.TimeDivider.prototype.createEl=function(){return vjs.Component.prototype.createEl.call(this,"div",{className:"vjs-time-divider",innerHTML:"<div><span>/</span></div>"})};vjs.RemainingTimeDisplay=vjs.Component.extend({init:function(player,options){vjs.Component.call(this,player,options);player.on("timeupdate",vjs.bind(this,this.updateContent))}});vjs.RemainingTimeDisplay.prototype.createEl=function(){var el=vjs.Component.prototype.createEl.call(this,"div",{className:"vjs-remaining-time vjs-time-controls vjs-control"});this.content=vjs.createEl("div",{className:"vjs-remaining-time-display",innerHTML:'<span class="vjs-control-text">Remaining Time </span>'+"-0:00","aria-live":"off"});el.appendChild(vjs.createEl("div").appendChild(this.content));return el};vjs.RemainingTimeDisplay.prototype.updateContent=function(){if(this.player_.duration()){if(this.player_.duration()){this.content.innerHTML='<span class="vjs-control-text">Remaining Time </span>'+"-"+vjs.formatTime(this.player_.remainingTime())}}};vjs.FullscreenToggle=vjs.Button.extend({init:function(player,options){vjs.Button.call(this,player,options)}});vjs.FullscreenToggle.prototype.buttonText="Fullscreen";vjs.FullscreenToggle.prototype.buildCSSClass=function(){return"vjs-fullscreen-control "+vjs.Button.prototype.buildCSSClass.call(this)};vjs.FullscreenToggle.prototype.onClick=function(){if(!this.player_.isFullScreen){this.player_.requestFullScreen();this.el_.children[0].children[0].innerHTML="Non-Fullscreen"}else{this.player_.cancelFullScreen();this.el_.children[0].children[0].innerHTML="Fullscreen"}};vjs.ProgressControl=vjs.Component.extend({init:function(player,options){vjs.Component.call(this,player,options)}});vjs.ProgressControl.prototype.options_={children:{seekBar:{}}};vjs.ProgressControl.prototype.createEl=function(){return vjs.Component.prototype.createEl.call(this,"div",{className:"vjs-progress-control vjs-control"})};vjs.SeekBar=vjs.Slider.extend({init:function(player,options){vjs.Slider.call(this,player,options);player.on("timeupdate",vjs.bind(this,this.updateARIAAttributes));player.ready(vjs.bind(this,this.updateARIAAttributes))}});vjs.SeekBar.prototype.options_={children:{loadProgressBar:{},playProgressBar:{},seekHandle:{}},barName:"playProgressBar",handleName:"seekHandle"};vjs.SeekBar.prototype.playerEvent="timeupdate";vjs.SeekBar.prototype.createEl=function(){return vjs.Slider.prototype.createEl.call(this,"div",{className:"vjs-progress-holder","aria-label":"video progress bar"})};vjs.SeekBar.prototype.updateARIAAttributes=function(){var time=this.player_.scrubbing?this.player_.getCache().currentTime:this.player_.currentTime();this.el_.setAttribute("aria-valuenow",vjs.round(this.getPercent()*100,2));this.el_.setAttribute("aria-valuetext",vjs.formatTime(time,this.player_.duration()))};vjs.SeekBar.prototype.getPercent=function(){return this.player_.currentTime()/this.player_.duration()};vjs.SeekBar.prototype.onMouseDown=function(event){vjs.Slider.prototype.onMouseDown.call(this,event);this.player_.scrubbing=true;this.videoWasPlaying=!this.player_.paused();this.player_.pause()};vjs.SeekBar.prototype.onMouseMove=function(event){var newTime=this.calculateDistance(event)*this.player_.duration();if(newTime==this.player_.duration()){newTime=newTime-.1}this.player_.currentTime(newTime)};vjs.SeekBar.prototype.onMouseUp=function(event){vjs.Slider.prototype.onMouseUp.call(this,event);this.player_.scrubbing=false;if(this.videoWasPlaying){this.player_.play()}};vjs.SeekBar.prototype.stepForward=function(){this.player_.currentTime(this.player_.currentTime()+5)};vjs.SeekBar.prototype.stepBack=function(){this.player_.currentTime(this.player_.currentTime()-5)};vjs.LoadProgressBar=vjs.Component.extend({init:function(player,options){vjs.Component.call(this,player,options);player.on("progress",vjs.bind(this,this.update))}});vjs.LoadProgressBar.prototype.createEl=function(){return vjs.Component.prototype.createEl.call(this,"div",{className:"vjs-load-progress",innerHTML:'<span class="vjs-control-text">Loaded: 0%</span>'})};vjs.LoadProgressBar.prototype.update=function(){if(this.el_.style){this.el_.style.width=vjs.round(this.player_.bufferedPercent()*100,2)+"%"}};vjs.PlayProgressBar=vjs.Component.extend({init:function(player,options){vjs.Component.call(this,player,options)}});vjs.PlayProgressBar.prototype.createEl=function(){return vjs.Component.prototype.createEl.call(this,"div",{className:"vjs-play-progress",innerHTML:'<span class="vjs-control-text">Progress: 0%</span>'})};vjs.SeekHandle=vjs.SliderHandle.extend();vjs.SeekHandle.prototype.defaultValue="00:00";vjs.SeekHandle.prototype.createEl=function(){return vjs.SliderHandle.prototype.createEl.call(this,"div",{className:"vjs-seek-handle"})};vjs.VolumeControl=vjs.Component.extend({init:function(player,options){vjs.Component.call(this,player,options);if(player.tech&&player.tech.features&&player.tech.features.volumeControl===false){this.addClass("vjs-hidden")}player.on("loadstart",vjs.bind(this,function(){if(player.tech.features&&player.tech.features.volumeControl===false){this.addClass("vjs-hidden")}else{this.removeClass("vjs-hidden")}}))}});vjs.VolumeControl.prototype.options_={children:{volumeBar:{}}};vjs.VolumeControl.prototype.createEl=function(){return vjs.Component.prototype.createEl.call(this,"div",{className:"vjs-volume-control vjs-control"})};vjs.VolumeBar=vjs.Slider.extend({init:function(player,options){vjs.Slider.call(this,player,options);player.on("volumechange",vjs.bind(this,this.updateARIAAttributes));player.ready(vjs.bind(this,this.updateARIAAttributes));setTimeout(vjs.bind(this,this.update),0)}});vjs.VolumeBar.prototype.updateARIAAttributes=function(){this.el_.setAttribute("aria-valuenow",vjs.round(this.player_.volume()*100,2));this.el_.setAttribute("aria-valuetext",vjs.round(this.player_.volume()*100,2)+"%")};vjs.VolumeBar.prototype.options_={children:{volumeLevel:{},volumeHandle:{}},barName:"volumeLevel",handleName:"volumeHandle"};vjs.VolumeBar.prototype.playerEvent="volumechange";vjs.VolumeBar.prototype.createEl=function(){return vjs.Slider.prototype.createEl.call(this,"div",{className:"vjs-volume-bar","aria-label":"volume level"})};vjs.VolumeBar.prototype.onMouseMove=function(event){this.player_.volume(this.calculateDistance(event))};vjs.VolumeBar.prototype.getPercent=function(){if(this.player_.muted()){return 0}else{return this.player_.volume()}};vjs.VolumeBar.prototype.stepForward=function(){this.player_.volume(this.player_.volume()+.1)};vjs.VolumeBar.prototype.stepBack=function(){this.player_.volume(this.player_.volume()-.1)};vjs.VolumeLevel=vjs.Component.extend({init:function(player,options){vjs.Component.call(this,player,options)}});vjs.VolumeLevel.prototype.createEl=function(){return vjs.Component.prototype.createEl.call(this,"div",{className:"vjs-volume-level",innerHTML:'<span class="vjs-control-text"></span>'})};vjs.VolumeHandle=vjs.SliderHandle.extend();vjs.VolumeHandle.prototype.defaultValue="00:00";vjs.VolumeHandle.prototype.createEl=function(){return vjs.SliderHandle.prototype.createEl.call(this,"div",{className:"vjs-volume-handle"})};vjs.MuteToggle=vjs.Button.extend({init:function(player,options){vjs.Button.call(this,player,options);player.on("volumechange",vjs.bind(this,this.update));if(player.tech&&player.tech.features&&player.tech.features.volumeControl===false){this.addClass("vjs-hidden")}player.on("loadstart",vjs.bind(this,function(){if(player.tech.features&&player.tech.features.volumeControl===false){this.addClass("vjs-hidden")}else{this.removeClass("vjs-hidden")}}))}});vjs.MuteToggle.prototype.createEl=function(){return vjs.Button.prototype.createEl.call(this,"div",{className:"vjs-mute-control vjs-control",innerHTML:'<div><span class="vjs-control-text">Mute</span></div>'})};vjs.MuteToggle.prototype.onClick=function(){this.player_.muted(this.player_.muted()?false:true)};vjs.MuteToggle.prototype.update=function(){var vol=this.player_.volume(),level=3;if(vol===0||this.player_.muted()){level=0}else if(vol<.33){level=1}else if(vol<.67){level=2}if(this.player_.muted()){if(this.el_.children[0].children[0].innerHTML!="Unmute"){this.el_.children[0].children[0].innerHTML="Unmute"}}else{if(this.el_.children[0].children[0].innerHTML!="Mute"){this.el_.children[0].children[0].innerHTML="Mute"}}for(var i=0;i<4;i++){vjs.removeClass(this.el_,"vjs-vol-"+i)}vjs.addClass(this.el_,"vjs-vol-"+level)};vjs.VolumeMenuButton=vjs.MenuButton.extend({init:function(player,options){vjs.MenuButton.call(this,player,options);player.on("volumechange",vjs.bind(this,this.update));if(player.tech&&player.tech.features&&player.tech.features.volumeControl===false){this.addClass("vjs-hidden")}player.on("loadstart",vjs.bind(this,function(){if(player.tech.features&&player.tech.features.volumeControl===false){this.addClass("vjs-hidden")}else{this.removeClass("vjs-hidden")}}));this.addClass("vjs-menu-button")}});vjs.VolumeMenuButton.prototype.createMenu=function(){var menu=new vjs.Menu(this.player_,{contentElType:"div"});var vc=new vjs.VolumeBar(this.player_,vjs.obj.merge({vertical:true},this.options_.volumeBar));menu.addChild(vc);return menu};vjs.VolumeMenuButton.prototype.onClick=function(){vjs.MuteToggle.prototype.onClick.call(this);vjs.MenuButton.prototype.onClick.call(this)};vjs.VolumeMenuButton.prototype.createEl=function(){return vjs.Button.prototype.createEl.call(this,"div",{className:"vjs-volume-menu-button vjs-menu-button vjs-control",innerHTML:'<div><span class="vjs-control-text">Mute</span></div>'})};vjs.VolumeMenuButton.prototype.update=vjs.MuteToggle.prototype.update;vjs.PosterImage=vjs.Button.extend({init:function(player,options){vjs.Button.call(this,player,options);if(!player.poster()||!player.controls()){this.hide()}player.on("play",vjs.bind(this,this.hide))}});vjs.PosterImage.prototype.createEl=function(){var el=vjs.createEl("div",{className:"vjs-poster",tabIndex:-1}),poster=this.player_.poster();if(poster){if("backgroundSize"in el.style){el.style.backgroundImage='url("'+poster+'")'}else{el.appendChild(vjs.createEl("img",{src:poster}))}}return el};vjs.PosterImage.prototype.onClick=function(){this.player_.play()};vjs.LoadingSpinner=vjs.Component.extend({init:function(player,options){vjs.Component.call(this,player,options);player.on("canplay",vjs.bind(this,this.hide));player.on("canplaythrough",vjs.bind(this,this.hide));player.on("playing",vjs.bind(this,this.hide));player.on("seeked",vjs.bind(this,this.hide));player.on("seeking",vjs.bind(this,this.show));player.on("seeked",vjs.bind(this,this.hide));player.on("error",vjs.bind(this,this.show));player.on("waiting",vjs.bind(this,this.show))}});vjs.LoadingSpinner.prototype.createEl=function(){return vjs.Component.prototype.createEl.call(this,"div",{className:"vjs-loading-spinner"})};vjs.BigPlayButton=vjs.Button.extend({init:function(player,options){vjs.Button.call(this,player,options);if(!player.controls()){this.hide()}player.on("play",vjs.bind(this,this.hide))}});vjs.BigPlayButton.prototype.createEl=function(){return vjs.Button.prototype.createEl.call(this,"div",{className:"vjs-big-play-button",innerHTML:"<span></span>","aria-label":"play video"})};vjs.BigPlayButton.prototype.onClick=function(){this.player_.play()};vjs.MediaTechController=vjs.Component.extend({init:function(player,options,ready){vjs.Component.call(this,player,options,ready)}});vjs.MediaTechController.prototype.onClick=function(){if(vjs.IS_ANDROID){return function(){}}else{return function(){if(this.player_.controls()){if(this.player_.paused()){this.player_.play()}else{this.player_.pause()}}}}}();vjs.MediaTechController.prototype.features={volumeControl:true,fullscreenResize:false,progressEvents:false,timeupdateEvents:false};vjs.media={};vjs.media.ApiMethods="play,pause,paused,currentTime,setCurrentTime,duration,buffered,volume,setVolume,muted,setMuted,width,height,supportsFullScreen,enterFullScreen,src,load,currentSrc,preload,setPreload,autoplay,setAutoplay,loop,setLoop,error,networkState,readyState,seeking,initialTime,startOffsetTime,played,seekable,ended,videoTracks,audioTracks,videoWidth,videoHeight,textTracks,defaultPlaybackRate,playbackRate,mediaGroup,controller,controls,defaultMuted".split(",");function createMethod(methodName){return function(){throw new Error('The "'+methodName+"\" method is not available on the playback technology's API")}}for(var i=vjs.media.ApiMethods.length-1;i>=0;i--){var methodName=vjs.media.ApiMethods[i];vjs.MediaTechController.prototype[vjs.media.ApiMethods[i]]=createMethod(methodName)}vjs.Html5=vjs.MediaTechController.extend({init:function(player,options,ready){this.features.volumeControl=vjs.Html5.canControlVolume();this.features.movingMediaElementInDOM=!vjs.IS_IOS;this.features.fullscreenResize=true;vjs.MediaTechController.call(this,player,options,ready);var source=options["source"];if(source&&this.el_.currentSrc==source.src){player.trigger("loadstart")}else if(source){this.el_.src=source.src}player.ready(function(){if(this.options_["autoplay"]&&this.paused()){this.tag.poster=null;this.play()}});this.on("click",this.onClick);this.setupTriggers();this.triggerReady()}});vjs.Html5.prototype.dispose=function(){vjs.MediaTechController.prototype.dispose.call(this)};vjs.Html5.prototype.createEl=function(){var player=this.player_,el=player.tag,newEl;if(!el||this.features.movingMediaElementInDOM===false){if(el){player.el().removeChild(el);el=el.cloneNode(false)}else{el=vjs.createEl("video",{id:player.id()+"_html5_api",className:"vjs-tech"})}el["player"]=player;vjs.insertFirst(el,player.el())}var attrs=["autoplay","preload","loop","muted"];for(var i=attrs.length-1;i>=0;i--){var attr=attrs[i];if(player.options_[attr]!==null){el[attr]=player.options_[attr]}}return el};vjs.Html5.prototype.setupTriggers=function(){for(var i=vjs.Html5.Events.length-1;i>=0;i--){vjs.on(this.el_,vjs.Html5.Events[i],vjs.bind(this.player_,this.eventHandler))}};vjs.Html5.prototype.eventHandler=function(e){this.trigger(e);e.stopPropagation()};vjs.Html5.prototype.play=function(){this.el_.play()};vjs.Html5.prototype.pause=function(){this.el_.pause()};vjs.Html5.prototype.paused=function(){return this.el_.paused};vjs.Html5.prototype.currentTime=function(){return this.el_.currentTime};vjs.Html5.prototype.setCurrentTime=function(seconds){try{this.el_.currentTime=seconds}catch(e){vjs.log(e,"Video is not ready. (Video.js)")}};vjs.Html5.prototype.duration=function(){return this.el_.duration||0};vjs.Html5.prototype.buffered=function(){return this.el_.buffered};vjs.Html5.prototype.volume=function(){return this.el_.volume};vjs.Html5.prototype.setVolume=function(percentAsDecimal){this.el_.volume=percentAsDecimal};vjs.Html5.prototype.muted=function(){return this.el_.muted};vjs.Html5.prototype.setMuted=function(muted){this.el_.muted=muted};vjs.Html5.prototype.width=function(){return this.el_.offsetWidth};vjs.Html5.prototype.height=function(){return this.el_.offsetHeight};vjs.Html5.prototype.supportsFullScreen=function(){if(typeof this.el_.webkitEnterFullScreen=="function"){if(/Android/.test(vjs.USER_AGENT)||!/Chrome|Mac OS X 10.5/.test(vjs.USER_AGENT)){return true}}return false};vjs.Html5.prototype.enterFullScreen=function(){var video=this.el_;if(video.paused&&video.networkState<=video.HAVE_METADATA){this.el_.play();setTimeout(function(){video.pause();video.webkitEnterFullScreen()},0)}else{video.webkitEnterFullScreen()}};vjs.Html5.prototype.exitFullScreen=function(){this.el_.webkitExitFullScreen()};vjs.Html5.prototype.src=function(src){this.el_.src=src};vjs.Html5.prototype.load=function(){this.el_.load()};vjs.Html5.prototype.currentSrc=function(){return this.el_.currentSrc};vjs.Html5.prototype.preload=function(){return this.el_.preload
};vjs.Html5.prototype.setPreload=function(val){this.el_.preload=val};vjs.Html5.prototype.autoplay=function(){return this.el_.autoplay};vjs.Html5.prototype.setAutoplay=function(val){this.el_.autoplay=val};vjs.Html5.prototype.loop=function(){return this.el_.loop};vjs.Html5.prototype.setLoop=function(val){this.el_.loop=val};vjs.Html5.prototype.error=function(){return this.el_.error};vjs.Html5.prototype.seeking=function(){return this.el_.seeking};vjs.Html5.prototype.ended=function(){return this.el_.ended};vjs.Html5.prototype.defaultMuted=function(){return this.el_.defaultMuted};vjs.Html5.isSupported=function(){return!!document.createElement("video").canPlayType};vjs.Html5.canPlaySource=function(srcObj){return!!document.createElement("video").canPlayType(srcObj.type)};vjs.Html5.canControlVolume=function(){var volume=vjs.TEST_VID.volume;vjs.TEST_VID.volume=volume/2+.1;return volume!==vjs.TEST_VID.volume};vjs.Html5.Events="loadstart,suspend,abort,error,emptied,stalled,loadedmetadata,loadeddata,canplay,canplaythrough,playing,waiting,seeking,seeked,ended,durationchange,timeupdate,progress,play,pause,ratechange,volumechange".split(",");if(vjs.IS_ANDROID){if(vjs.ANDROID_VERSION<3){document.createElement("video").constructor.prototype.canPlayType=function(type){return type&&type.toLowerCase().indexOf("video/mp4")!=-1?"maybe":""}}}vjs.Flash=vjs.MediaTechController.extend({init:function(player,options,ready){vjs.MediaTechController.call(this,player,options,ready);var source=options["source"],parentEl=options["parentEl"],placeHolder=this.el_=vjs.createEl("div",{id:player.id()+"_temp_flash"}),objId=player.id()+"_flash_api",playerOptions=player.options_,flashVars=vjs.obj.merge({readyFunction:"videojs.Flash.onReady",eventProxyFunction:"videojs.Flash.onEvent",errorEventProxyFunction:"videojs.Flash.onError",autoplay:playerOptions.autoplay,preload:playerOptions.preload,loop:playerOptions.loop,muted:playerOptions.muted},options["flashVars"]),params=vjs.obj.merge({wmode:"opaque",bgcolor:"#000000"},options["params"]),attributes=vjs.obj.merge({id:objId,name:objId,"class":"vjs-tech"},options["attributes"]);if(source){flashVars["src"]=encodeURIComponent(vjs.getAbsoluteURL(source.src))}vjs.insertFirst(placeHolder,parentEl);if(options["startTime"]){this.ready(function(){this.load();this.play();this.currentTime(options["startTime"])})}if(options["iFrameMode"]===true&&!vjs.IS_FIREFOX){var iFrm=vjs.createEl("iframe",{id:objId+"_iframe",name:objId+"_iframe",className:"vjs-tech",scrolling:"no",marginWidth:0,marginHeight:0,frameBorder:0});flashVars["readyFunction"]="ready";flashVars["eventProxyFunction"]="events";flashVars["errorEventProxyFunction"]="errors";vjs.on(iFrm,"load",vjs.bind(this,function(){var iDoc,iWin=iFrm.contentWindow;iDoc=iFrm.contentDocument?iFrm.contentDocument:iFrm.contentWindow.document;iDoc.write(vjs.Flash.getEmbedCode(options["swf"],flashVars,params,attributes));iWin["player"]=this.player_;iWin["ready"]=vjs.bind(this.player_,function(currSwf){var el=iDoc.getElementById(currSwf),player=this,tech=player.tech;tech.el_=el;vjs.on(el,"click",tech.bind(tech.onClick));vjs.Flash.checkReady(tech)});iWin["events"]=vjs.bind(this.player_,function(swfID,eventName){var player=this;if(player&&player.techName==="flash"){player.trigger(eventName)}});iWin["errors"]=vjs.bind(this.player_,function(swfID,eventName){vjs.log("Flash Error",eventName)})}));placeHolder.parentNode.replaceChild(iFrm,placeHolder)}else{vjs.Flash.embed(options["swf"],placeHolder,flashVars,params,attributes)}}});vjs.Flash.prototype.dispose=function(){vjs.MediaTechController.prototype.dispose.call(this)};vjs.Flash.prototype.play=function(){this.el_.vjs_play()};vjs.Flash.prototype.pause=function(){this.el_.vjs_pause()};vjs.Flash.prototype.src=function(src){src=vjs.getAbsoluteURL(src);this.el_.vjs_src(src);if(this.player_.autoplay()){var tech=this;setTimeout(function(){tech.play()},0)}};vjs.Flash.prototype.load=function(){this.el_.vjs_load()};vjs.Flash.prototype.poster=function(){this.el_.vjs_getProperty("poster")};vjs.Flash.prototype.buffered=function(){return vjs.createTimeRange(0,this.el_.vjs_getProperty("buffered"))};vjs.Flash.prototype.supportsFullScreen=function(){return false};vjs.Flash.prototype.enterFullScreen=function(){return false};var api=vjs.Flash.prototype,readWrite="preload,currentTime,defaultPlaybackRate,playbackRate,autoplay,loop,mediaGroup,controller,controls,volume,muted,defaultMuted".split(","),readOnly="error,currentSrc,networkState,readyState,seeking,initialTime,duration,startOffsetTime,paused,played,seekable,ended,videoTracks,audioTracks,videoWidth,videoHeight,textTracks".split(",");var createSetter=function(attr){var attrUpper=attr.charAt(0).toUpperCase()+attr.slice(1);api["set"+attrUpper]=function(val){return this.el_.vjs_setProperty(attr,val)}};var createGetter=function(attr){api[attr]=function(){return this.el_.vjs_getProperty(attr)}};!function(){var i;for(i=0;i<readWrite.length;i++){createGetter(readWrite[i]);createSetter(readWrite[i])}for(i=0;i<readOnly.length;i++){createGetter(readOnly[i])}}();vjs.Flash.isSupported=function(){return vjs.Flash.version()[0]>=10};vjs.Flash.canPlaySource=function(srcObj){if(srcObj.type in vjs.Flash.formats){return"maybe"}};vjs.Flash.formats={"video/flv":"FLV","video/x-flv":"FLV","video/mp4":"MP4","video/m4v":"MP4"};vjs.Flash["onReady"]=function(currSwf){var el=vjs.el(currSwf);var player=el["player"]||el.parentNode["player"],tech=player.tech;el["player"]=player;tech.el_=el;tech.on("click",tech.onClick);vjs.Flash.checkReady(tech)};vjs.Flash.checkReady=function(tech){if(tech.el().vjs_getProperty){tech.triggerReady()}else{setTimeout(function(){vjs.Flash.checkReady(tech)},50)}};vjs.Flash["onEvent"]=function(swfID,eventName){var player=vjs.el(swfID)["player"];player.trigger(eventName)};vjs.Flash["onError"]=function(swfID,err){var player=vjs.el(swfID)["player"];player.trigger("error");vjs.log("Flash Error",err,swfID)};vjs.Flash.version=function(){var version="0,0,0";try{version=new window.ActiveXObject("ShockwaveFlash.ShockwaveFlash").GetVariable("$version").replace(/\D+/g,",").match(/^,?(.+),?$/)[1]}catch(e){try{if(navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin){version=(navigator.plugins["Shockwave Flash 2.0"]||navigator.plugins["Shockwave Flash"]).description.replace(/\D+/g,",").match(/^,?(.+),?$/)[1]}}catch(err){}}return version.split(",")};vjs.Flash.embed=function(swf,placeHolder,flashVars,params,attributes){var code=vjs.Flash.getEmbedCode(swf,flashVars,params,attributes),obj=vjs.createEl("div",{innerHTML:code}).childNodes[0],par=placeHolder.parentNode;placeHolder.parentNode.replaceChild(obj,placeHolder);var newObj=par.childNodes[0];setTimeout(function(){newObj.style.display="block"},1e3);return obj};vjs.Flash.getEmbedCode=function(swf,flashVars,params,attributes){var objTag='<object type="application/x-shockwave-flash"',flashVarsString="",paramsString="",attrsString="";if(flashVars){vjs.obj.each(flashVars,function(key,val){flashVarsString+=key+"="+val+"&amp;"})}params=vjs.obj.merge({movie:swf,flashvars:flashVarsString,allowScriptAccess:"always",allowNetworking:"all"},params);vjs.obj.each(params,function(key,val){paramsString+='<param name="'+key+'" value="'+val+'" />'});attributes=vjs.obj.merge({data:swf,width:"100%",height:"100%"},attributes);vjs.obj.each(attributes,function(key,val){attrsString+=key+'="'+val+'" '});return objTag+attrsString+">"+paramsString+"</object>"};vjs.MediaLoader=vjs.Component.extend({init:function(player,options,ready){vjs.Component.call(this,player,options,ready);if(!player.options_["sources"]||player.options_["sources"].length===0){for(var i=0,j=player.options_["techOrder"];i<j.length;i++){var techName=vjs.capitalize(j[i]),tech=vjs[techName];if(tech&&tech.isSupported()){player.loadTech(techName);break}}}else{player.src(player.options_["sources"])}}});vjs.Player.prototype.textTracks_;vjs.Player.prototype.textTracks=function(){this.textTracks_=this.textTracks_||[];return this.textTracks_};vjs.Player.prototype.addTextTrack=function(kind,label,language,options){var tracks=this.textTracks_=this.textTracks_||[];options=options||{};options["kind"]=kind;options["label"]=label;options["language"]=language;var Kind=vjs.capitalize(kind||"subtitles");var track=new vjs[Kind+"Track"](this,options);tracks.push(track);return track};vjs.Player.prototype.addTextTracks=function(trackList){var trackObj;for(var i=0;i<trackList.length;i++){trackObj=trackList[i];this.addTextTrack(trackObj["kind"],trackObj["label"],trackObj["language"],trackObj)}return this};vjs.Player.prototype.showTextTrack=function(id,disableSameKind){var tracks=this.textTracks_,i=0,j=tracks.length,track,showTrack,kind;for(;i<j;i++){track=tracks[i];if(track.id()===id){track.show();showTrack=track}else if(disableSameKind&&track.kind()==disableSameKind&&track.mode()>0){track.disable()}}kind=showTrack?showTrack.kind():disableSameKind?disableSameKind:false;if(kind){this.trigger(kind+"trackchange")}return this};vjs.TextTrack=vjs.Component.extend({init:function(player,options){vjs.Component.call(this,player,options);this.id_=options["id"]||"vjs_"+options["kind"]+"_"+options["language"]+"_"+vjs.guid++;this.src_=options["src"];this.dflt_=options["default"]||options["dflt"];this.title_=options["title"];this.language_=options["srclang"];this.label_=options["label"];this.cues_=[];this.activeCues_=[];this.readyState_=0;this.mode_=0;this.player_.on("fullscreenchange",vjs.bind(this,this.adjustFontSize))}});vjs.TextTrack.prototype.kind_;vjs.TextTrack.prototype.kind=function(){return this.kind_};vjs.TextTrack.prototype.src_;vjs.TextTrack.prototype.src=function(){return this.src_};vjs.TextTrack.prototype.dflt_;vjs.TextTrack.prototype.dflt=function(){return this.dflt_};vjs.TextTrack.prototype.title_;vjs.TextTrack.prototype.title=function(){return this.title_};vjs.TextTrack.prototype.language_;vjs.TextTrack.prototype.language=function(){return this.language_};vjs.TextTrack.prototype.label_;vjs.TextTrack.prototype.label=function(){return this.label_};vjs.TextTrack.prototype.cues_;vjs.TextTrack.prototype.cues=function(){return this.cues_};vjs.TextTrack.prototype.activeCues_;vjs.TextTrack.prototype.activeCues=function(){return this.activeCues_};vjs.TextTrack.prototype.readyState_;vjs.TextTrack.prototype.readyState=function(){return this.readyState_};vjs.TextTrack.prototype.mode_;vjs.TextTrack.prototype.mode=function(){return this.mode_};vjs.TextTrack.prototype.adjustFontSize=function(){if(this.player_.isFullScreen){this.el_.style.fontSize=screen.width/this.player_.width()*1.4*100+"%"}else{this.el_.style.fontSize=""}};vjs.TextTrack.prototype.createEl=function(){return vjs.Component.prototype.createEl.call(this,"div",{className:"vjs-"+this.kind_+" vjs-text-track"})};vjs.TextTrack.prototype.show=function(){this.activate();this.mode_=2;vjs.Component.prototype.show.call(this)};vjs.TextTrack.prototype.hide=function(){this.activate();this.mode_=1;vjs.Component.prototype.hide.call(this)};vjs.TextTrack.prototype.disable=function(){if(this.mode_==2){this.hide()}this.deactivate();this.mode_=0};vjs.TextTrack.prototype.activate=function(){if(this.readyState_===0){this.load()}if(this.mode_===0){this.player_.on("timeupdate",vjs.bind(this,this.update,this.id_));this.player_.on("ended",vjs.bind(this,this.reset,this.id_));if(this.kind_==="captions"||this.kind_==="subtitles"){this.player_.getChild("textTrackDisplay").addChild(this)}}};vjs.TextTrack.prototype.deactivate=function(){this.player_.off("timeupdate",vjs.bind(this,this.update,this.id_));this.player_.off("ended",vjs.bind(this,this.reset,this.id_));this.reset();this.player_.getChild("textTrackDisplay").removeChild(this)};vjs.TextTrack.prototype.load=function(){if(this.readyState_===0){this.readyState_=1;vjs.get(this.src_,vjs.bind(this,this.parseCues),vjs.bind(this,this.onError))}};vjs.TextTrack.prototype.onError=function(err){this.error=err;this.readyState_=3;this.trigger("error")};vjs.TextTrack.prototype.parseCues=function(srcContent){var cue,time,text,lines=srcContent.split("\n"),line="",id;for(var i=1,j=lines.length;i<j;i++){line=vjs.trim(lines[i]);if(line){if(line.indexOf("-->")==-1){id=line;line=vjs.trim(lines[++i])}else{id=this.cues_.length}cue={id:id,index:this.cues_.length};time=line.split(" --> ");cue.startTime=this.parseCueTime(time[0]);cue.endTime=this.parseCueTime(time[1]);text=[];while(lines[++i]&&(line=vjs.trim(lines[i]))){text.push(line)}cue.text=text.join("<br/>");this.cues_.push(cue)}}this.readyState_=2;this.trigger("loaded")};vjs.TextTrack.prototype.parseCueTime=function(timeText){var parts=timeText.split(":"),time=0,hours,minutes,other,seconds,ms;if(parts.length==3){hours=parts[0];minutes=parts[1];other=parts[2]}else{hours=0;minutes=parts[0];other=parts[1]}other=other.split(/\s+/);seconds=other.splice(0,1)[0];seconds=seconds.split(/\.|,/);ms=parseFloat(seconds[1]);seconds=seconds[0];time+=parseFloat(hours)*3600;time+=parseFloat(minutes)*60;time+=parseFloat(seconds);if(ms){time+=ms/1e3}return time};vjs.TextTrack.prototype.update=function(){if(this.cues_.length>0){var time=this.player_.currentTime();if(this.prevChange===undefined||time<this.prevChange||this.nextChange<=time){var cues=this.cues_,newNextChange=this.player_.duration(),newPrevChange=0,reverse=false,newCues=[],firstActiveIndex,lastActiveIndex,cue,i;if(time>=this.nextChange||this.nextChange===undefined){i=this.firstActiveIndex!==undefined?this.firstActiveIndex:0}else{reverse=true;i=this.lastActiveIndex!==undefined?this.lastActiveIndex:cues.length-1}while(true){cue=cues[i];if(cue.endTime<=time){newPrevChange=Math.max(newPrevChange,cue.endTime);if(cue.active){cue.active=false}}else if(time<cue.startTime){newNextChange=Math.min(newNextChange,cue.startTime);if(cue.active){cue.active=false}if(!reverse){break}}else{if(reverse){newCues.splice(0,0,cue);if(lastActiveIndex===undefined){lastActiveIndex=i}firstActiveIndex=i}else{newCues.push(cue);if(firstActiveIndex===undefined){firstActiveIndex=i}lastActiveIndex=i}newNextChange=Math.min(newNextChange,cue.endTime);newPrevChange=Math.max(newPrevChange,cue.startTime);cue.active=true}if(reverse){if(i===0){break}else{i--}}else{if(i===cues.length-1){break}else{i++}}}this.activeCues_=newCues;this.nextChange=newNextChange;this.prevChange=newPrevChange;this.firstActiveIndex=firstActiveIndex;this.lastActiveIndex=lastActiveIndex;this.updateDisplay();this.trigger("cuechange")}}};vjs.TextTrack.prototype.updateDisplay=function(){var cues=this.activeCues_,html="",i=0,j=cues.length;for(;i<j;i++){html+='<span class="vjs-tt-cue">'+cues[i].text+"</span>"}this.el_.innerHTML=html};vjs.TextTrack.prototype.reset=function(){this.nextChange=0;this.prevChange=this.player_.duration();this.firstActiveIndex=0;this.lastActiveIndex=0};vjs.CaptionsTrack=vjs.TextTrack.extend();vjs.CaptionsTrack.prototype.kind_="captions";vjs.SubtitlesTrack=vjs.TextTrack.extend();vjs.SubtitlesTrack.prototype.kind_="subtitles";vjs.ChaptersTrack=vjs.TextTrack.extend();vjs.ChaptersTrack.prototype.kind_="chapters";vjs.TextTrackDisplay=vjs.Component.extend({init:function(player,options,ready){vjs.Component.call(this,player,options,ready);if(player.options_["tracks"]&&player.options_["tracks"].length>0){this.player_.addTextTracks(player.options_["tracks"])}}});vjs.TextTrackDisplay.prototype.createEl=function(){return vjs.Component.prototype.createEl.call(this,"div",{className:"vjs-text-track-display"})};vjs.TextTrackMenuItem=vjs.MenuItem.extend({init:function(player,options){var track=this.track=options["track"];options["label"]=track.label();options["selected"]=track.dflt();vjs.MenuItem.call(this,player,options);this.player_.on(track.kind()+"trackchange",vjs.bind(this,this.update))}});vjs.TextTrackMenuItem.prototype.onClick=function(){vjs.MenuItem.prototype.onClick.call(this);this.player_.showTextTrack(this.track.id_,this.track.kind())};vjs.TextTrackMenuItem.prototype.update=function(){if(this.track.mode()==2){this.selected(true)}else{this.selected(false)}};vjs.OffTextTrackMenuItem=vjs.TextTrackMenuItem.extend({init:function(player,options){options["track"]={kind:function(){return options["kind"]},player:player,label:function(){return options["kind"]+" off"},dflt:function(){return false},mode:function(){return false}};vjs.TextTrackMenuItem.call(this,player,options);this.selected(true)}});vjs.OffTextTrackMenuItem.prototype.onClick=function(){vjs.TextTrackMenuItem.prototype.onClick.call(this);this.player_.showTextTrack(this.track.id_,this.track.kind())};vjs.OffTextTrackMenuItem.prototype.update=function(){var tracks=this.player_.textTracks(),i=0,j=tracks.length,track,off=true;for(;i<j;i++){track=tracks[i];if(track.kind()==this.track.kind()&&track.mode()==2){off=false}}if(off){this.selected(true)}else{this.selected(false)}};vjs.TextTrackButton=vjs.MenuButton.extend({init:function(player,options){vjs.MenuButton.call(this,player,options);if(this.items.length<=1){this.hide()}}});vjs.TextTrackButton.prototype.createItems=function(){var items=[],track;items.push(new vjs.OffTextTrackMenuItem(this.player_,{kind:this.kind_}));for(var i=0;i<this.player_.textTracks().length;i++){track=this.player_.textTracks()[i];if(track.kind()===this.kind_){items.push(new vjs.TextTrackMenuItem(this.player_,{track:track}))}}return items};vjs.CaptionsButton=vjs.TextTrackButton.extend({init:function(player,options,ready){vjs.TextTrackButton.call(this,player,options,ready);this.el_.setAttribute("aria-label","Captions Menu")}});vjs.CaptionsButton.prototype.kind_="captions";vjs.CaptionsButton.prototype.buttonText="Captions";vjs.CaptionsButton.prototype.className="vjs-captions-button";vjs.SubtitlesButton=vjs.TextTrackButton.extend({init:function(player,options,ready){vjs.TextTrackButton.call(this,player,options,ready);this.el_.setAttribute("aria-label","Subtitles Menu")}});vjs.SubtitlesButton.prototype.kind_="subtitles";vjs.SubtitlesButton.prototype.buttonText="Subtitles";vjs.SubtitlesButton.prototype.className="vjs-subtitles-button";vjs.ChaptersButton=vjs.TextTrackButton.extend({init:function(player,options,ready){vjs.TextTrackButton.call(this,player,options,ready);this.el_.setAttribute("aria-label","Chapters Menu")}});vjs.ChaptersButton.prototype.kind_="chapters";vjs.ChaptersButton.prototype.buttonText="Chapters";vjs.ChaptersButton.prototype.className="vjs-chapters-button";vjs.ChaptersButton.prototype.createItems=function(){var items=[],track;for(var i=0;i<this.player_.textTracks().length;i++){track=this.player_.textTracks()[i];if(track.kind()===this.kind_){items.push(new vjs.TextTrackMenuItem(this.player_,{track:track}))}}return items};vjs.ChaptersButton.prototype.createMenu=function(){var tracks=this.player_.textTracks(),i=0,j=tracks.length,track,chaptersTrack,items=this.items=[];for(;i<j;i++){track=tracks[i];if(track.kind()==this.kind_&&track.dflt()){if(track.readyState()<2){this.chaptersTrack=track;track.on("loaded",vjs.bind(this,this.createMenu));return}else{chaptersTrack=track;break}}}var menu=this.menu=new vjs.Menu(this.player_);menu.el_.appendChild(vjs.createEl("li",{className:"vjs-menu-title",innerHTML:vjs.capitalize(this.kind_),tabindex:-1}));if(chaptersTrack){var cues=chaptersTrack.cues_,cue,mi;i=0;j=cues.length;for(;i<j;i++){cue=cues[i];mi=new vjs.ChaptersTrackMenuItem(this.player_,{track:chaptersTrack,cue:cue});items.push(mi);menu.addChild(mi)}}if(this.items.length>0){this.show()}return menu};vjs.ChaptersTrackMenuItem=vjs.MenuItem.extend({init:function(player,options){var track=this.track=options["track"],cue=this.cue=options["cue"],currentTime=player.currentTime();options["label"]=cue.text;options["selected"]=cue.startTime<=currentTime&&currentTime<cue.endTime;vjs.MenuItem.call(this,player,options);track.on("cuechange",vjs.bind(this,this.update))}});vjs.ChaptersTrackMenuItem.prototype.onClick=function(){vjs.MenuItem.prototype.onClick.call(this);this.player_.currentTime(this.cue.startTime);this.update(this.cue.startTime)};vjs.ChaptersTrackMenuItem.prototype.update=function(){var cue=this.cue,currentTime=this.player_.currentTime();if(cue.startTime<=currentTime&&currentTime<cue.endTime){this.selected(true)}else{this.selected(false)}};vjs.obj.merge(vjs.ControlBar.prototype.options_["children"],{subtitlesButton:{},captionsButton:{},chaptersButton:{}});vjs.JSON;if(typeof window.JSON!=="undefined"&&window.JSON.parse==="function"){vjs.JSON=window.JSON}else{vjs.JSON={};var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;vjs.JSON.parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==="object"){for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v}else{delete value[k]}}}}return reviver.call(holder,key,value)}text=String(text);cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j}throw new SyntaxError("JSON.parse(): invalid or malformed JSON data")}}vjs.autoSetup=function(){var options,vid,player,vids=document.getElementsByTagName("video");if(vids&&vids.length>0){for(var i=0,j=vids.length;i<j;i++){vid=vids[i];if(vid&&vid.getAttribute){if(vid["player"]===undefined){options=vid.getAttribute("data-setup");if(options!==null){options=vjs.JSON.parse(options||"{}");player=videojs(vid,options)}}}else{vjs.autoSetupTimeout(1);break}}}else if(!vjs.windowLoaded){vjs.autoSetupTimeout(1)}};vjs.autoSetupTimeout=function(wait){setTimeout(vjs.autoSetup,wait)};vjs.one(window,"load",function(){vjs.windowLoaded=true});vjs.autoSetupTimeout(1);vjs.plugin=function(name,init){vjs.Player.prototype[name]=init};module.exports=vjs}()}()},{}],32:[function(require,module,exports){!function(){var Backbone=require("backbone"),_=require("lodash"),proxiedSync=Backbone.sync;Backbone.sync=function(method,model,options){options=options||{};options.attrs=options.attrs||_.clone(model.attributes);options.timeout=options.timeout||3e3;options.parse=options.parse||true;if(model.urlRoot&&model.methodUrl){options.url=model.methodUrl(method.toLowerCase())}else if(typeof model.url==="function"){options.url=model.url()}else if(model.url){options.url=model.url}if(!options.crossDomain){options.crossDomain=true}if(!options.xhrFields){options.xhrFields={withCredentials:true}}if(options.success){var proxiedSuccess=options.success;options.success=function(data,textStatus,jqXHR){if(data[model.name]&&data[model.name].errors){if(options.error){var sendToErrorhandler=function(){options.error({responseText:JSON.stringify({errors:data[model.name].errors})})};if(method!=="read"){model.fetch({success:function(){sendToErrorhandler()},error:function(){sendToErrorhandler()}})}else{sendToErrorhandler()}}else{return proxiedSuccess(data,textStatus,jqXHR)}}else{return proxiedSuccess(data,textStatus,jqXHR)}}}return proxiedSync(method,model,options)};module.exports=Backbone}()},{backbone:55,lodash:34}],33:[function(require,module,exports){!function(){var path=require("path"),_=require("lodash"),delay=1,models={user:require("../models/user"),image:require("../models/image"),video:require("../models/video"),page:require("../models/page"),customization:require("../models/customization")},collections={pagemedia:require("../collections/pageMedia"),pages:require("../collections/pages"),unprocesseduploads:require("../collections/unprocessedUploads")},db=function(App){var self=this;this.cache={};this.createModel=function(modelName,attrs){modelName=modelName.toLowerCase();attrs=attrs||{};if(_.find(models,function(v,key){return key===modelName})){return new models[modelName](attrs,{app:App})}else{throw new Error('Cannot find Model "'+modelName+'"')}};this.createCollection=function(collectionName,attributes){collectionName=collectionName.toLowerCase();attributes=attributes||{};attributes=_.clone(attributes);attributes.app=App;if(_.find(collections,function(v,key){return key===collectionName})){return new collections[collectionName]([],attributes)}else{throw new Error('Cannot find Collection "'+collectionName+'"')}};this.fetchModel=function(modelName,id){modelName=modelName.toLowerCase();var cacheKey="uuid://models/"+modelName+(id?"/"+id:""),modelObj;if(self.cache[cacheKey]){modelObj=self.cache[cacheKey];setTimeout(function(){if(modelObj.isFetched){modelObj.trigger("ready")}},delay)}else{modelObj=this.createModel(modelName);self.cache[cacheKey]=modelObj;if(id){modelObj.set({id:id})}setTimeout(function(){modelObj.fetch({success:function(){modelObj.isFetched=true;modelObj.trigger("ready")}})},delay)}return modelObj};this.fetchCollection=function(collectionName,attributes){collectionName=collectionName.toLowerCase();var safeAttrs=_.filter(attributes,function(v,k){return k!="app"}),cacheKey="uuid://collections/"+collectionName+"/"+JSON.stringify(safeAttrs),collectionObj;if(self.cache[cacheKey]){collectionObj=self.cache[cacheKey];setTimeout(function(){if(collectionObj.isFetched){collectionObj.trigger("ready")}},delay)}else{collectionObj=this.createCollection(collectionName,attributes);self.cache[cacheKey]=collectionObj;setTimeout(function(){collectionObj.fetch({success:function(){collectionObj.isFetched=true;collectionObj.trigger("ready")}})},delay)}return collectionObj}};module.exports=db}()},{"../collections/pageMedia":57,"../collections/pages":58,"../collections/unprocessedUploads":59,"../models/customization":37,"../models/image":38,"../models/page":56,"../models/user":35,"../models/video":40,lodash:34,path:4}],36:[function(require,module,exports){!function(){var Backbone=require("../helpers/BackboneLoader.js"),BaseModel=Backbone.Model.extend({initialize:function(attributes,opts){this.set(attributes);this.app=opts.app||{}},methodUrl:function(method){var root;if(typeof this.urlRoot==="function"){root=this.urlRoot()}else if(this.urlRoot){root=this.urlRoot}if(method=="delete"){return root+"/"+this.attributes.id+".json"}else if(method=="update"){return root+"/"+this.attributes.id+".json"}else if(method=="read"){return root+"/"+this.attributes.id+".json"}else if(method=="create"){return root+".json"}return false}});module.exports=BaseModel}()},{"../helpers/BackboneLoader.js":32}],60:[function(require,module,exports){!function(){var Backbone=require("../helpers/BackboneLoader.js"),Collection=Backbone.Collection.extend({initialize:function(models,opts){this.set(models);this.app=opts.app||{}}});module.exports=Collection}()},{"../helpers/BackboneLoader.js":32}],43:[function(require,module,exports){!function(){var View=require("../base"),FooterView=View.extend({template:require("../../templates/layout/footer.hbs"),initialize:function(options){this.app=options.app;this.listenTo(this.app.getUser(),"change",this.render,this);this.renderOnReady(this.app.getUser())}});module.exports=FooterView}()},{"../../templates/layout/footer.hbs":61,"../base":45}],51:[function(require,module,exports){!function(){var View=require("../../base"),Holder=require("../../../helpers/lib/holder.js"),IndexView=View.extend({template:require("../../../templates/routes/media/grid.hbs"),initialize:function(options){this.app=options.app;this.page=this.app.db.createModel("page").set({name:"Loading..."});var pages=this.app.db.fetchCollection("pages");this.listenTo(this.page,"change",this.render,this);pages.once("ready",function(){var foundPage=pages.find(function(page){return page.attributes.name.toLowerCase()===options.pageName.toLowerCase()});if(foundPage){this.page.set(foundPage.attributes)}else{this.page.set({name:"404"});this.app.error("Error 404: The page could not be found")}this.media=this.page.getMedia();this.media.fetch();this.listenTo(this.media,"change add remove sort",this.render,this);this.media.once("ready",this.render,this)},this)},context:function(){var media=[];var safeName=encodeURIComponent(this.page.attributes.name);if(this.media){this.media.forEach(function(model){media.push(model.templateVars(safeName))})}return this.getContext({media:media,page:this.page.attributes})},afterRender:function(){Holder.run()}});module.exports=IndexView}()},{"../../../helpers/lib/holder.js":49,"../../../templates/routes/media/grid.hbs":62,"../../base":45}],63:[function(require,module,exports){!function(){var View=require("../../base"),ThumbView=View.extend({template:require("../../../templates/routes/media/thumb.hbs"),initialize:function(options){this.app=options.app;this.media=this.app.db.fetchModel(options.mediaType,options.mediaId);this.listenTo(this.media,"change",this.render,this);this.listenTo(this.app,"iframeResize",this.resizeIframe,this);this.listenTo(this.app,"thumbnailCaptured",this.saveThumbnail,this);this.listenTo(this.app,"captureThumbnail",this.captureThumbnail,this);this.renderOnReady(this.media)},context:function(){var attrs=this.media.templateVars(),opts={media:{sources:[{src:attrs.url,type:this.app.util.mime(attrs.mimeType)}],attributes:{id:"media_"+this.app.util.uuid(10),resize:true}},dimensions:this.app.config.thumbnailDims,domain:document.domain+(window.location.port===80?"":":"+window.location.port)};return this.getContext({media:attrs,thumberUrl:attrs.s3key?this.app.config.thumberUrl+"#"+encodeURIComponent(JSON.stringify(opts)):null})},afterRender:function(){this.app.messenger.targetFrame=this.$el.find("iframe")[0]},resizeIframe:function(height){this.$el.find("iframe").attr("height",parseInt(height)+60)},saveThumbnail:function(base64data){this.app.setFlash("info","Please Wait, Saving Image...")},captureThumbnail:function(){var self=this;self.app.messenger.send("capture",[],function(data){self.media.useThumbnail(data.substring(data.indexOf(",")+1))})}});module.exports=ThumbView}()},{"../../../templates/routes/media/thumb.hbs":64,"../../base":45}],65:[function(require,module,exports){!function(){var View=require("../../base"),Holder=require("../../../helpers/lib/holder.js"),CarouselView=View.extend({template:require("../../../templates/routes/media/carousel.hbs"),events:{"click a.bigClose":"exitPlayer","click a.reelToggle":"toggleReel","click a.app":"handleAppLink"},reelOpen:null,initialize:function(options){this.app=options.app;this.page=this.app.db.createModel("page").set({name:"Loading..."});var pages=this.app.db.fetchCollection("pages");this.listenTo(this.page,"change",this.render,this);this.listenTo(this.app,"videoEnded",this.advance,this);pages.once("ready",function(){var foundPage=pages.find(function(page){return page.attributes.name.toLowerCase()===options.pageName.toLowerCase()});if(foundPage){this.page.set(foundPage.attributes)}else{this.page.set({name:"404"});this.app.error("Error 404: The page could not be found")}this.media=this.page.getMedia();this.listenTo(this.media,"change add remove sort",this.render,this);this.media.once("ready",this.render,this)},this)},context:function(){var media=[];var safeName=encodeURIComponent(this.page.attributes.name);if(this.media){this.media.forEach(function(model){media.push(model.templateVars(safeName,true))})}return this.getContext({media:media,page:this.page.attributes})},afterRender:function(){this.$(".carousel").elastislide();if(this.reelOpen===null){this.toggleReel(null,false)}Holder.run()},advance:function(lastMedia){var self=this,lastElementWasMatch=false,matchedElement=null,playerUrl,safeName=encodeURIComponent(self.page.attributes.name),i,ii,curModel,media=this.page.getMedia();if(this.page&&media){for(i=0,ii=media.models.length;i<ii;i++){curModel=media.models[i];if(lastMedia.id===curModel.id){lastElementWasMatch=true;continue}if(lastElementWasMatch){matchedElement=curModel;break}}if(matchedElement){playerUrl=matchedElement.templateVars(safeName).playerUrl;setTimeout(function(){self.app.navigate(playerUrl,{trigger:true})},1e3)}}},toggleReel:function(e,toggle){var self=this;if(e){e.preventDefault();e.stopPropagation()}if(toggle!==false){self.reelOpen=!self.reelOpen}if(self.reelOpen){self.$(".sliderWrap").slideDown(400);
self.$(".symbol").html("&and;")}else{self.$(".sliderWrap").slideUp(400);self.$(".symbol").html("&or;")}},exitPlayer:function(e){e.preventDefault();e.stopPropagation();this.app.navigate("page/"+this.page.attributes.name,{trigger:true})}});module.exports=CarouselView}()},{"../../../helpers/lib/holder.js":49,"../../../templates/routes/media/carousel.hbs":66,"../../base":45}],55:[function(require,module,exports){!function(){!function(){var root=this;var previousBackbone=root.Backbone;var array=[];var push=array.push;var slice=array.slice;var splice=array.splice;var Backbone;if(typeof exports!=="undefined"){Backbone=exports}else{Backbone=root.Backbone={}}Backbone.VERSION="1.0.0";var _=root._;if(!_&&typeof require!=="undefined")_=require("underscore");Backbone.$=root.jQuery||root.Zepto||root.ender||root.$;Backbone.noConflict=function(){root.Backbone=previousBackbone;return this};Backbone.emulateHTTP=false;Backbone.emulateJSON=false;var Events=Backbone.Events={on:function(name,callback,context){if(!eventsApi(this,"on",name,[callback,context])||!callback)return this;this._events||(this._events={});var events=this._events[name]||(this._events[name]=[]);events.push({callback:callback,context:context,ctx:context||this});return this},once:function(name,callback,context){if(!eventsApi(this,"once",name,[callback,context])||!callback)return this;var self=this;var once=_.once(function(){self.off(name,once);callback.apply(this,arguments)});once._callback=callback;return this.on(name,once,context)},off:function(name,callback,context){var retain,ev,events,names,i,l,j,k;if(!this._events||!eventsApi(this,"off",name,[callback,context]))return this;if(!name&&!callback&&!context){this._events={};return this}names=name?[name]:_.keys(this._events);for(i=0,l=names.length;i<l;i++){name=names[i];if(events=this._events[name]){this._events[name]=retain=[];if(callback||context){for(j=0,k=events.length;j<k;j++){ev=events[j];if(callback&&callback!==ev.callback&&callback!==ev.callback._callback||context&&context!==ev.context){retain.push(ev)}}}if(!retain.length)delete this._events[name]}}return this},trigger:function(name){if(!this._events)return this;var args=slice.call(arguments,1);if(!eventsApi(this,"trigger",name,args))return this;var events=this._events[name];var allEvents=this._events.all;if(events)triggerEvents(events,args);if(allEvents)triggerEvents(allEvents,arguments);return this},stopListening:function(obj,name,callback){var listeners=this._listeners;if(!listeners)return this;var deleteListener=!name&&!callback;if(typeof name==="object")callback=this;if(obj)(listeners={})[obj._listenerId]=obj;for(var id in listeners){listeners[id].off(name,callback,this);if(deleteListener)delete this._listeners[id]}return this}};var eventSplitter=/\s+/;var eventsApi=function(obj,action,name,rest){if(!name)return true;if(typeof name==="object"){for(var key in name){obj[action].apply(obj,[key,name[key]].concat(rest))}return false}if(eventSplitter.test(name)){var names=name.split(eventSplitter);for(var i=0,l=names.length;i<l;i++){obj[action].apply(obj,[names[i]].concat(rest))}return false}return true};var triggerEvents=function(events,args){var ev,i=-1,l=events.length,a1=args[0],a2=args[1],a3=args[2];switch(args.length){case 0:while(++i<l)(ev=events[i]).callback.call(ev.ctx);return;case 1:while(++i<l)(ev=events[i]).callback.call(ev.ctx,a1);return;case 2:while(++i<l)(ev=events[i]).callback.call(ev.ctx,a1,a2);return;case 3:while(++i<l)(ev=events[i]).callback.call(ev.ctx,a1,a2,a3);return;default:while(++i<l)(ev=events[i]).callback.apply(ev.ctx,args)}};var listenMethods={listenTo:"on",listenToOnce:"once"};_.each(listenMethods,function(implementation,method){Events[method]=function(obj,name,callback){var listeners=this._listeners||(this._listeners={});var id=obj._listenerId||(obj._listenerId=_.uniqueId("l"));listeners[id]=obj;if(typeof name==="object")callback=this;obj[implementation](name,callback,this);return this}});Events.bind=Events.on;Events.unbind=Events.off;_.extend(Backbone,Events);var Model=Backbone.Model=function(attributes,options){var defaults;var attrs=attributes||{};options||(options={});this.cid=_.uniqueId("c");this.attributes={};_.extend(this,_.pick(options,modelOptions));if(options.parse)attrs=this.parse(attrs,options)||{};if(defaults=_.result(this,"defaults")){attrs=_.defaults({},attrs,defaults)}this.set(attrs,options);this.changed={};this.initialize.apply(this,arguments)};var modelOptions=["url","urlRoot","collection"];_.extend(Model.prototype,Events,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(options){return _.clone(this.attributes)},sync:function(){return Backbone.sync.apply(this,arguments)},get:function(attr){return this.attributes[attr]},escape:function(attr){return _.escape(this.get(attr))},has:function(attr){return this.get(attr)!=null},set:function(key,val,options){var attr,attrs,unset,changes,silent,changing,prev,current;if(key==null)return this;if(typeof key==="object"){attrs=key;options=val}else{(attrs={})[key]=val}options||(options={});if(!this._validate(attrs,options))return false;unset=options.unset;silent=options.silent;changes=[];changing=this._changing;this._changing=true;if(!changing){this._previousAttributes=_.clone(this.attributes);this.changed={}}current=this.attributes,prev=this._previousAttributes;if(this.idAttribute in attrs)this.id=attrs[this.idAttribute];for(attr in attrs){val=attrs[attr];if(!_.isEqual(current[attr],val))changes.push(attr);if(!_.isEqual(prev[attr],val)){this.changed[attr]=val}else{delete this.changed[attr]}unset?delete current[attr]:current[attr]=val}if(!silent){if(changes.length)this._pending=true;for(var i=0,l=changes.length;i<l;i++){this.trigger("change:"+changes[i],this,current[changes[i]],options)}}if(changing)return this;if(!silent){while(this._pending){this._pending=false;this.trigger("change",this,options)}}this._pending=false;this._changing=false;return this},unset:function(attr,options){return this.set(attr,void 0,_.extend({},options,{unset:true}))},clear:function(options){var attrs={};for(var key in this.attributes)attrs[key]=void 0;return this.set(attrs,_.extend({},options,{unset:true}))},hasChanged:function(attr){if(attr==null)return!_.isEmpty(this.changed);return _.has(this.changed,attr)},changedAttributes:function(diff){if(!diff)return this.hasChanged()?_.clone(this.changed):false;var val,changed=false;var old=this._changing?this._previousAttributes:this.attributes;for(var attr in diff){if(_.isEqual(old[attr],val=diff[attr]))continue;(changed||(changed={}))[attr]=val}return changed},previous:function(attr){if(attr==null||!this._previousAttributes)return null;return this._previousAttributes[attr]},previousAttributes:function(){return _.clone(this._previousAttributes)},fetch:function(options){options=options?_.clone(options):{};if(options.parse===void 0)options.parse=true;var model=this;var success=options.success;options.success=function(resp){if(!model.set(model.parse(resp,options),options))return false;if(success)success(model,resp,options);model.trigger("sync",model,resp,options)};wrapError(this,options);return this.sync("read",this,options)},save:function(key,val,options){var attrs,method,xhr,attributes=this.attributes;if(key==null||typeof key==="object"){attrs=key;options=val}else{(attrs={})[key]=val}if(attrs&&(!options||!options.wait)&&!this.set(attrs,options))return false;options=_.extend({validate:true},options);if(!this._validate(attrs,options))return false;if(attrs&&options.wait){this.attributes=_.extend({},attributes,attrs)}if(options.parse===void 0)options.parse=true;var model=this;var success=options.success;options.success=function(resp){model.attributes=attributes;var serverAttrs=model.parse(resp,options);if(options.wait)serverAttrs=_.extend(attrs||{},serverAttrs);if(_.isObject(serverAttrs)&&!model.set(serverAttrs,options)){return false}if(success)success(model,resp,options);model.trigger("sync",model,resp,options)};wrapError(this,options);method=this.isNew()?"create":options.patch?"patch":"update";if(method==="patch")options.attrs=attrs;xhr=this.sync(method,this,options);if(attrs&&options.wait)this.attributes=attributes;return xhr},destroy:function(options){options=options?_.clone(options):{};var model=this;var success=options.success;var destroy=function(){model.trigger("destroy",model,model.collection,options)};options.success=function(resp){if(options.wait||model.isNew())destroy();if(success)success(model,resp,options);if(!model.isNew())model.trigger("sync",model,resp,options)};if(this.isNew()){options.success();return false}wrapError(this,options);var xhr=this.sync("delete",this,options);if(!options.wait)destroy();return xhr},url:function(){var base=_.result(this,"urlRoot")||_.result(this.collection,"url")||urlError();if(this.isNew())return base;return base+(base.charAt(base.length-1)==="/"?"":"/")+encodeURIComponent(this.id)},parse:function(resp,options){return resp},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return this.id==null},isValid:function(options){return this._validate({},_.extend(options||{},{validate:true}))},_validate:function(attrs,options){if(!options.validate||!this.validate)return true;attrs=_.extend({},this.attributes,attrs);var error=this.validationError=this.validate(attrs,options)||null;if(!error)return true;this.trigger("invalid",this,error,_.extend(options||{},{validationError:error}));return false}});var modelMethods=["keys","values","pairs","invert","pick","omit"];_.each(modelMethods,function(method){Model.prototype[method]=function(){var args=slice.call(arguments);args.unshift(this.attributes);return _[method].apply(_,args)}});var Collection=Backbone.Collection=function(models,options){options||(options={});if(options.url)this.url=options.url;if(options.model)this.model=options.model;if(options.comparator!==void 0)this.comparator=options.comparator;this._reset();this.initialize.apply(this,arguments);if(models)this.reset(models,_.extend({silent:true},options))};var setOptions={add:true,remove:true,merge:true};var addOptions={add:true,merge:false,remove:false};_.extend(Collection.prototype,Events,{model:Model,initialize:function(){},toJSON:function(options){return this.map(function(model){return model.toJSON(options)})},sync:function(){return Backbone.sync.apply(this,arguments)},add:function(models,options){return this.set(models,_.defaults(options||{},addOptions))},remove:function(models,options){models=_.isArray(models)?models.slice():[models];options||(options={});var i,l,index,model;for(i=0,l=models.length;i<l;i++){model=this.get(models[i]);if(!model)continue;delete this._byId[model.id];delete this._byId[model.cid];index=this.indexOf(model);this.models.splice(index,1);this.length--;if(!options.silent){options.index=index;model.trigger("remove",model,this,options)}this._removeReference(model)}return this},set:function(models,options){options=_.defaults(options||{},setOptions);if(options.parse)models=this.parse(models,options);if(!_.isArray(models))models=models?[models]:[];var i,l,model,attrs,existing,sort;var at=options.at;var sortable=this.comparator&&at==null&&options.sort!==false;var sortAttr=_.isString(this.comparator)?this.comparator:null;var toAdd=[],toRemove=[],modelMap={};for(i=0,l=models.length;i<l;i++){if(!(model=this._prepareModel(models[i],options)))continue;if(existing=this.get(model)){if(options.remove)modelMap[existing.cid]=true;if(options.merge){existing.set(model.attributes,options);if(sortable&&!sort&&existing.hasChanged(sortAttr))sort=true}}else if(options.add){toAdd.push(model);model.on("all",this._onModelEvent,this);this._byId[model.cid]=model;if(model.id!=null)this._byId[model.id]=model}}if(options.remove){for(i=0,l=this.length;i<l;++i){if(!modelMap[(model=this.models[i]).cid])toRemove.push(model)}if(toRemove.length)this.remove(toRemove,options)}if(toAdd.length){if(sortable)sort=true;this.length+=toAdd.length;if(at!=null){splice.apply(this.models,[at,0].concat(toAdd))}else{push.apply(this.models,toAdd)}}if(sort)this.sort({silent:true});if(options.silent)return this;for(i=0,l=toAdd.length;i<l;i++){(model=toAdd[i]).trigger("add",model,this,options)}if(sort)this.trigger("sort",this,options);return this},reset:function(models,options){options||(options={});for(var i=0,l=this.models.length;i<l;i++){this._removeReference(this.models[i])}options.previousModels=this.models;this._reset();this.add(models,_.extend({silent:true},options));if(!options.silent)this.trigger("reset",this,options);return this},push:function(model,options){model=this._prepareModel(model,options);this.add(model,_.extend({at:this.length},options));return model},pop:function(options){var model=this.at(this.length-1);this.remove(model,options);return model},unshift:function(model,options){model=this._prepareModel(model,options);this.add(model,_.extend({at:0},options));return model},shift:function(options){var model=this.at(0);this.remove(model,options);return model},slice:function(begin,end){return this.models.slice(begin,end)},get:function(obj){if(obj==null)return void 0;return this._byId[obj.id!=null?obj.id:obj.cid||obj]},at:function(index){return this.models[index]},where:function(attrs,first){if(_.isEmpty(attrs))return first?void 0:[];return this[first?"find":"filter"](function(model){for(var key in attrs){if(attrs[key]!==model.get(key))return false}return true})},findWhere:function(attrs){return this.where(attrs,true)},sort:function(options){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");options||(options={});if(_.isString(this.comparator)||this.comparator.length===1){this.models=this.sortBy(this.comparator,this)}else{this.models.sort(_.bind(this.comparator,this))}if(!options.silent)this.trigger("sort",this,options);return this},sortedIndex:function(model,value,context){value||(value=this.comparator);var iterator=_.isFunction(value)?value:function(model){return model.get(value)};return _.sortedIndex(this.models,model,iterator,context)},pluck:function(attr){return _.invoke(this.models,"get",attr)},fetch:function(options){options=options?_.clone(options):{};if(options.parse===void 0)options.parse=true;var success=options.success;var collection=this;options.success=function(resp){var method=options.reset?"reset":"set";collection[method](resp,options);if(success)success(collection,resp,options);collection.trigger("sync",collection,resp,options)};wrapError(this,options);return this.sync("read",this,options)},create:function(model,options){options=options?_.clone(options):{};if(!(model=this._prepareModel(model,options)))return false;if(!options.wait)this.add(model,options);var collection=this;var success=options.success;options.success=function(resp){if(options.wait)collection.add(model,options);if(success)success(model,resp,options)};model.save(null,options);return model},parse:function(resp,options){return resp},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0;this.models=[];this._byId={}},_prepareModel:function(attrs,options){if(attrs instanceof Model){if(!attrs.collection)attrs.collection=this;return attrs}options||(options={});options.collection=this;var model=new this.model(attrs,options);if(!model._validate(attrs,options)){this.trigger("invalid",this,attrs,options);return false}return model},_removeReference:function(model){if(this===model.collection)delete model.collection;model.off("all",this._onModelEvent,this)},_onModelEvent:function(event,model,collection,options){if((event==="add"||event==="remove")&&collection!==this)return;if(event==="destroy")this.remove(model,options);if(model&&event==="change:"+model.idAttribute){delete this._byId[model.previous(model.idAttribute)];if(model.id!=null)this._byId[model.id]=model}this.trigger.apply(this,arguments)}});var methods=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","indexOf","shuffle","lastIndexOf","isEmpty","chain"];_.each(methods,function(method){Collection.prototype[method]=function(){var args=slice.call(arguments);args.unshift(this.models);return _[method].apply(_,args)}});var attributeMethods=["groupBy","countBy","sortBy"];_.each(attributeMethods,function(method){Collection.prototype[method]=function(value,context){var iterator=_.isFunction(value)?value:function(model){return model.get(value)};return _[method](this.models,iterator,context)}});var View=Backbone.View=function(options){this.cid=_.uniqueId("view");this._configure(options||{});this._ensureElement();this.initialize.apply(this,arguments);this.delegateEvents()};var delegateEventSplitter=/^(\S+)\s*(.*)$/;var viewOptions=["model","collection","el","id","attributes","className","tagName","events"];_.extend(View.prototype,Events,{tagName:"div",$:function(selector){return this.$el.find(selector)},initialize:function(){},render:function(){return this},remove:function(){this.$el.remove();this.stopListening();return this},setElement:function(element,delegate){if(this.$el)this.undelegateEvents();this.$el=element instanceof Backbone.$?element:Backbone.$(element);this.el=this.$el[0];if(delegate!==false)this.delegateEvents();return this},delegateEvents:function(events){if(!(events||(events=_.result(this,"events"))))return this;this.undelegateEvents();for(var key in events){var method=events[key];if(!_.isFunction(method))method=this[events[key]];if(!method)continue;var match=key.match(delegateEventSplitter);var eventName=match[1],selector=match[2];method=_.bind(method,this);eventName+=".delegateEvents"+this.cid;if(selector===""){this.$el.on(eventName,method)}else{this.$el.on(eventName,selector,method)}}return this},undelegateEvents:function(){this.$el.off(".delegateEvents"+this.cid);return this},_configure:function(options){if(this.options)options=_.extend({},_.result(this,"options"),options);_.extend(this,_.pick(options,viewOptions));this.options=options},_ensureElement:function(){if(!this.el){var attrs=_.extend({},_.result(this,"attributes"));if(this.id)attrs.id=_.result(this,"id");if(this.className)attrs["class"]=_.result(this,"className");var $el=Backbone.$("<"+_.result(this,"tagName")+">").attr(attrs);this.setElement($el,false)}else{this.setElement(_.result(this,"el"),false)}}});Backbone.sync=function(method,model,options){var type=methodMap[method];_.defaults(options||(options={}),{emulateHTTP:Backbone.emulateHTTP,emulateJSON:Backbone.emulateJSON});var params={type:type,dataType:"json"};if(!options.url){params.url=_.result(model,"url")||urlError()}if(options.data==null&&model&&(method==="create"||method==="update"||method==="patch")){params.contentType="application/json";params.data=JSON.stringify(options.attrs||model.toJSON(options))}if(options.emulateJSON){params.contentType="application/x-www-form-urlencoded";params.data=params.data?{model:params.data}:{}}if(options.emulateHTTP&&(type==="PUT"||type==="DELETE"||type==="PATCH")){params.type="POST";if(options.emulateJSON)params.data._method=type;var beforeSend=options.beforeSend;options.beforeSend=function(xhr){xhr.setRequestHeader("X-HTTP-Method-Override",type);if(beforeSend)return beforeSend.apply(this,arguments)}}if(params.type!=="GET"&&!options.emulateJSON){params.processData=false}if(params.type==="PATCH"&&window.ActiveXObject&&!(window.external&&window.external.msActiveXFilteringEnabled)){params.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")}}var xhr=options.xhr=Backbone.ajax(_.extend(params,options));model.trigger("request",model,xhr,options);return xhr};var methodMap={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};Backbone.ajax=function(){return Backbone.$.ajax.apply(Backbone.$,arguments)};var Router=Backbone.Router=function(options){options||(options={});if(options.routes)this.routes=options.routes;this._bindRoutes();this.initialize.apply(this,arguments)};var optionalParam=/\((.*?)\)/g;var namedParam=/(\(\?)?:\w+/g;var splatParam=/\*\w+/g;var escapeRegExp=/[\-{}\[\]+?.,\\\^$|#\s]/g;_.extend(Router.prototype,Events,{initialize:function(){},route:function(route,name,callback){if(!_.isRegExp(route))route=this._routeToRegExp(route);if(_.isFunction(name)){callback=name;name=""}if(!callback)callback=this[name];var router=this;Backbone.history.route(route,function(fragment){var args=router._extractParameters(route,fragment);callback&&callback.apply(router,args);router.trigger.apply(router,["route:"+name].concat(args));router.trigger("route",name,args);Backbone.history.trigger("route",router,name,args)});return this},navigate:function(fragment,options){Backbone.history.navigate(fragment,options);return this},_bindRoutes:function(){if(!this.routes)return;this.routes=_.result(this,"routes");var route,routes=_.keys(this.routes);while((route=routes.pop())!=null){this.route(route,this.routes[route])}},_routeToRegExp:function(route){route=route.replace(escapeRegExp,"\\$&").replace(optionalParam,"(?:$1)?").replace(namedParam,function(match,optional){return optional?match:"([^/]+)"}).replace(splatParam,"(.*?)");return new RegExp("^"+route+"$")},_extractParameters:function(route,fragment){var params=route.exec(fragment).slice(1);return _.map(params,function(param){return param?decodeURIComponent(param):null})}});var History=Backbone.History=function(){this.handlers=[];_.bindAll(this,"checkUrl");if(typeof window!=="undefined"){this.location=window.location;this.history=window.history}};var routeStripper=/^[#\/]|\s+$/g;var rootStripper=/^\/+|\/+$/g;var isExplorer=/msie [\w.]+/;var trailingSlash=/\/$/;History.started=false;_.extend(History.prototype,Events,{interval:50,getHash:function(window){var match=(window||this).location.href.match(/#(.*)$/);return match?match[1]:""},getFragment:function(fragment,forcePushState){if(fragment==null){if(this._hasPushState||!this._wantsHashChange||forcePushState){fragment=this.location.pathname;var root=this.root.replace(trailingSlash,"");if(!fragment.indexOf(root))fragment=fragment.substr(root.length)}else{fragment=this.getHash()}}return fragment.replace(routeStripper,"")},start:function(options){if(History.started)throw new Error("Backbone.history has already been started");History.started=true;this.options=_.extend({},{root:"/"},this.options,options);this.root=this.options.root;this._wantsHashChange=this.options.hashChange!==false;this._wantsPushState=!!this.options.pushState;this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var fragment=this.getFragment();var docMode=document.documentMode;var oldIE=isExplorer.exec(navigator.userAgent.toLowerCase())&&(!docMode||docMode<=7);this.root=("/"+this.root+"/").replace(rootStripper,"/");if(oldIE&&this._wantsHashChange){this.iframe=Backbone.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow;this.navigate(fragment)}if(this._hasPushState){Backbone.$(window).on("popstate",this.checkUrl)}else if(this._wantsHashChange&&"onhashchange"in window&&!oldIE){Backbone.$(window).on("hashchange",this.checkUrl)}else if(this._wantsHashChange){this._checkUrlInterval=setInterval(this.checkUrl,this.interval)}this.fragment=fragment;var loc=this.location;var atRoot=loc.pathname.replace(/[^\/]$/,"$&/")===this.root;if(this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!atRoot){this.fragment=this.getFragment(null,true);this.location.replace(this.root+this.location.search+"#"+this.fragment);return true}else if(this._wantsPushState&&this._hasPushState&&atRoot&&loc.hash){this.fragment=this.getHash().replace(routeStripper,"");this.history.replaceState({},document.title,this.root+this.fragment+loc.search)}if(!this.options.silent)return this.loadUrl()},stop:function(){Backbone.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl);clearInterval(this._checkUrlInterval);History.started=false},route:function(route,callback){this.handlers.unshift({route:route,callback:callback})},checkUrl:function(e){var current=this.getFragment();if(current===this.fragment&&this.iframe){current=this.getFragment(this.getHash(this.iframe))}if(current===this.fragment)return false;if(this.iframe)this.navigate(current);this.loadUrl()||this.loadUrl(this.getHash())},loadUrl:function(fragmentOverride){var fragment=this.fragment=this.getFragment(fragmentOverride);var matched=_.any(this.handlers,function(handler){if(handler.route.test(fragment)){handler.callback(fragment);return true}});return matched},navigate:function(fragment,options){if(!History.started)return false;if(!options||options===true)options={trigger:options};fragment=this.getFragment(fragment||"");if(this.fragment===fragment)return;this.fragment=fragment;var url=this.root+fragment;if(this._hasPushState){this.history[options.replace?"replaceState":"pushState"]({},document.title,url)}else if(this._wantsHashChange){this._updateHash(this.location,fragment,options.replace);if(this.iframe&&fragment!==this.getFragment(this.getHash(this.iframe))){if(!options.replace)this.iframe.document.open().close();this._updateHash(this.iframe.location,fragment,options.replace)}}else{return this.location.assign(url)}if(options.trigger)this.loadUrl(fragment)},_updateHash:function(location,fragment,replace){if(replace){var href=location.href.replace(/(javascript:|#).*$/,"");location.replace(href+"#"+fragment)}else{location.hash="#"+fragment}}});Backbone.history=new History;var extend=function(protoProps,staticProps){var parent=this;var child;if(protoProps&&_.has(protoProps,"constructor")){child=protoProps.constructor}else{child=function(){return parent.apply(this,arguments)}}_.extend(child,parent,staticProps);var Surrogate=function(){this.constructor=child};Surrogate.prototype=parent.prototype;child.prototype=new Surrogate;if(protoProps)_.extend(child.prototype,protoProps);child.__super__=parent.prototype;return child};Model.extend=Collection.extend=Router.extend=View.extend=History.extend=extend;var urlError=function(){throw new Error('A "url" property or function must be specified')};var wrapError=function(model,options){var error=options.error;options.error=function(resp){if(error)error(model,resp,options);model.trigger("error",model,resp,options)}}}.call(this)}()},{underscore:67}],56:[function(require,module,exports){!function(){var Model=require("./base"),Video=require("./video"),Image=require("./image"),Backbone=require("backbone"),_=require("lodash"),Page=Model.extend({name:"page",urlRoot:function(){return this.app.config.baseUrl+"/pages"},defaults:{name:"Untitled",items:[],userId:"",isPublished:false,errors:null},initialize:function(attributes,opts){this.set(attributes);this.app=opts.app||{}},validate:function(attrs,options){var errors=[];if(!attrs.name||attrs.name.length==0){errors.push({attr:"name",message:"Page title cannot be empty"})}if(!attrs.id){var pages=this.app.db.fetchCollection("pages").filter(function(page){return page.attributes.name.toLowerCase()===attrs.name.toLowerCase()});if(pages&&pages.length>0){errors.push({attr:"name",message:"Another page already exists with this name"})}}if(errors.length){return errors}},sync:function(method,model,options){if(method==="create"||method==="update"){model.set("itemList",JSON.stringify(model.get("items")))}Backbone.sync(method,model,options)},parse:function(data,options){data=data.page;delete data.page;try{data.items=JSON.parse(data.itemList)}catch(e){data.items=[]}finally{delete data.itemList}return data},getMedia:function(){return this.app.db.fetchCollection("pageMedia",{app:this.app,pageId:this.id})},addMedia:function(cb,debug_cb){var self=this;filepicker.pickAndStore({extensions:self.app.config.videoExts.concat(self.app.config.imageExts),multiple:true,signature:self.app.getUser().attributes.signature,policy:self.app.getUser().attributes.policy,services:["COMPUTER","DROPBOX","FLICKR","GOOGLE_DRIVE","FTP"],debug:debug_cb?true:false},{location:"s3",path:self.app.getUser().attributes.path,access:"public"},function(FPFiles){if(Object.prototype.toString.call(FPFiles)!=="[object Array]"){FPFiles=[FPFiles]}var newItems=_.clone(self.attributes.items),itemsToGo=FPFiles.length,afterItemComplete=function(new_id,new_name,type,after_save_cb){newItems.push({ID:new_id,NAME:new_name,TYPE:type,THUMB:"http://placehold.it/320x180"});itemsToGo--;if(itemsToGo===0){self.set("items",newItems);self.save(null,{success:function(){self.app.db.fetchCollection("unprocessedUploads").fetch();self.app.db.fetchCollection("pages").fetch();after_save_cb();cb(null,FPFiles)},error:cb})}};for(var i=0,ii=FPFiles.length;i<ii;i++){!function(FPFile){var model,type,opts={name:FPFile.filename,fpkey:FPFile.url,mimeType:FPFile.mimetype,originalFilesize:FPFile.size,userId:self.attributes.userId,attribs:[],status:0};if(self.app.util.isVideo(FPFile.filename)){model=new Video({},{app:self.app});type="video"}else if(self.app.util.isImage(FPFile.filename)){model=new Image({},{app:self.app});type="image"}model.set(opts);if(debug_cb){model.set("debug",true)}model.save(null,{success:function(savedModel,resp){var after_cb;if(debug_cb){after_cb=debug_cb}else{after_cb=function(){}}afterItemComplete(savedModel.attributes.id,savedModel.attributes.name,type,after_cb)},error:self.app.error})}(FPFiles[i])}},function(FPError){cb(FPError)})}});module.exports=Page}()},{"./base":36,"./image":38,"./video":40,backbone:55,lodash:34}],57:[function(require,module,exports){!function(){var Collection=require("./base"),_=require("lodash"),PageMedia=Collection.extend({name:"media",initialize:function(models,opts){this.set(models);this.app=opts.app||{};this.pageId=opts.pageId||null;this.model=function(attrs,options){if(attrs.type==="image"){return opts.app.db.createModel("image",attrs)}else{return opts.app.db.createModel("video",attrs)}}},url:function(){return this.app.config.baseUrl+"/pages/"+this.pageId+"/media.json"},parse:function(data,options){return _.isEmpty(data.media)?[]:data.media}});module.exports=PageMedia}()},{"./base":60,lodash:34}],58:[function(require,module,exports){!function(){var Collection=require("./base"),Page=require("../models/page"),_=require("lodash"),Pages=Collection.extend({name:"page",url:function(){return this.app.config.baseUrl+"/pages.json?userId="+this.app.bootstrap.userId},initialize:function(models,opts){this.set(models);this.app=opts.app||{};this.model=function(attrs,options){var p=opts.app.db.createModel("page");return opts.app.db.createModel("page",p.parse(attrs))}},parse:function(data,options){return _.isEmpty(data.pages)?[]:data.pages}});module.exports=Pages}()},{"../models/page":56,"./base":60,lodash:34}],59:[function(require,module,exports){!function(){var Collection=require("./base"),Image=require("../models/image.js"),Video=require("../models/video.js"),_=require("lodash"),UnprocessedUploads=Collection.extend({name:"media",url:function(){return this.app.config.baseUrl+"/unprocessed.json"},initialize:function(models,opts){this.set(models);this.app=opts.app||{};this.model=function(attrs,options){if(attrs.type==="image"){return opts.app.db.createModel("image").set(attrs)}else{return opts.app.db.createModel("video").set(attrs)}}},parse:function(data,options){return _.isEmpty(data.media)?[]:data.media}});module.exports=UnprocessedUploads}()},{"../models/image.js":38,"../models/video.js":40,"./base":60,lodash:34}],67:[function(require,module,exports){!function(){!function(){var root=this;var previousUnderscore=root._;var breaker={};var ArrayProto=Array.prototype,ObjProto=Object.prototype,FuncProto=Function.prototype;var push=ArrayProto.push,slice=ArrayProto.slice,concat=ArrayProto.concat,toString=ObjProto.toString,hasOwnProperty=ObjProto.hasOwnProperty;var nativeForEach=ArrayProto.forEach,nativeMap=ArrayProto.map,nativeReduce=ArrayProto.reduce,nativeReduceRight=ArrayProto.reduceRight,nativeFilter=ArrayProto.filter,nativeEvery=ArrayProto.every,nativeSome=ArrayProto.some,nativeIndexOf=ArrayProto.indexOf,nativeLastIndexOf=ArrayProto.lastIndexOf,nativeIsArray=Array.isArray,nativeKeys=Object.keys,nativeBind=FuncProto.bind;
var _=function(obj){if(obj instanceof _)return obj;if(!(this instanceof _))return new _(obj);this._wrapped=obj};if(typeof exports!=="undefined"){if(typeof module!=="undefined"&&module.exports){exports=module.exports=_}exports._=_}else{root._=_}_.VERSION="1.5.1";var each=_.each=_.forEach=function(obj,iterator,context){if(obj==null)return;if(nativeForEach&&obj.forEach===nativeForEach){obj.forEach(iterator,context)}else if(obj.length===+obj.length){for(var i=0,l=obj.length;i<l;i++){if(iterator.call(context,obj[i],i,obj)===breaker)return}}else{for(var key in obj){if(_.has(obj,key)){if(iterator.call(context,obj[key],key,obj)===breaker)return}}}};_.map=_.collect=function(obj,iterator,context){var results=[];if(obj==null)return results;if(nativeMap&&obj.map===nativeMap)return obj.map(iterator,context);each(obj,function(value,index,list){results.push(iterator.call(context,value,index,list))});return results};var reduceError="Reduce of empty array with no initial value";_.reduce=_.foldl=_.inject=function(obj,iterator,memo,context){var initial=arguments.length>2;if(obj==null)obj=[];if(nativeReduce&&obj.reduce===nativeReduce){if(context)iterator=_.bind(iterator,context);return initial?obj.reduce(iterator,memo):obj.reduce(iterator)}each(obj,function(value,index,list){if(!initial){memo=value;initial=true}else{memo=iterator.call(context,memo,value,index,list)}});if(!initial)throw new TypeError(reduceError);return memo};_.reduceRight=_.foldr=function(obj,iterator,memo,context){var initial=arguments.length>2;if(obj==null)obj=[];if(nativeReduceRight&&obj.reduceRight===nativeReduceRight){if(context)iterator=_.bind(iterator,context);return initial?obj.reduceRight(iterator,memo):obj.reduceRight(iterator)}var length=obj.length;if(length!==+length){var keys=_.keys(obj);length=keys.length}each(obj,function(value,index,list){index=keys?keys[--length]:--length;if(!initial){memo=obj[index];initial=true}else{memo=iterator.call(context,memo,obj[index],index,list)}});if(!initial)throw new TypeError(reduceError);return memo};_.find=_.detect=function(obj,iterator,context){var result;any(obj,function(value,index,list){if(iterator.call(context,value,index,list)){result=value;return true}});return result};_.filter=_.select=function(obj,iterator,context){var results=[];if(obj==null)return results;if(nativeFilter&&obj.filter===nativeFilter)return obj.filter(iterator,context);each(obj,function(value,index,list){if(iterator.call(context,value,index,list))results.push(value)});return results};_.reject=function(obj,iterator,context){return _.filter(obj,function(value,index,list){return!iterator.call(context,value,index,list)},context)};_.every=_.all=function(obj,iterator,context){iterator||(iterator=_.identity);var result=true;if(obj==null)return result;if(nativeEvery&&obj.every===nativeEvery)return obj.every(iterator,context);each(obj,function(value,index,list){if(!(result=result&&iterator.call(context,value,index,list)))return breaker});return!!result};var any=_.some=_.any=function(obj,iterator,context){iterator||(iterator=_.identity);var result=false;if(obj==null)return result;if(nativeSome&&obj.some===nativeSome)return obj.some(iterator,context);each(obj,function(value,index,list){if(result||(result=iterator.call(context,value,index,list)))return breaker});return!!result};_.contains=_.include=function(obj,target){if(obj==null)return false;if(nativeIndexOf&&obj.indexOf===nativeIndexOf)return obj.indexOf(target)!=-1;return any(obj,function(value){return value===target})};_.invoke=function(obj,method){var args=slice.call(arguments,2);var isFunc=_.isFunction(method);return _.map(obj,function(value){return(isFunc?method:value[method]).apply(value,args)})};_.pluck=function(obj,key){return _.map(obj,function(value){return value[key]})};_.where=function(obj,attrs,first){if(_.isEmpty(attrs))return first?void 0:[];return _[first?"find":"filter"](obj,function(value){for(var key in attrs){if(attrs[key]!==value[key])return false}return true})};_.findWhere=function(obj,attrs){return _.where(obj,attrs,true)};_.max=function(obj,iterator,context){if(!iterator&&_.isArray(obj)&&obj[0]===+obj[0]&&obj.length<65535){return Math.max.apply(Math,obj)}if(!iterator&&_.isEmpty(obj))return-Infinity;var result={computed:-Infinity,value:-Infinity};each(obj,function(value,index,list){var computed=iterator?iterator.call(context,value,index,list):value;computed>result.computed&&(result={value:value,computed:computed})});return result.value};_.min=function(obj,iterator,context){if(!iterator&&_.isArray(obj)&&obj[0]===+obj[0]&&obj.length<65535){return Math.min.apply(Math,obj)}if(!iterator&&_.isEmpty(obj))return Infinity;var result={computed:Infinity,value:Infinity};each(obj,function(value,index,list){var computed=iterator?iterator.call(context,value,index,list):value;computed<result.computed&&(result={value:value,computed:computed})});return result.value};_.shuffle=function(obj){var rand;var index=0;var shuffled=[];each(obj,function(value){rand=_.random(index++);shuffled[index-1]=shuffled[rand];shuffled[rand]=value});return shuffled};var lookupIterator=function(value){return _.isFunction(value)?value:function(obj){return obj[value]}};_.sortBy=function(obj,value,context){var iterator=lookupIterator(value);return _.pluck(_.map(obj,function(value,index,list){return{value:value,index:index,criteria:iterator.call(context,value,index,list)}}).sort(function(left,right){var a=left.criteria;var b=right.criteria;if(a!==b){if(a>b||a===void 0)return 1;if(a<b||b===void 0)return-1}return left.index<right.index?-1:1}),"value")};var group=function(obj,value,context,behavior){var result={};var iterator=lookupIterator(value==null?_.identity:value);each(obj,function(value,index){var key=iterator.call(context,value,index,obj);behavior(result,key,value)});return result};_.groupBy=function(obj,value,context){return group(obj,value,context,function(result,key,value){(_.has(result,key)?result[key]:result[key]=[]).push(value)})};_.countBy=function(obj,value,context){return group(obj,value,context,function(result,key){if(!_.has(result,key))result[key]=0;result[key]++})};_.sortedIndex=function(array,obj,iterator,context){iterator=iterator==null?_.identity:lookupIterator(iterator);var value=iterator.call(context,obj);var low=0,high=array.length;while(low<high){var mid=low+high>>>1;iterator.call(context,array[mid])<value?low=mid+1:high=mid}return low};_.toArray=function(obj){if(!obj)return[];if(_.isArray(obj))return slice.call(obj);if(obj.length===+obj.length)return _.map(obj,_.identity);return _.values(obj)};_.size=function(obj){if(obj==null)return 0;return obj.length===+obj.length?obj.length:_.keys(obj).length};_.first=_.head=_.take=function(array,n,guard){if(array==null)return void 0;return n!=null&&!guard?slice.call(array,0,n):array[0]};_.initial=function(array,n,guard){return slice.call(array,0,array.length-(n==null||guard?1:n))};_.last=function(array,n,guard){if(array==null)return void 0;if(n!=null&&!guard){return slice.call(array,Math.max(array.length-n,0))}else{return array[array.length-1]}};_.rest=_.tail=_.drop=function(array,n,guard){return slice.call(array,n==null||guard?1:n)};_.compact=function(array){return _.filter(array,_.identity)};var flatten=function(input,shallow,output){if(shallow&&_.every(input,_.isArray)){return concat.apply(output,input)}each(input,function(value){if(_.isArray(value)||_.isArguments(value)){shallow?push.apply(output,value):flatten(value,shallow,output)}else{output.push(value)}});return output};_.flatten=function(array,shallow){return flatten(array,shallow,[])};_.without=function(array){return _.difference(array,slice.call(arguments,1))};_.uniq=_.unique=function(array,isSorted,iterator,context){if(_.isFunction(isSorted)){context=iterator;iterator=isSorted;isSorted=false}var initial=iterator?_.map(array,iterator,context):array;var results=[];var seen=[];each(initial,function(value,index){if(isSorted?!index||seen[seen.length-1]!==value:!_.contains(seen,value)){seen.push(value);results.push(array[index])}});return results};_.union=function(){return _.uniq(_.flatten(arguments,true))};_.intersection=function(array){var rest=slice.call(arguments,1);return _.filter(_.uniq(array),function(item){return _.every(rest,function(other){return _.indexOf(other,item)>=0})})};_.difference=function(array){var rest=concat.apply(ArrayProto,slice.call(arguments,1));return _.filter(array,function(value){return!_.contains(rest,value)})};_.zip=function(){var length=_.max(_.pluck(arguments,"length").concat(0));var results=new Array(length);for(var i=0;i<length;i++){results[i]=_.pluck(arguments,""+i)}return results};_.object=function(list,values){if(list==null)return{};var result={};for(var i=0,l=list.length;i<l;i++){if(values){result[list[i]]=values[i]}else{result[list[i][0]]=list[i][1]}}return result};_.indexOf=function(array,item,isSorted){if(array==null)return-1;var i=0,l=array.length;if(isSorted){if(typeof isSorted=="number"){i=isSorted<0?Math.max(0,l+isSorted):isSorted}else{i=_.sortedIndex(array,item);return array[i]===item?i:-1}}if(nativeIndexOf&&array.indexOf===nativeIndexOf)return array.indexOf(item,isSorted);for(;i<l;i++)if(array[i]===item)return i;return-1};_.lastIndexOf=function(array,item,from){if(array==null)return-1;var hasIndex=from!=null;if(nativeLastIndexOf&&array.lastIndexOf===nativeLastIndexOf){return hasIndex?array.lastIndexOf(item,from):array.lastIndexOf(item)}var i=hasIndex?from:array.length;while(i--)if(array[i]===item)return i;return-1};_.range=function(start,stop,step){if(arguments.length<=1){stop=start||0;start=0}step=arguments[2]||1;var len=Math.max(Math.ceil((stop-start)/step),0);var idx=0;var range=new Array(len);while(idx<len){range[idx++]=start;start+=step}return range};var ctor=function(){};_.bind=function(func,context){var args,bound;if(nativeBind&&func.bind===nativeBind)return nativeBind.apply(func,slice.call(arguments,1));if(!_.isFunction(func))throw new TypeError;args=slice.call(arguments,2);return bound=function(){if(!(this instanceof bound))return func.apply(context,args.concat(slice.call(arguments)));ctor.prototype=func.prototype;var self=new ctor;ctor.prototype=null;var result=func.apply(self,args.concat(slice.call(arguments)));if(Object(result)===result)return result;return self}};_.partial=function(func){var args=slice.call(arguments,1);return function(){return func.apply(this,args.concat(slice.call(arguments)))}};_.bindAll=function(obj){var funcs=slice.call(arguments,1);if(funcs.length===0)throw new Error("bindAll must be passed function names");each(funcs,function(f){obj[f]=_.bind(obj[f],obj)});return obj};_.memoize=function(func,hasher){var memo={};hasher||(hasher=_.identity);return function(){var key=hasher.apply(this,arguments);return _.has(memo,key)?memo[key]:memo[key]=func.apply(this,arguments)}};_.delay=function(func,wait){var args=slice.call(arguments,2);return setTimeout(function(){return func.apply(null,args)},wait)};_.defer=function(func){return _.delay.apply(_,[func,1].concat(slice.call(arguments,1)))};_.throttle=function(func,wait,options){var context,args,result;var timeout=null;var previous=0;options||(options={});var later=function(){previous=options.leading===false?0:new Date;timeout=null;result=func.apply(context,args)};return function(){var now=new Date;if(!previous&&options.leading===false)previous=now;var remaining=wait-(now-previous);context=this;args=arguments;if(remaining<=0){clearTimeout(timeout);timeout=null;previous=now;result=func.apply(context,args)}else if(!timeout&&options.trailing!==false){timeout=setTimeout(later,remaining)}return result}};_.debounce=function(func,wait,immediate){var result;var timeout=null;return function(){var context=this,args=arguments;var later=function(){timeout=null;if(!immediate)result=func.apply(context,args)};var callNow=immediate&&!timeout;clearTimeout(timeout);timeout=setTimeout(later,wait);if(callNow)result=func.apply(context,args);return result}};_.once=function(func){var ran=false,memo;return function(){if(ran)return memo;ran=true;memo=func.apply(this,arguments);func=null;return memo}};_.wrap=function(func,wrapper){return function(){var args=[func];push.apply(args,arguments);return wrapper.apply(this,args)}};_.compose=function(){var funcs=arguments;return function(){var args=arguments;for(var i=funcs.length-1;i>=0;i--){args=[funcs[i].apply(this,args)]}return args[0]}};_.after=function(times,func){return function(){if(--times<1){return func.apply(this,arguments)}}};_.keys=nativeKeys||function(obj){if(obj!==Object(obj))throw new TypeError("Invalid object");var keys=[];for(var key in obj)if(_.has(obj,key))keys.push(key);return keys};_.values=function(obj){var values=[];for(var key in obj)if(_.has(obj,key))values.push(obj[key]);return values};_.pairs=function(obj){var pairs=[];for(var key in obj)if(_.has(obj,key))pairs.push([key,obj[key]]);return pairs};_.invert=function(obj){var result={};for(var key in obj)if(_.has(obj,key))result[obj[key]]=key;return result};_.functions=_.methods=function(obj){var names=[];for(var key in obj){if(_.isFunction(obj[key]))names.push(key)}return names.sort()};_.extend=function(obj){each(slice.call(arguments,1),function(source){if(source){for(var prop in source){obj[prop]=source[prop]}}});return obj};_.pick=function(obj){var copy={};var keys=concat.apply(ArrayProto,slice.call(arguments,1));each(keys,function(key){if(key in obj)copy[key]=obj[key]});return copy};_.omit=function(obj){var copy={};var keys=concat.apply(ArrayProto,slice.call(arguments,1));for(var key in obj){if(!_.contains(keys,key))copy[key]=obj[key]}return copy};_.defaults=function(obj){each(slice.call(arguments,1),function(source){if(source){for(var prop in source){if(obj[prop]===void 0)obj[prop]=source[prop]}}});return obj};_.clone=function(obj){if(!_.isObject(obj))return obj;return _.isArray(obj)?obj.slice():_.extend({},obj)};_.tap=function(obj,interceptor){interceptor(obj);return obj};var eq=function(a,b,aStack,bStack){if(a===b)return a!==0||1/a==1/b;if(a==null||b==null)return a===b;if(a instanceof _)a=a._wrapped;if(b instanceof _)b=b._wrapped;var className=toString.call(a);if(className!=toString.call(b))return false;switch(className){case"[object String]":return a==String(b);case"[object Number]":return a!=+a?b!=+b:a==0?1/a==1/b:a==+b;case"[object Date]":case"[object Boolean]":return+a==+b;case"[object RegExp]":return a.source==b.source&&a.global==b.global&&a.multiline==b.multiline&&a.ignoreCase==b.ignoreCase}if(typeof a!="object"||typeof b!="object")return false;var length=aStack.length;while(length--){if(aStack[length]==a)return bStack[length]==b}var aCtor=a.constructor,bCtor=b.constructor;if(aCtor!==bCtor&&!(_.isFunction(aCtor)&&aCtor instanceof aCtor&&_.isFunction(bCtor)&&bCtor instanceof bCtor)){return false}aStack.push(a);bStack.push(b);var size=0,result=true;if(className=="[object Array]"){size=a.length;result=size==b.length;if(result){while(size--){if(!(result=eq(a[size],b[size],aStack,bStack)))break}}}else{for(var key in a){if(_.has(a,key)){size++;if(!(result=_.has(b,key)&&eq(a[key],b[key],aStack,bStack)))break}}if(result){for(key in b){if(_.has(b,key)&&!size--)break}result=!size}}aStack.pop();bStack.pop();return result};_.isEqual=function(a,b){return eq(a,b,[],[])};_.isEmpty=function(obj){if(obj==null)return true;if(_.isArray(obj)||_.isString(obj))return obj.length===0;for(var key in obj)if(_.has(obj,key))return false;return true};_.isElement=function(obj){return!!(obj&&obj.nodeType===1)};_.isArray=nativeIsArray||function(obj){return toString.call(obj)=="[object Array]"};_.isObject=function(obj){return obj===Object(obj)};each(["Arguments","Function","String","Number","Date","RegExp"],function(name){_["is"+name]=function(obj){return toString.call(obj)=="[object "+name+"]"}});if(!_.isArguments(arguments)){_.isArguments=function(obj){return!!(obj&&_.has(obj,"callee"))}}if(typeof/./!=="function"){_.isFunction=function(obj){return typeof obj==="function"}}_.isFinite=function(obj){return isFinite(obj)&&!isNaN(parseFloat(obj))};_.isNaN=function(obj){return _.isNumber(obj)&&obj!=+obj};_.isBoolean=function(obj){return obj===true||obj===false||toString.call(obj)=="[object Boolean]"};_.isNull=function(obj){return obj===null};_.isUndefined=function(obj){return obj===void 0};_.has=function(obj,key){return hasOwnProperty.call(obj,key)};_.noConflict=function(){root._=previousUnderscore;return this};_.identity=function(value){return value};_.times=function(n,iterator,context){var accum=Array(Math.max(0,n));for(var i=0;i<n;i++)accum[i]=iterator.call(context,i);return accum};_.random=function(min,max){if(max==null){max=min;min=0}return min+Math.floor(Math.random()*(max-min+1))};var entityMap={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};entityMap.unescape=_.invert(entityMap.escape);var entityRegexes={escape:new RegExp("["+_.keys(entityMap.escape).join("")+"]","g"),unescape:new RegExp("("+_.keys(entityMap.unescape).join("|")+")","g")};_.each(["escape","unescape"],function(method){_[method]=function(string){if(string==null)return"";return(""+string).replace(entityRegexes[method],function(match){return entityMap[method][match]})}});_.result=function(object,property){if(object==null)return void 0;var value=object[property];return _.isFunction(value)?value.call(object):value};_.mixin=function(obj){each(_.functions(obj),function(name){var func=_[name]=obj[name];_.prototype[name]=function(){var args=[this._wrapped];push.apply(args,arguments);return result.call(this,func.apply(_,args))}})};var idCounter=0;_.uniqueId=function(prefix){var id=++idCounter+"";return prefix?prefix+id:id};_.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var noMatch=/(.)^/;var escapes={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"};var escaper=/\\|'|\r|\n|\t|\u2028|\u2029/g;_.template=function(text,data,settings){var render;settings=_.defaults({},settings,_.templateSettings);var matcher=new RegExp([(settings.escape||noMatch).source,(settings.interpolate||noMatch).source,(settings.evaluate||noMatch).source].join("|")+"|$","g");var index=0;var source="__p+='";text.replace(matcher,function(match,escape,interpolate,evaluate,offset){source+=text.slice(index,offset).replace(escaper,function(match){return"\\"+escapes[match]});if(escape){source+="'+\n((__t=("+escape+"))==null?'':_.escape(__t))+\n'"}if(interpolate){source+="'+\n((__t=("+interpolate+"))==null?'':__t)+\n'"}if(evaluate){source+="';\n"+evaluate+"\n__p+='"}index=offset+match.length;return match});source+="';\n";if(!settings.variable)source="with(obj||{}){\n"+source+"}\n";source="var __t,__p='',__j=Array.prototype.join,"+"print=function(){__p+=__j.call(arguments,'');};\n"+source+"return __p;\n";try{render=new Function(settings.variable||"obj","_",source)}catch(e){e.source=source;throw e}if(data)return render(data,_);var template=function(data){return render.call(this,data,_)};template.source="function("+(settings.variable||"obj")+"){\n"+source+"}";return template};_.chain=function(obj){return _(obj).chain()};var result=function(obj){return this._chain?_(obj).chain():obj};_.mixin(_);each(["pop","push","reverse","shift","sort","splice","unshift"],function(name){var method=ArrayProto[name];_.prototype[name]=function(){var obj=this._wrapped;method.apply(obj,arguments);if((name=="shift"||name=="splice")&&obj.length===0)delete obj[0];return result.call(this,obj)}});each(["concat","join","slice"],function(name){var method=ArrayProto[name];_.prototype[name]=function(){return result.call(this,method.apply(this._wrapped,arguments))}});_.extend(_.prototype,{chain:function(){this._chain=true;return this},value:function(){return this._wrapped}})}.call(this)}()},{}],29:[function(require,module,exports){!function(){var View=require("../../base"),_=require("lodash"),NavbarView=require("../../layout/navbar.js"),FooterView=require("../../layout/footer.js"),ThumbView=require("../../routes/media/thumb.js"),EditView=View.extend({template:require("../../../templates/routes/media/edit.hbs"),events:{submit:"performSave","click a.btn-danger":"performDelete","click a.upload":"performPick","click a.crop":"performCrop","click a.capture":"performCapture","click a.app":"handleAppLink"},initialize:function(options){this.app=options.app;this.mediaType=options.mediaType;this.mediaId=options.mediaId;this.media=this.app.db.fetchModel(options.mediaType,options.mediaId);this.listenTo(this.app.getUser(),"change",this.render,this);this.listenTo(this.media,"change",this.render,this);this.renderOnReady(this.media)},afterRender:function(){var inputElem;var navbar=new NavbarView({app:this.app}),thumber=new ThumbView({app:this.app,mediaType:this.mediaType,mediaId:this.mediaId}),footer=new FooterView({app:this.app});this.appendSubview(navbar,this.$("#header"));this.appendSubview(thumber,this.$("#thumber"));this.appendSubview(footer,this.$("#footer"));this.eachSubview(function(subview){subview.render()});_.defer(function(){this.$("div.tagsinput").remove();this.$("input[name=attribs]").tagsInput()},this)},context:function(){return this.getContext({media:this.media.templateVars()})},performSave:function(e){var self=this;e.preventDefault();var name=this.$("input[name=name]").val();var attribs=this.$("input[name=attribs]").val().split(",");this.media.save({userId:self.app.getUser().attributes.id,name:name,attribs:attribs},{success:function(){self.app.db.fetchCollection("unprocessedUploads").fetch({success:function(){var ucedType=self.media.attributes.type.charAt(0).toUpperCase();ucedType+=self.media.attributes.type.substr(1);self.app.setFlash("success",ucedType+" Saved!")},error:self.app.error})},error:self.app.error})},performDelete:function(e){e.preventDefault();e.stopPropagation();var self=this;var proceed=confirm("Are you sure you want to delete "+self.media.attributes.name+"?");if(proceed){filepicker.remove(self.media.fpfile(),{policy:self.app.getUser().attributes.policy,signature:self.app.getUser().attributes.signature},function(){self.media.destroy({success:function(){self.app.navigate("",{trigger:true})},error:self.app.error})},self.app.error)}else{return false}},performPick:function(e){e.preventDefault();e.stopPropagation();this.media.pickThumbnail()},performCrop:function(e){e.preventDefault();e.stopPropagation();this.app.trigger("captureThumbnail")},performCapture:function(e){e.preventDefault();e.stopPropagation();this.app.trigger("captureThumbnail")}});module.exports=EditView}()},{"../../../templates/routes/media/edit.hbs":68,"../../base":45,"../../layout/footer.js":43,"../../layout/navbar.js":42,"../../routes/media/thumb.js":63,lodash:34}],31:[function(require,module,exports){!function(){var View=require("../../base"),_=require("lodash"),jst=require("js-thumb"),CarouselView=require("./carousel"),vjs=require("../../../helpers/lib/video"),ShowView=View.extend({template:require("../../../templates/routes/media/show.hbs"),events:{},initialize:function(options){this.app=options.app;this.pageName=options.pageName;this.mediaType=options.mediaType;this.mediaId=options.mediaId;var pages=this.app.db.fetchCollection("pages");this.page=this.app.db.fetchModel("page",options.mediaId);this.media=this.app.db.fetchModel(options.mediaType,options.mediaId);if(this.page.id){this.page.fetch()}if(this.media.id){this.media.fetch()}this.listenTo(this.app.getUser(),"change",this.render,this);this.listenTo(this.page,"change",this.render,this);this.listenTo(this.media,"change",this.render,this);pages.once("ready",function(){var foundPage=pages.find(function(page){return page.attributes.name.toLowerCase()===options.pageName.toLowerCase()});if(foundPage){this.page.set(foundPage.attributes)}else{this.page.set({name:"404"});this.app.error("Error 404: The page could not be found")}},this)},afterRender:function(){var self=this,carouselView=new CarouselView({app:this.app,pageName:this.pageName}),afterVideoLoad=function(e){player.on("ended",function(){self.app.trigger("videoEnded",self.media)})};this.appendSubview(carouselView,this.$("#carouselWrapper"));this.eachSubview(function(subview){subview.render()});if(this.media.attributes.type==="video"){_.defer(function(){jst.loadVideo(this.$("video")[0],{autoplay:true,resize:true},afterVideoLoad)},this)}},context:function(){return this.getContext({media:this.media.templateVars()})}});module.exports=ShowView}()},{"../../../helpers/lib/video":54,"../../../templates/routes/media/show.hbs":69,"../../base":45,"./carousel":65,"js-thumb":70,lodash:34}],39:[function(require,module,exports){!function(){!function(){var Model=require("./base"),Backbone=require("backbone"),_=require("lodash"),Media=Model.extend({name:"media",urlRoot:function(){return this.app.config.baseUrl+"/Media_is_an_abstract_class_do_not_use_it"},defaults:{name:"Untitled",s3key:null,fpkey:null,mimeType:null,originalFilesize:null,userId:null,thumbnailS3key:null,thumbnailFpkey:null,attribs:[],reviewIssue:null,status:0,type:"unknown"},sync:function(method,model,options){var self=this;if(method==="create"||method==="update"){model.set("userAttributes",JSON.stringify(model.get("attribs")))}var afterCheckingMedia=function(){if(!model.attributes.thumbnailS3key&&model.attributes.thumbnailFpkey&&model.attributes.debug!==true){filepicker.stat(self.thumbnailFpfile(),{path:true,policy:self.app.db.fetchModel("user").attributes.policy,signature:self.app.db.fetchModel("user").attributes.signature},function(metadata){model.set("thumbnailS3key",metadata.path);Backbone.sync(method,model,options)})}else{Backbone.sync(method,model,options)}};if(!model.attributes.s3key&&model.attributes.fpkey&&model.attributes.debug!==true){filepicker.stat(self.fpfile(),{path:true,policy:self.app.db.fetchModel("user").attributes.policy,signature:self.app.db.fetchModel("user").attributes.signature},function(metadata){model.set("s3key",metadata.path);afterCheckingMedia()})}else{afterCheckingMedia()}},destroy:function(options){var self=this;if(options.success){var oldcb=options.success;options.success=function(){self.app.db.fetchCollection("unprocessedUploads").fetch();if(oldcb){oldcb()}}}Backbone.sync("delete",this,options)},parse:function(data,options){if(data.image){data=data.image;delete data.image}if(data.video){data=data.video;delete data.video}try{data.attribs=JSON.parse(data.userAttributes)}catch(e){data.attribs=[]}finally{delete data.userAttributes}return data},pickThumbnail:function(){var self=this;filepicker.pick({extensions:self.app.config.imageExts,path:self.app.db.fetchModel("user").attributes.path,signature:self.app.db.fetchModel("user").attributes.signature,policy:self.app.db.fetchModel("user").attributes.policy,services:["COMPUTER","DROPBOX","FLICKR","GOOGLE_DRIVE","FTP","URL","IMAGE_SEARCH"]},function(FPFile){self.cropThumbnail(FPFile)},function(FPError){if(FPError.code!==101){self.app.error(FPError)}})},cropThumbnail:function(FPFile){var self=this;if(!FPFile){FPFile=self.fpfile()}self.app.setFlash("info","Please wait while we process the image...");filepicker.convert(FPFile,{signature:self.app.db.fetchModel("user").attributes.signature,policy:self.app.db.fetchModel("user").attributes.policy,width:self.app.config.thumbnailDims.width,height:self.app.config.thumbnailDims.height,fit:"crop"},{path:self.app.getUser().attributes.path,location:"s3",access:"public"},function(FPFileThumb){self.save({thumbnailFpkey:FPFileThumb.url,thumbnailS3key:null},{success:function(){self.app.setFlash("success","Thumbnail saved!");self.app.db.fetchCollection("unprocessedUploads").fetch()},error:self.app.error})},function(FPError){self.app.error(FPError)})},useThumbnail:function(base64Data){var self=this;self.app.setFlash("info","Please wait while we process the image...");filepicker.store(base64Data,{signature:self.app.getUser().attributes.signature,policy:self.app.getUser().attributes.policy,mimetype:"image/png",base64decode:true,path:self.app.getUser().attributes.path,location:"s3",access:"public"},function(FPFileThumb){self.save({thumbnailFpkey:FPFileThumb.url,thumbnailS3key:null},{success:function(){self.app.setFlash("success","Thumbnail saved!");self.app.db.fetchCollection("unprocessedUploads").fetch()},error:self.app.error})},function(FPError){self.app.error(FPError)})},fpfile:function(){return{url:this.attributes.fpkey,filename:this.attributes.name,mimetype:this.attributes.mimeType,isWriteable:false,size:this.attributes.originalFilesize}},thumbnailFpfile:function(){return{url:this.attributes.thumbnailFpkey}},templateVars:function(safePageName,halfSizeThumbnails){var attrs=_.clone(this.attributes);halfSizeThumbnails=halfSizeThumbnails===true;if(attrs.s3key){attrs.url=self.app.config.s3prefix+attrs.s3key}else{attrs.thumbnailUrl=self.app.util.placeholderThumbnail(halfSizeThumbnails)}if(attrs.thumbnailS3key){attrs.thumbnailUrl=self.app.config.s3prefix+attrs.thumbnailS3key}else{attrs.thumbnailUrl=self.app.util.placeholderThumbnail(halfSizeThumbnails)}attrs.isImage=attrs.type==="image";attrs.isVideo=attrs.type==="video";attrs.attribs=_.map(attrs.attribs,function(attrib){return attrib.replace(/^(.*:)/,"<strong>$1</strong>")});if(this.app.isLoggedIn()){attrs.editHref="/media/"+attrs.type+"/"+attrs.id+"/edit"}if(safePageName){attrs.playerUrl="page/"+safePageName+"/"+attrs.type+"/"+attrs.id}return attrs}});module.exports=Media}()}()},{"./base":36,backbone:55,lodash:34}],45:[function(require,module,exports){!function(){var Ribcage=require("ribcage-view"),_=require("lodash"),View=Ribcage.extend({renderOnReady:function(){var things=Array.prototype.slice.call(arguments),self=this,thingCount=things.length,next=function(){thingCount--;if(thingCount<0){self.render()}};_.each(things,function(thing){thing.once("ready",next,thing)});next()},getContext:function(additions){var userAdditions=additions||{},ourAdditions={isLoggedIn:this.app.isLoggedIn(),flash:_.clone(this.app.flash),debug:this.app.bootstrap.debug?true:false},context=this.app.getUserVars();return _.extend({},context,ourAdditions,userAdditions)},context:function(){return this.getContext()},handleAppLink:function(e){this.app.handleAppLink(e)},events:{"click a.app":"handleAppLink"},beforeRender:function(){this.eachSubview(function(subview){subview.close()});this.$el.empty()}});module.exports=View}()},{lodash:34,"ribcage-view":71}],70:[function(require,module,exports){!function(){!function(){var JSThumb=function(){function err(msg){if(window.console){console.log(msg)}}var _videoJs,videoJsAliases=["videojs","vjs","_V_"],resizeList=[],breaker={},has=function(obj,key){return hasOwnProperty.call(obj,key)},each=function(obj,iterator,context){if(obj==null)return;if(Array.prototype.forEach&&obj.forEach===Array.prototype.forEach){obj.forEach(iterator,context)}else if(obj.length===+obj.length){for(var i=0,l=obj.length;i<l;i++){if(iterator.call(context,obj[i],i,obj)===breaker)return}}else{for(var key in obj){if(has(obj,key)){if(iterator.call(context,obj[key],key,obj)===breaker)return}}}},extend=function(obj){each(Array.prototype.slice.call(arguments,1),function(source){if(source){for(var prop in source){obj[prop]=source[prop]}}});return obj};each(videoJsAliases,function(alias){if(window[alias]!==undefined){_videoJs=window[alias];return false}});this.resizeVideos=function(e){if(e){e.preventDefault();e.stopPropagation()}each(resizeList,function(entry){var element=document.getElementById(entry.id),player=_videoJs(entry.id),newWidth,newHeight;if(element&&element.parentNode){newWidth=element.parentNode.offsetWidth;newHeight=entry.height*(newWidth/entry.width);player.width(newWidth);player.height(newHeight)}})};this.loadVideo=function(target,opts,cb){var self=this,videoElement,defaultAttributes,i,ii,complete,flash=false,afterLoad;opts.sources=opts.sources||[];opts.attributes=opts.attributes||{};defaultAttributes={id:"js_thumb_video","class":"video-js vjs-default-skin",controls:"controls",preload:"auto",resize:false,width:560,height:320};if(!_videoJs){cb("Please include Video.js to use this function");return}if(!opts.sources.length){cb("Videos require at least one source");return}opts.sources=extend([],opts.sources);
opts.attributes=extend({},defaultAttributes,opts.attributes);each(_videoJs.players,function(player,identifier){if(identifier===opts.attributes.id){player.dispose();return false}});videoDims={};videoElement=document.createElement("video");each(opts.attributes,function(value,key){videoElement.setAttribute(key,value)});each(opts.sources,function(source){var sourceElement=document.createElement("source");sourceElement.setAttribute("src",source.src);sourceElement.setAttribute("type",source.type);videoElement.appendChild(sourceElement)});target.appendChild(videoElement);_videoJs(videoElement,{},function(){each(target.childNodes,function(childNode){if(childNode.attributes&&childNode.attributes.id&&childNode.attributes.id.value===opts.attributes.id){element=childNode;return false}});each(element.childNodes,function(childNode){if(childNode.tagName.toLowerCase()==="object"){flash=true;return false}});onReady=function(e,notSupported){cb(null,element,this,notSupported===undefined)};if(opts.attributes.resize){resizeList.push({id:element.attributes.id.value,width:this.width(),height:this.height()});self.resizeVideos()}if(flash){onReady(null,true)}else{_videoJs(opts.attributes.id).on("loadedmetadata",onReady)}})};this.screenshot=function(video,opts){var ctx,canvas=document.createElement("canvas");opts=opts||{};var origWidth=opts.origWidth||video.videoWidth;var origHeight=opts.origHeight||video.videoHeight;if(!origWidth||!origHeight){err("Video has invalid dimensions or metadata has not yet loaded.");return false}canvas.width=origWidth;canvas.height=origHeight;ctx=canvas.getContext("2d");ctx.drawImage(video,0,0,origWidth,origHeight);return canvas.toDataURL("image/png")};this.resize=function(image,opts){var maxWidth=opts.maxWidth||50,maxHeight=opts.maxHeight||50,canvasOut=document.createElement("canvas"),canvasIn=document.createElement("canvas"),ctxOut=canvasOut.getContext("2d"),ctxIn=canvasIn.getContext("2d"),origWidth=opts.origWidth||image.width,origHeight=opts.origHeight||image.height,cropWidth,cropHeight,widthFirstRatio=opts.maxWidth/opts.origWidth,widthFirstHeight=opts.origHeight*widthFirstRatio,heightFirstRatio=opts.maxHeight/opts.origHeight,heightFirstWidth=opts.origWidth*heightFirstRatio;canvasIn.width=origWidth;canvasIn.height=origHeight;ctxIn.drawImage(image,0,0);canvasOut.width=maxWidth;canvasOut.height=maxHeight;if(widthFirstHeight<maxHeight){cropWidth=(maxWidth-canvasIn.width*heightFirstRatio)/2;ctxOut.drawImage(canvasIn,0,0,canvasIn.width,canvasIn.height,cropWidth,0,canvasIn.width*heightFirstRatio,canvasIn.height*heightFirstRatio)}else{cropHeight=(maxHeight-canvasIn.height*widthFirstRatio)/2;ctxOut.drawImage(canvasIn,0,0,canvasIn.width,canvasIn.height,0,cropHeight,canvasIn.width*widthFirstRatio,canvasIn.height*widthFirstRatio)}return canvasOut.toDataURL()};this.resizeData=function(imageData,opts,cb){opts=opts||{};var self=this,image=new Image;image.onload=function(){cb(null,self.resize(image,opts))};image.src=imageData}};var jst=new JSThumb;if(typeof window!="undefined"&&typeof module=="undefined"){window.jsthumb=jst;window.onresize=jst.resizeVideos}else{module.exports=jst}}()}()},{}],42:[function(require,module,exports){!function(){var View=require("../base"),Backbone=require("backbone"),_=require("lodash"),NavbarView=View.extend({template:require("../../templates/layout/navbar.hbs"),initialize:function(options){this.app=options.app;this.pages=this.app.db.fetchCollection("pages");this.unprocessed=this.app.db.fetchCollection("unprocessedUploads");this.listenTo(this.pages,"change add remove sort",this.render,this);this.listenTo(this.unprocessed,"change add remove",this.render,this);this.listenTo(this.app.getUser(),"change",this.render,this);this.listenTo(this.app,"flash",this.render,this);this.renderOnReady(this.pages,this.unprocessed,this.app.getUser())},context:function(){var addMediaHref=null,editPageHref=null,modelAttrs=[],unprocessedCount=this.unprocessed.length,pluralS=this.unprocessed.length===1?"":"s",antiPluralS=this.unprocessed.length!==1?"":"s",unprocessedPrompt="Choose thumbnail"+antiPluralS+" for "+this.unprocessed.length+" upload"+pluralS;this.pages.forEach(function(model){if(!this.app.isLoggedIn()&&!model.attributes.isPublished){return}var safename=encodeURIComponent(model.attributes.name),attrs=_.extend(_.clone(model.attributes),{href:"/page/"+safename,editHref:"/page/"+safename+"/edit",addHref:"/page/"+safename+"/addMedia",active:false});if(Backbone.history.fragment===attrs.href.replace(/^\//,"")||Backbone.history.fragment.indexOf("page/"+safename+"/")==0){attrs.active=true;editPageHref=attrs.editHref;addMediaHref=attrs.addHref}modelAttrs.push(attrs)},this);return this.getContext({pages:modelAttrs,editPageHref:editPageHref,addMediaHref:addMediaHref,createHref:"/createPage",reviewHref:"/review",isHome:Backbone.history.fragment==="",isPage:Backbone.history.fragment.match(/^(edit)?[pP]age\//)?true:false,isEditingPage:Backbone.history.fragment.match(/^page\/[a-zA-Z0-9\-]+\/edit$/)?true:false,isAddingMedia:Backbone.history.fragment.match(/^page\/[a-zA-Z0-9\-]+\/addMedia$/)?true:false,isEditingMedia:Backbone.history.fragment.match(/^media\/(image|video)\/[a-zA-Z0-9\-]+\/edit$/)?true:false,isCreatingPage:Backbone.history.fragment.match(/^createPage/)?true:false,isReviewingUploads:Backbone.history.fragment.match(/^review/)?true:false,unprocessedCount:unprocessedCount,unprocessedPrompt:unprocessedPrompt})}});module.exports=NavbarView}()},{"../../templates/layout/navbar.hbs":72,"../base":45,backbone:55,lodash:34}],44:[function(require,module,exports){var Handlebars=require("handlebars-runtime");module.exports=Handlebars.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"];helpers=this.merge(helpers,Handlebars.helpers);data=data||{};var buffer="",stack1,functionType="function",escapeExpression=this.escapeExpression;buffer+='<div class="container">\n  <div id="header">\n  </div>\n  <div id="content" class="row">\n    <div class="span12 centered">\n      <h1 class="title">'+escapeExpression((stack1=(stack1=depth0.sitetitle,stack1==null||stack1===false?stack1:stack1.value),typeof stack1===functionType?stack1.apply(depth0):stack1))+'</h1>\n    </div>\n  </div>\n</div>\n<div id="footer" class="bottom-menu">\n</div>';return buffer})},{"handlebars-runtime":73}],46:[function(require,module,exports){var Handlebars=require("handlebars-runtime");module.exports=Handlebars.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"];helpers=this.merge(helpers,Handlebars.helpers);data=data||{};var buffer="",stack1,functionType="function",escapeExpression=this.escapeExpression,self=this;function program1(depth0,data){var buffer="",stack1;buffer+='\n        <div class="alert alert-info">\n          <h3>Welcome Back, '+escapeExpression((stack1=(stack1=depth0.user,stack1==null||stack1===false?stack1:stack1.username),typeof stack1===functionType?stack1.apply(depth0):stack1))+'</h3>\n          <p>You\'re now able to edit your website.</p>\n          <a href="/" class="btn btn-info btn-wide app">Go to homepage</a>\n          <a href="/logout" class="btn btn-danger btn-wide app">Log Out</a>\n        </div>\n      ';return buffer}function program3(depth0,data){var buffer="",stack1,stack2;buffer+="\n        ";stack1=helpers["if"].call(depth0,depth0.debug,{hash:{},inverse:self.noop,fn:self.program(4,program4,data),data:data});if(stack1||stack1===0){buffer+=stack1}buffer+="\n        ";stack2=helpers["if"].call(depth0,(stack1=depth0.user,stack1==null||stack1===false?stack1:stack1.error),{hash:{},inverse:self.noop,fn:self.program(6,program6,data),data:data});if(stack2||stack2===0){buffer+=stack2}buffer+='\n        <form>\n          <div class="control-group">\n            <input type="text" name="username" value="'+escapeExpression((stack1=(stack1=depth0.user,stack1==null||stack1===false?stack1:stack1.username),typeof stack1===functionType?stack1.apply(depth0):stack1))+'" class="span6" placeholder="Username" />\n          </div>\n          <div class="control-group">\n            <input type="password" name="password" value="" class="span6" placeholder="Password" />\n          </div>\n          <div class="actions">\n            <button type="submit" class="btn btn-primary btn-block">Log In</button>\n          </div>\n        </form>\n      ';return buffer}function program4(depth0,data){return'\n          <div class="alert alert-info">\n            <h3>Test Account Available</h3>\n            <p>This app is running in debug mode. Click the button below to provision a temporary account.</p>\n            <a class="provisionTestAccount btn btn-info btn-block">Create Test Account</a>\n          </div>\n        '}function program6(depth0,data){var buffer="",stack1;buffer+='\n          <div class="alert alert-error">\n            '+escapeExpression((stack1=(stack1=depth0.user,stack1==null||stack1===false?stack1:stack1.error),typeof stack1===functionType?stack1.apply(depth0):stack1))+"\n          </div>\n        ";return buffer}buffer+='<div class="container">\n  <div id="header">\n  </div>\n  <div id="content" class="row">\n    <div class="span6 offset3">\n      ';stack1=helpers["if"].call(depth0,depth0.isLoggedIn,{hash:{},inverse:self.program(3,program3,data),fn:self.program(1,program1,data),data:data});if(stack1||stack1===0){buffer+=stack1}buffer+='\n    </div>\n  </div>\n</div>\n<div id="footer" class="bottom-menu">\n</div>\n';return buffer})},{"handlebars-runtime":73}],47:[function(require,module,exports){var Handlebars=require("handlebars-runtime");module.exports=Handlebars.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"];helpers=this.merge(helpers,Handlebars.helpers);data=data||{};var buffer="",stack1,functionType="function",escapeExpression=this.escapeExpression,self=this;function program1(depth0,data){var buffer="",stack1,stack2;buffer+="\n            <tr>\n              <td><big>";if(stack1=helpers.name){stack1=stack1.call(depth0,{hash:{},data:data})}else{stack1=depth0.name;stack1=typeof stack1===functionType?stack1.apply(depth0):stack1}buffer+=escapeExpression(stack1)+"</big></td>\n              <td><big>";if(stack1=helpers.reviewIssue){stack1=stack1.call(depth0,{hash:{},data:data})}else{stack1=depth0.reviewIssue;stack1=typeof stack1===functionType?stack1.apply(depth0):stack1}buffer+=escapeExpression(stack1)+"</big></td>\n              <td><a ";stack2=helpers.unless.call(depth0,(stack1=data,stack1==null||stack1===false?stack1:stack1.index),{hash:{},inverse:self.noop,fn:self.program(2,program2,data),data:data});if(stack2||stack2===0){buffer+=stack2}buffer+=' href="';if(stack2=helpers.editHref){stack2=stack2.call(depth0,{hash:{},data:data})}else{stack2=depth0.editHref;stack2=typeof stack2===functionType?stack2.apply(depth0):stack2}buffer+=escapeExpression(stack2)+'" class="app btn btn-info btn-mini">Fix It!</a></td>\n            </tr>\n          ';return buffer}function program2(depth0,data){return'id="firstFixButton"'}function program4(depth0,data){return'\n            <tr>\n              <td colspan="3">Nothing to review, good job!</td>\n            </tr>\n          '}buffer+='<div class="container">\n  <div id="header">\n  </div>\n  <div id="content" class="row">\n    <div class="span12 centered">\n      <table class="table">\n        <thead>\n          <tr>\n            <th>File</th>\n            <th colspan="2">Problem</th>\n          </tr>\n        </thead>\n        <tbody>\n          ';stack1=helpers.each.call(depth0,depth0.unprocessed,{hash:{},inverse:self.noop,fn:self.program(1,program1,data),data:data});if(stack1||stack1===0){buffer+=stack1}buffer+="\n          ";stack1=helpers["if"].call(depth0,depth0.nothingToReview,{hash:{},inverse:self.noop,fn:self.program(4,program4,data),data:data});if(stack1||stack1===0){buffer+=stack1}buffer+='\n        </tbody>\n      </table>\n    </div>\n  </div>\n</div>\n<div id="footer" class="bottom-menu">\n</div>';return buffer})},{"handlebars-runtime":73}],73:[function(require,module,exports){var Handlebars={};module.exports=Handlebars;!function(Handlebars,undefined){Handlebars.VERSION="1.0.0";Handlebars.COMPILER_REVISION=4;Handlebars.REVISION_CHANGES={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:">= 1.0.0"};Handlebars.helpers={};Handlebars.partials={};var toString=Object.prototype.toString,functionType="[object Function]",objectType="[object Object]";Handlebars.registerHelper=function(name,fn,inverse){if(toString.call(name)===objectType){if(inverse||fn){throw new Handlebars.Exception("Arg not supported with multiple helpers")}Handlebars.Utils.extend(this.helpers,name)}else{if(inverse){fn.not=inverse}this.helpers[name]=fn}};Handlebars.registerPartial=function(name,str){if(toString.call(name)===objectType){Handlebars.Utils.extend(this.partials,name)}else{this.partials[name]=str}};Handlebars.registerHelper("helperMissing",function(arg){if(arguments.length===2){return undefined}else{throw new Error("Missing helper: '"+arg+"'")}});Handlebars.registerHelper("blockHelperMissing",function(context,options){var inverse=options.inverse||function(){},fn=options.fn;var type=toString.call(context);if(type===functionType){context=context.call(this)}if(context===true){return fn(this)}else if(context===false||context==null){return inverse(this)}else if(type==="[object Array]"){if(context.length>0){return Handlebars.helpers.each(context,options)}else{return inverse(this)}}else{return fn(context)}});Handlebars.K=function(){};Handlebars.createFrame=Object.create||function(object){Handlebars.K.prototype=object;var obj=new Handlebars.K;Handlebars.K.prototype=null;return obj};Handlebars.logger={DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,methodMap:{0:"debug",1:"info",2:"warn",3:"error"},log:function(level,obj){if(Handlebars.logger.level<=level){var method=Handlebars.logger.methodMap[level];if(typeof console!=="undefined"&&console[method]){console[method].call(console,obj)}}}};Handlebars.log=function(level,obj){Handlebars.logger.log(level,obj)};Handlebars.registerHelper("each",function(context,options){var fn=options.fn,inverse=options.inverse;var i=0,ret="",data;var type=toString.call(context);if(type===functionType){context=context.call(this)}if(options.data){data=Handlebars.createFrame(options.data)}if(context&&typeof context==="object"){if(context instanceof Array){for(var j=context.length;i<j;i++){if(data){data.index=i}ret=ret+fn(context[i],{data:data})}}else{for(var key in context){if(context.hasOwnProperty(key)){if(data){data.key=key}ret=ret+fn(context[key],{data:data});i++}}}}if(i===0){ret=inverse(this)}return ret});Handlebars.registerHelper("if",function(conditional,options){var type=toString.call(conditional);if(type===functionType){conditional=conditional.call(this)}if(!conditional||Handlebars.Utils.isEmpty(conditional)){return options.inverse(this)}else{return options.fn(this)}});Handlebars.registerHelper("unless",function(conditional,options){return Handlebars.helpers["if"].call(this,conditional,{fn:options.inverse,inverse:options.fn})});Handlebars.registerHelper("with",function(context,options){var type=toString.call(context);if(type===functionType){context=context.call(this)}if(!Handlebars.Utils.isEmpty(context))return options.fn(context)});Handlebars.registerHelper("log",function(context,options){var level=options.data&&options.data.level!=null?parseInt(options.data.level,10):1;Handlebars.log(level,context)});var errorProps=["description","fileName","lineNumber","message","name","number","stack"];Handlebars.Exception=function(message){var tmp=Error.prototype.constructor.apply(this,arguments);for(var idx=0;idx<errorProps.length;idx++){this[errorProps[idx]]=tmp[errorProps[idx]]}};Handlebars.Exception.prototype=new Error;Handlebars.SafeString=function(string){this.string=string};Handlebars.SafeString.prototype.toString=function(){return this.string.toString()};var escape={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"};var badChars=/[&<>"'`]/g;var possible=/[&<>"'`]/;var escapeChar=function(chr){return escape[chr]||"&amp;"};Handlebars.Utils={extend:function(obj,value){for(var key in value){if(value.hasOwnProperty(key)){obj[key]=value[key]}}},escapeExpression:function(string){if(string instanceof Handlebars.SafeString){return string.toString()}else if(string==null||string===false){return""}string=string.toString();if(!possible.test(string)){return string}return string.replace(badChars,escapeChar)},isEmpty:function(value){if(!value&&value!==0){return true}else if(toString.call(value)==="[object Array]"&&value.length===0){return true}else{return false}}};Handlebars.VM={template:function(templateSpec){var container={escapeExpression:Handlebars.Utils.escapeExpression,invokePartial:Handlebars.VM.invokePartial,programs:[],program:function(i,fn,data){var programWrapper=this.programs[i];if(data){programWrapper=Handlebars.VM.program(i,fn,data)}else if(!programWrapper){programWrapper=this.programs[i]=Handlebars.VM.program(i,fn)}return programWrapper},merge:function(param,common){var ret=param||common;if(param&&common){ret={};Handlebars.Utils.extend(ret,common);Handlebars.Utils.extend(ret,param)}return ret},programWithDepth:Handlebars.VM.programWithDepth,noop:Handlebars.VM.noop,compilerInfo:null};return function(context,options){options=options||{};var result=templateSpec.call(container,Handlebars,context,options.helpers,options.partials,options.data);var compilerInfo=container.compilerInfo||[],compilerRevision=compilerInfo[0]||1,currentRevision=Handlebars.COMPILER_REVISION;if(compilerRevision!==currentRevision){if(compilerRevision<currentRevision){var runtimeVersions=Handlebars.REVISION_CHANGES[currentRevision],compilerVersions=Handlebars.REVISION_CHANGES[compilerRevision];throw"Template was precompiled with an older version of Handlebars than the current runtime. "+"Please update your precompiler to a newer version ("+runtimeVersions+") or downgrade your runtime to an older version ("+compilerVersions+")."}else{throw"Template was precompiled with a newer version of Handlebars than the current runtime. "+"Please update your runtime to a newer version ("+compilerInfo[1]+")."}}return result}},programWithDepth:function(i,fn,data){var args=Array.prototype.slice.call(arguments,3);var program=function(context,options){options=options||{};return fn.apply(this,[context,options.data||data].concat(args))};program.program=i;program.depth=args.length;return program},program:function(i,fn,data){var program=function(context,options){options=options||{};return fn(context,options.data||data)};program.program=i;program.depth=0;return program},noop:function(){return""},invokePartial:function(partial,name,context,helpers,partials,data){var options={helpers:helpers,partials:partials,data:data};if(partial===undefined){throw new Handlebars.Exception("The partial "+name+" could not be found")}else if(partial instanceof Function){return partial(context,options)}else if(!Handlebars.compile){throw new Handlebars.Exception("The partial "+name+" could not be compiled when running in runtime-only mode")}else{partials[name]=Handlebars.compile(partial,{data:data!==undefined});return partials[name](context,options)}}};Handlebars.template=Handlebars.VM.template}(Handlebars)},{}],48:[function(require,module,exports){var Handlebars=require("handlebars-runtime");module.exports=Handlebars.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"];helpers=this.merge(helpers,Handlebars.helpers);data=data||{};var buffer="",stack1,functionType="function",escapeExpression=this.escapeExpression;buffer+='<div class="container">\n  <div id="header">\n  </div>\n  <div id="content" class="row">\n    <div class="span12 centered">\n      <form>\n        <fieldset>\n          <legend>Create A New Page</legend>\n          <label class="control-label" for="name">Page Title</label>\n          <input type="text" id="name" name="name" placeholder="Untitled Page" value="'+escapeExpression((stack1=(stack1=depth0.page,stack1==null||stack1===false?stack1:stack1.name),typeof stack1===functionType?stack1.apply(depth0):stack1))+'">\n          <div class="control-group">\n            <div class="controls">\n              <button type="submit" class="btn btn-success">Create</button>\n            </div>\n          </div>\n        </fieldset>\n      </form>\n    </div>\n  </div>\n</div>\n<div id="footer" class="bottom-menu">\n</div>\n';return buffer})},{"handlebars-runtime":73}],50:[function(require,module,exports){var Handlebars=require("handlebars-runtime");module.exports=Handlebars.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"];helpers=this.merge(helpers,Handlebars.helpers);data=data||{};var buffer="",stack1,functionType="function",escapeExpression=this.escapeExpression,self=this;function program1(depth0,data){var buffer="",stack1;buffer+="\n      <fieldset>\n        <legend>Edit ";if(stack1=helpers.name){stack1=stack1.call(depth0,{hash:{},data:data})}else{stack1=depth0.name;stack1=typeof stack1===functionType?stack1.apply(depth0):stack1}buffer+=escapeExpression(stack1)+'</legend>\n        <label class="control-label" for="name">Page Title</label>\n        <input type="text" id="name" name="name" placeholder="Untitled Page" value="';if(stack1=helpers.name){stack1=stack1.call(depth0,{hash:{},data:data})}else{stack1=depth0.name;stack1=typeof stack1===functionType?stack1.apply(depth0):stack1}buffer+=escapeExpression(stack1)+'">\n        <div class="control-group">\n          <label class="control-label" for="isPublished">Visibility</label>\n          <div class="switch switch-large"\n            data-on-label="Public"\n            data-off-label="Private">\n            <input name="isPublished" ';stack1=helpers["if"].call(depth0,depth0.isPublished,{hash:{},inverse:self.noop,fn:self.program(2,program2,data),data:data});if(stack1||stack1===0){buffer+=stack1}buffer+=' type="checkbox" />\n          </div>\n        </div>\n        <div class="control-group">\n          <div class="controls">\n            <button type="submit" class="btn btn-success">Save</button>\n            <a class="btn btn-danger">Delete</a>\n          </div>\n        </div>\n      </fieldset>\n      ';return buffer}function program2(depth0,data){return'checked="checked"'}function program4(depth0,data){var buffer="",stack1;buffer+='\n          <li class="span4" data-uuid="';if(stack1=helpers.id){stack1=stack1.call(depth0,{hash:{},data:data})}else{stack1=depth0.id;stack1=typeof stack1===functionType?stack1.apply(depth0):stack1}buffer+=escapeExpression(stack1)+'">\n            <div class="relfix">\n              <img src="';if(stack1=helpers.thumbnailUrl){stack1=stack1.call(depth0,{hash:{},data:data})}else{stack1=depth0.thumbnailUrl;stack1=typeof stack1===functionType?stack1.apply(depth0):stack1}buffer+=escapeExpression(stack1)+'" alt="';if(stack1=helpers.name){stack1=stack1.call(depth0,{hash:{},data:data})}else{stack1=depth0.name;stack1=typeof stack1===functionType?stack1.apply(depth0):stack1}buffer+=escapeExpression(stack1)+'" class="img-polaroid" />\n              <p class="absfix">\n                <a href="';if(stack1=helpers.editHref){stack1=stack1.call(depth0,{hash:{},data:data})}else{stack1=depth0.editHref;stack1=typeof stack1===functionType?stack1.apply(depth0):stack1}buffer+=escapeExpression(stack1)+'" class="app btn btn-mini btn-info">Edit</a>\n              </p>\n            </div>\n          </li>\n        ';return buffer}buffer+='<div class="container">\n  <div id="header">\n  </div>\n  <div id="content" class="row">\n    <div class="span12 centered">\n    <form>\n      ';stack1=helpers["with"].call(depth0,depth0.page,{hash:{},inverse:self.noop,fn:self.program(1,program1,data),data:data});if(stack1||stack1===0){buffer+=stack1}buffer+='\n      <fieldset>\n        <legend>Sort Media</legend>\n        <ul class="mediagrid sortable">\n        ';stack1=helpers.each.call(depth0,depth0.media,{hash:{},inverse:self.noop,fn:self.program(4,program4,data),data:data});if(stack1||stack1===0){buffer+=stack1}buffer+='\n        </ul>\n      </fieldset>\n    </form>\n    </div>\n  </div>\n</div>\n<div id="footer" class="bottom-menu">\n</div>\n';return buffer})},{"handlebars-runtime":73}],52:[function(require,module,exports){var Handlebars=require("handlebars-runtime");module.exports=Handlebars.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"];helpers=this.merge(helpers,Handlebars.helpers);data=data||{};return'<div class="container">\n  <div id="header">\n  </div>\n  <div id="content" class="row">\n  </div>\n</div>\n<div id="footer" class="bottom-menu">\n</div>\n'})},{"handlebars-runtime":73}],53:[function(require,module,exports){var Handlebars=require("handlebars-runtime");module.exports=Handlebars.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"];helpers=this.merge(helpers,Handlebars.helpers);data=data||{};var buffer="",stack1,stack2,self=this;function program1(depth0,data){return'\n    <div class="span2 offset5 centered">\n\n  <!--\n      <div class="tooltip-trigger" data-title="Upload a new file from your computer or elsewhere" data-placement="left">\n  -->\n      <div id="uploadFileLink">\n        <p>\n          <a href="#" class="filepicker">\n            <img class="flatIcon" src="/img/file_upload.png" alt="upload-file" />\n          </a>\n        </p>\n        <p>\n          <a href="#" class="filepicker btn btn-success">Upload File</a>\n        </p>\n      </div>\n    </div>\n  <!--\n    <div class="span2 centered">\n      <div class="tooltip-trigger" data-title="Use a file on another page" data-placement="right">\n        <p>\n          <a href="#" class="useExisting">\n            <img class="flatIcon" src="/img/folder.png" alt="upload-file" />\n          </a>\n        </p>\n        <p>\n          <a href="#" class="useExisting btn btn-info">Use Existing</a>\n        </p>\n      </div>\n    </div>\n  -->\n    '}buffer+='<div class="container">\n  <div id="header">\n  </div>\n  <div id="content" class="row">\n    ';stack2=helpers["if"].call(depth0,(stack1=depth0.page,stack1==null||stack1===false?stack1:stack1.id),{hash:{},inverse:self.noop,fn:self.program(1,program1,data),data:data});if(stack2||stack2===0){buffer+=stack2}buffer+='\n  </div>\n</div>\n<div id="footer" class="bottom-menu">\n</div>\n';return buffer})},{"handlebars-runtime":73}],68:[function(require,module,exports){var Handlebars=require("handlebars-runtime");module.exports=Handlebars.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"];helpers=this.merge(helpers,Handlebars.helpers);data=data||{};var buffer="",stack1,functionType="function",escapeExpression=this.escapeExpression,self=this;function program1(depth0,data){var buffer="",stack1;buffer+='\n<div class="container">\n  <div id="header">\n  </div>\n  <div id="content" class="row">\n    <div class="span6">\n      <form>\n        <fieldset>\n          <legend>Edit ';if(stack1=helpers.name){stack1=stack1.call(depth0,{hash:{},data:data})}else{stack1=depth0.name;stack1=typeof stack1===functionType?stack1.apply(depth0):stack1}buffer+=escapeExpression(stack1)+'</legend>\n          <label class="control-label" for="name">Title</label>\n          <input type="text" id="fileNameField" name="name" placeholder="Untitled ';if(stack1=helpers.type){stack1=stack1.call(depth0,{hash:{},data:data})}else{stack1=depth0.type;stack1=typeof stack1===functionType?stack1.apply(depth0):stack1}buffer+=escapeExpression(stack1)+'" value="';if(stack1=helpers.name){stack1=stack1.call(depth0,{hash:{},data:data})}else{stack1=depth0.name;stack1=typeof stack1===functionType?stack1.apply(depth0):stack1}buffer+=escapeExpression(stack1)+'">\n          <label class="control-label" for="attributes">Attributes <span data-toggle="tooltip" data-title="Example Attributes" data-content="These appear on your website. You can use single words like &quot;&lt;strong&gt;Superbowl&lt;/strong&gt;&quot; or &quot;&lt;strong&gt;Director:&lt;/strong&gt; Michael Bay&quot; to get additional formatting.&lt;/p&gt;" class="fui-question"></span></label>\n          <input name="attribs" class="tagsinput tagsinput-primary" value="';if(stack1=helpers.attributeList){stack1=stack1.call(depth0,{hash:{},data:data})}else{stack1=depth0.attributeList;stack1=typeof stack1===functionType?stack1.apply(depth0):stack1}buffer+=escapeExpression(stack1)+'" id="tags1371235017630" style="display: none;" />\n          <div class="control-group">\n            <div class="controls">\n              <button type="submit" class="btn btn-success">Save</button>\n              <a class="btn btn-danger">Delete</a>\n            </div>\n          </div>\n        </fieldset>\n        <fieldset>\n          <legend>Set A Thumbnail</legend>\n          ';stack1=helpers["if"].call(depth0,depth0.thumbnailS3key,{hash:{},inverse:self.program(4,program4,data),fn:self.program(2,program2,data),data:data});if(stack1||stack1===0){buffer+=stack1}buffer+='\n          <div class="control-group">\n            <div class="controls">\n              ';stack1=helpers["if"].call(depth0,depth0.isImage,{hash:{},inverse:self.noop,fn:self.program(6,program6,data),data:data});if(stack1||stack1===0){buffer+=stack1}buffer+="\n              ";stack1=helpers["if"].call(depth0,depth0.isVideo,{hash:{},inverse:self.noop,fn:self.program(8,program8,data),data:data});if(stack1||stack1===0){buffer+=stack1}buffer+='\n              <a id="useCustomButton" href="#" class="btn btn-success upload">Upload Thumbnail</a>\n            </div>\n          </div>\n          <input type="hidden" id="thumbnail" name="thumbnail" value="';if(stack1=helpers.thumbnail){stack1=stack1.call(depth0,{hash:{},data:data})}else{stack1=depth0.thumbnail;stack1=typeof stack1===functionType?stack1.apply(depth0):stack1}buffer+=escapeExpression(stack1)+'">\n        </fieldset>\n      </form>\n    </div>\n    <div id="thumber" class="span6">\n    </div>\n  </div>\n</div>\n<div id="footer" class="bottom-menu">\n</div>\n';return buffer}function program2(depth0,data){var buffer="",stack1;buffer+='\n            <p>\n              <img src="';if(stack1=helpers.thumbnailUrl){stack1=stack1.call(depth0,{hash:{},data:data})}else{stack1=depth0.thumbnailUrl;stack1=typeof stack1===functionType?stack1.apply(depth0):stack1}buffer+=escapeExpression(stack1)+'" class="thumbHolder img-polaroid" alt="';if(stack1=helpers.name){stack1=stack1.call(depth0,{hash:{},data:data})}else{stack1=depth0.name;stack1=typeof stack1===functionType?stack1.apply(depth0):stack1}buffer+=escapeExpression(stack1)+' Thumbnail" />\n            </p>\n          ';return buffer}function program4(depth0,data){return'\n            <div class="alert alert-warning">\n              <big>No thumbnail yet! Select or upload one.</big>\n            </div>\n          '}function program6(depth0,data){return'\n                <a id="useOriginalButton" href="#" class="btn btn-info crop">Use Original</a>\n              '}function program8(depth0,data){return'\n                <a id="useCaptureButton" href="#" class="btn btn-info capture">Use Current Frame</a>\n              '}stack1=helpers["with"].call(depth0,depth0.media,{hash:{},inverse:self.noop,fn:self.program(1,program1,data),data:data});if(stack1||stack1===0){buffer+=stack1}buffer+="\n";return buffer})},{"handlebars-runtime":73}],69:[function(require,module,exports){var Handlebars=require("handlebars-runtime");module.exports=Handlebars.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"];helpers=this.merge(helpers,Handlebars.helpers);data=data||{};var buffer="",stack1,functionType="function",escapeExpression=this.escapeExpression,self=this;function program1(depth0,data){var buffer="",stack1;buffer+="\n      ";stack1=helpers["if"].call(depth0,depth0.isVideo,{hash:{},inverse:self.program(4,program4,data),fn:self.program(2,program2,data),data:data});if(stack1||stack1===0){buffer+=stack1
}buffer+='\n      <div class="media_meta">\n        <h4>';if(stack1=helpers.name){stack1=stack1.call(depth0,{hash:{},data:data})}else{stack1=depth0.name;stack1=typeof stack1===functionType?stack1.apply(depth0):stack1}buffer+=escapeExpression(stack1)+"</h4>\n        <ul>\n        ";stack1=helpers.each.call(depth0,depth0.attribs,{hash:{},inverse:self.noop,fn:self.program(6,program6,data),data:data});if(stack1||stack1===0){buffer+=stack1}buffer+="\n        </ul>\n      </div>\n    ";return buffer}function program2(depth0,data){var buffer="",stack1;buffer+='\n        <video id="media_video" class="video-js vjs-default-skin"\n        controls preload="auto" width="auto" height="auto">\n        <source src="';if(stack1=helpers.url){stack1=stack1.call(depth0,{hash:{},data:data})}else{stack1=depth0.url;stack1=typeof stack1===functionType?stack1.apply(depth0):stack1}buffer+=escapeExpression(stack1)+"\" type='video/mp4' />\n        </video>\n      ";return buffer}function program4(depth0,data){var buffer="",stack1;buffer+='\n        <img id="media_image" class="pickerHolder img-polaroid" alt="';if(stack1=helpers.name){stack1=stack1.call(depth0,{hash:{},data:data})}else{stack1=depth0.name;stack1=typeof stack1===functionType?stack1.apply(depth0):stack1}buffer+=escapeExpression(stack1)+'" src="';if(stack1=helpers.url){stack1=stack1.call(depth0,{hash:{},data:data})}else{stack1=depth0.url;stack1=typeof stack1===functionType?stack1.apply(depth0):stack1}buffer+=escapeExpression(stack1)+'" />\n      ';return buffer}function program6(depth0,data){var buffer="",stack1;buffer+="\n          <li>";stack1=typeof depth0===functionType?depth0.apply(depth0):depth0;if(stack1||stack1===0){buffer+=stack1}buffer+="</li>\n        ";return buffer}buffer+='<div id="carouselWrapper">\n</div>\n<div id="content" class="container">\n  <div class="row">\n    <div id="preview" class="span12 centered previewPadding">\n    ';stack1=helpers["with"].call(depth0,depth0.media,{hash:{},inverse:self.noop,fn:self.program(1,program1,data),data:data});if(stack1||stack1===0){buffer+=stack1}buffer+="\n    </div>\n  </div>\n</div>\n";return buffer})},{"handlebars-runtime":73}],72:[function(require,module,exports){var Handlebars=require("handlebars-runtime");module.exports=Handlebars.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"];helpers=this.merge(helpers,Handlebars.helpers);data=data||{};var buffer="",stack1,options,functionType="function",escapeExpression=this.escapeExpression,self=this,blockHelperMissing=helpers.blockHelperMissing;function program1(depth0,data){var buffer="",stack1;buffer+='\n      <li><a href="/" class="current app">'+escapeExpression((stack1=(stack1=depth0.sitetitle,stack1==null||stack1===false?stack1:stack1.value),typeof stack1===functionType?stack1.apply(depth0):stack1))+"</a></li>\n    ";return buffer}function program3(depth0,data){var buffer="",stack1;buffer+='\n      <li><a href="/" class="app">'+escapeExpression((stack1=(stack1=depth0.sitetitle,stack1==null||stack1===false?stack1:stack1.value),typeof stack1===functionType?stack1.apply(depth0):stack1))+"</a></li>\n    ";return buffer}function program5(depth0,data){var buffer="",stack1;buffer+="\n      ";stack1=helpers["if"].call(depth0,depth0.active,{hash:{},inverse:self.program(8,program8,data),fn:self.program(6,program6,data),data:data});if(stack1||stack1===0){buffer+=stack1}buffer+="\n    ";return buffer}function program6(depth0,data){var buffer="",stack1;buffer+='\n        <li><a href="';if(stack1=helpers.href){stack1=stack1.call(depth0,{hash:{},data:data})}else{stack1=depth0.href;stack1=typeof stack1===functionType?stack1.apply(depth0):stack1}buffer+=escapeExpression(stack1)+'" class="current app">';if(stack1=helpers.name){stack1=stack1.call(depth0,{hash:{},data:data})}else{stack1=depth0.name;stack1=typeof stack1===functionType?stack1.apply(depth0):stack1}buffer+=escapeExpression(stack1)+"</a></li>\n      ";return buffer}function program8(depth0,data){var buffer="",stack1;buffer+='\n        <li><a href="';if(stack1=helpers.href){stack1=stack1.call(depth0,{hash:{},data:data})}else{stack1=depth0.href;stack1=typeof stack1===functionType?stack1.apply(depth0):stack1}buffer+=escapeExpression(stack1)+'" class="app">';if(stack1=helpers.name){stack1=stack1.call(depth0,{hash:{},data:data})}else{stack1=depth0.name;stack1=typeof stack1===functionType?stack1.apply(depth0):stack1}buffer+=escapeExpression(stack1)+"</a></li>\n      ";return buffer}function program10(depth0,data){var buffer="",stack1;buffer+='\n<div class="centered-boxes">\n  <ul class="nav nav-boxes actionable">\n    ';stack1=helpers["if"].call(depth0,depth0.isPage,{hash:{},inverse:self.noop,fn:self.program(11,program11,data),data:data});if(stack1||stack1===0){buffer+=stack1}buffer+="\n    ";stack1=helpers["if"].call(depth0,depth0.isCreatingPage,{hash:{},inverse:self.program(22,program22,data),fn:self.program(20,program20,data),data:data});if(stack1||stack1===0){buffer+=stack1}buffer+="\n    ";stack1=helpers["if"].call(depth0,depth0.isReviewingUploads,{hash:{},inverse:self.noop,fn:self.program(24,program24,data),data:data});if(stack1||stack1===0){buffer+=stack1}buffer+="\n  </ul>\n</div>\n";return buffer}function program11(depth0,data){var buffer="",stack1;buffer+="\n      ";stack1=helpers["if"].call(depth0,depth0.isAddingMedia,{hash:{},inverse:self.program(14,program14,data),fn:self.program(12,program12,data),data:data});if(stack1||stack1===0){buffer+=stack1}buffer+="\n      ";stack1=helpers["if"].call(depth0,depth0.isEditingPage,{hash:{},inverse:self.program(18,program18,data),fn:self.program(16,program16,data),data:data});if(stack1||stack1===0){buffer+=stack1}buffer+="\n    ";return buffer}function program12(depth0,data){var buffer="",stack1;buffer+='\n        <li><a href="';if(stack1=helpers.addMediaHref){stack1=stack1.call(depth0,{hash:{},data:data})}else{stack1=depth0.addMediaHref;stack1=typeof stack1===functionType?stack1.apply(depth0):stack1}buffer+=escapeExpression(stack1)+'" id="addMediaLink" class="current app">Add Media</a></li>\n      ';return buffer}function program14(depth0,data){var buffer="",stack1;buffer+='\n        <li><a href="';if(stack1=helpers.addMediaHref){stack1=stack1.call(depth0,{hash:{},data:data})}else{stack1=depth0.addMediaHref;stack1=typeof stack1===functionType?stack1.apply(depth0):stack1}buffer+=escapeExpression(stack1)+'" id="addMediaLink" class="app">Add Media</a></li>\n      ';return buffer}function program16(depth0,data){var buffer="",stack1;buffer+='\n        <li><a href="';if(stack1=helpers.editPageHref){stack1=stack1.call(depth0,{hash:{},data:data})}else{stack1=depth0.editPageHref;stack1=typeof stack1===functionType?stack1.apply(depth0):stack1}buffer+=escapeExpression(stack1)+'" class="current app">Edit Page</a></li>\n      ';return buffer}function program18(depth0,data){var buffer="",stack1;buffer+='\n        <li><a href="';if(stack1=helpers.editPageHref){stack1=stack1.call(depth0,{hash:{},data:data})}else{stack1=depth0.editPageHref;stack1=typeof stack1===functionType?stack1.apply(depth0):stack1}buffer+=escapeExpression(stack1)+'" class="app">Edit Page</a></li>\n      ';return buffer}function program20(depth0,data){var buffer="",stack1;buffer+='\n      <li><a href="';if(stack1=helpers.createHref){stack1=stack1.call(depth0,{hash:{},data:data})}else{stack1=depth0.createHref;stack1=typeof stack1===functionType?stack1.apply(depth0):stack1}buffer+=escapeExpression(stack1)+'" id="newPageLink" class="current app">New Page</a></li>\n    ';return buffer}function program22(depth0,data){var buffer="",stack1;buffer+='\n      <li><a href="';if(stack1=helpers.createHref){stack1=stack1.call(depth0,{hash:{},data:data})}else{stack1=depth0.createHref;stack1=typeof stack1===functionType?stack1.apply(depth0):stack1}buffer+=escapeExpression(stack1)+'" id="newPageLink" class="app">New Page</a></li>\n    ';return buffer}function program24(depth0,data){var buffer="",stack1;buffer+='\n      <li><a href="';if(stack1=helpers.reviewHref){stack1=stack1.call(depth0,{hash:{},data:data})}else{stack1=depth0.reviewHref;stack1=typeof stack1===functionType?stack1.apply(depth0):stack1}buffer+=escapeExpression(stack1)+'" class="current app">Review</a></li>\n    ';return buffer}function program26(depth0,data){var buffer="",stack1;buffer+="\n  ";stack1=helpers["if"].call(depth0,depth0.unprocessedCount,{hash:{},inverse:self.noop,fn:self.program(27,program27,data),data:data});if(stack1||stack1===0){buffer+=stack1}buffer+="\n";return buffer}function program27(depth0,data){var buffer="",stack1;buffer+='\n  <div id="unprocessedPrompt" class="alert alert-info centered">\n    <a href="/review" class="btn btn-info btn-wide app">';if(stack1=helpers.unprocessedPrompt){stack1=stack1.call(depth0,{hash:{},data:data})}else{stack1=depth0.unprocessedPrompt;stack1=typeof stack1===functionType?stack1.apply(depth0):stack1}buffer+=escapeExpression(stack1)+"</a>\n  </div>\n  ";return buffer}function program29(depth0,data){var buffer="",stack1;buffer+='\n<div class="alert alert-';if(stack1=helpers.type){stack1=stack1.call(depth0,{hash:{},data:data})}else{stack1=depth0.type;stack1=typeof stack1===functionType?stack1.apply(depth0):stack1}buffer+=escapeExpression(stack1)+'">\n  <button type="button" class="close fui-cross" data-dismiss="alert"></button>\n  ';if(stack1=helpers.message){stack1=stack1.call(depth0,{hash:{},data:data})}else{stack1=depth0.message;stack1=typeof stack1===functionType?stack1.apply(depth0):stack1}buffer+=escapeExpression(stack1)+"\n</div>\n";return buffer}buffer+='<div class="centered-boxes">\n  <ul id="mainnav" class="nav nav-boxes">\n    ';stack1=helpers["if"].call(depth0,depth0.isHome,{hash:{},inverse:self.program(3,program3,data),fn:self.program(1,program1,data),data:data});if(stack1||stack1===0){buffer+=stack1}buffer+="\n    ";stack1=helpers.each.call(depth0,depth0.pages,{hash:{},inverse:self.noop,fn:self.program(5,program5,data),data:data});if(stack1||stack1===0){buffer+=stack1}buffer+="\n  </ul>\n</div>\n";stack1=helpers["if"].call(depth0,depth0.isLoggedIn,{hash:{},inverse:self.noop,fn:self.program(10,program10,data),data:data});if(stack1||stack1===0){buffer+=stack1}buffer+="\n";stack1=helpers.unless.call(depth0,depth0.isReviewingUploads,{hash:{},inverse:self.noop,fn:self.program(26,program26,data),data:data});if(stack1||stack1===0){buffer+=stack1}buffer+="\n";options={hash:{},inverse:self.noop,fn:self.program(29,program29,data),data:data};if(stack1=helpers.flash){stack1=stack1.call(depth0,options)}else{stack1=depth0.flash;stack1=typeof stack1===functionType?stack1.apply(depth0):stack1}if(!helpers.flash){stack1=blockHelperMissing.call(depth0,stack1,options)}if(stack1||stack1===0){buffer+=stack1}buffer+="\n";return buffer})},{"handlebars-runtime":73}],61:[function(require,module,exports){var Handlebars=require("handlebars-runtime");module.exports=Handlebars.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"];helpers=this.merge(helpers,Handlebars.helpers);data=data||{};var buffer="",stack1,self=this;function program1(depth0,data){return'\n            <li><a href="/logout" class="app">Log Out</a></li>\n          '}function program3(depth0,data){return'\n            <li><a href="/login" class="app">Log In</a></li>\n          '}buffer+='  <div class="container">\n    <div class="row">\n      <div class="span10">\n        <ul class="bottom-links">\n          ';stack1=helpers["if"].call(depth0,depth0.isLoggedIn,{hash:{},inverse:self.program(3,program3,data),fn:self.program(1,program1,data),data:data});if(stack1||stack1===0){buffer+=stack1}buffer+="\n        </ul>\n      </div>\n    </div>\n  </div>\n";return buffer})},{"handlebars-runtime":73}],74:[function(require,module,exports){!function(global){!function(window){var undefined;var freeExports=typeof exports=="object"&&exports;var freeModule=typeof module=="object"&&module&&module.exports==freeExports&&module;var freeGlobal=typeof global=="object"&&global;if(freeGlobal.global===freeGlobal||freeGlobal.window===freeGlobal){window=freeGlobal}var idCounter=0;var indicatorObject={};var keyPrefix=+new Date+"";var largeArraySize=200;var reEmptyStringLeading=/\b__p \+= '';/g,reEmptyStringMiddle=/\b(__p \+=) '' \+/g,reEmptyStringTrailing=/(__e\(.*?\)|\b__t\)) \+\n'';/g;var reEscapedHtml=/&(?:amp|lt|gt|quot|#39);/g;var reEsTemplate=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g;var reFlags=/\w*$/;var reInterpolate=/<%=([\s\S]+?)%>/g;var whitespace=" 	\f ﻿"+"\n\r\u2028\u2029"+" ᠎             　";var reLeadingSpacesAndZeros=RegExp("^["+whitespace+"]*0+(?=.$)");var reNoMatch=/($^)/;var reUnescapedHtml=/[&<>"']/g;var reUnescapedString=/['\n\r\t\u2028\u2029\\]/g;var contextProps=["Array","Boolean","Date","Function","Math","Number","Object","RegExp","String","_","attachEvent","clearTimeout","isFinite","isNaN","parseInt","setImmediate","setTimeout"];var templateCounter=0;var argsClass="[object Arguments]",arrayClass="[object Array]",boolClass="[object Boolean]",dateClass="[object Date]",funcClass="[object Function]",numberClass="[object Number]",objectClass="[object Object]",regexpClass="[object RegExp]",stringClass="[object String]";var cloneableClasses={};cloneableClasses[funcClass]=false;cloneableClasses[argsClass]=cloneableClasses[arrayClass]=cloneableClasses[boolClass]=cloneableClasses[dateClass]=cloneableClasses[numberClass]=cloneableClasses[objectClass]=cloneableClasses[regexpClass]=cloneableClasses[stringClass]=true;var objectTypes={"boolean":false,"function":true,object:true,number:false,string:false,undefined:false};var stringEscapes={"\\":"\\","'":"'","\n":"n","\r":"r","	":"t","\u2028":"u2028","\u2029":"u2029"};function runInContext(context){context=context?_.defaults(window.Object(),context,_.pick(window,contextProps)):window;var Array=context.Array,Boolean=context.Boolean,Date=context.Date,Function=context.Function,Math=context.Math,Number=context.Number,Object=context.Object,RegExp=context.RegExp,String=context.String,TypeError=context.TypeError;var arrayRef=Array(),objectRef=Object();var oldDash=context._;var reNative=RegExp("^"+String(objectRef.valueOf).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/valueOf|for [^\]]+/g,".+?")+"$");var ceil=Math.ceil,clearTimeout=context.clearTimeout,concat=arrayRef.concat,floor=Math.floor,getPrototypeOf=reNative.test(getPrototypeOf=Object.getPrototypeOf)&&getPrototypeOf,hasOwnProperty=objectRef.hasOwnProperty,push=arrayRef.push,setImmediate=context.setImmediate,setTimeout=context.setTimeout,toString=objectRef.toString;var nativeBind=reNative.test(nativeBind=toString.bind)&&nativeBind,nativeIsArray=reNative.test(nativeIsArray=Array.isArray)&&nativeIsArray,nativeIsFinite=context.isFinite,nativeIsNaN=context.isNaN,nativeKeys=reNative.test(nativeKeys=Object.keys)&&nativeKeys,nativeMax=Math.max,nativeMin=Math.min,nativeParseInt=context.parseInt,nativeRandom=Math.random,nativeSlice=arrayRef.slice;var isIeOpera=reNative.test(context.attachEvent),isV8=nativeBind&&!/\n|true/.test(nativeBind+isIeOpera);var ctorByClass={};ctorByClass[arrayClass]=Array;ctorByClass[boolClass]=Boolean;ctorByClass[dateClass]=Date;ctorByClass[objectClass]=Object;ctorByClass[numberClass]=Number;ctorByClass[regexpClass]=RegExp;ctorByClass[stringClass]=String;function lodash(value){return value&&typeof value=="object"&&!isArray(value)&&hasOwnProperty.call(value,"__wrapped__")?value:new lodashWrapper(value)}var support=lodash.support={};support.fastBind=nativeBind&&!isV8;lodash.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:reInterpolate,variable:"",imports:{_:lodash}};function cachedContains(array){var length=array.length,isLarge=length>=largeArraySize;if(isLarge){var cache={},index=-1;while(++index<length){var key=keyPrefix+array[index];(cache[key]||(cache[key]=[])).push(array[index])}}return function(value){if(isLarge){var key=keyPrefix+value;return cache[key]&&indexOf(cache[key],value)>-1}return indexOf(array,value)>-1}}function charAtCallback(value){return value.charCodeAt(0)}function compareAscending(a,b){var ai=a.index,bi=b.index;a=a.criteria;b=b.criteria;if(a!==b){if(a>b||typeof a=="undefined"){return 1}if(a<b||typeof b=="undefined"){return-1}}return ai<bi?-1:1}function createBound(func,thisArg,partialArgs,indicator){var isFunc=isFunction(func),isPartial=!partialArgs,key=thisArg;if(isPartial){var rightIndicator=indicator;partialArgs=thisArg}else if(!isFunc){if(!indicator){throw new TypeError}thisArg=func}function bound(){var args=arguments,thisBinding=isPartial?this:thisArg;if(!isFunc){func=thisArg[key]}if(partialArgs.length){args=args.length?(args=nativeSlice.call(args),rightIndicator?args.concat(partialArgs):partialArgs.concat(args)):partialArgs}if(this instanceof bound){noop.prototype=func.prototype;thisBinding=new noop;noop.prototype=null;var result=func.apply(thisBinding,args);return isObject(result)?result:thisBinding}return func.apply(thisBinding,args)}return bound}function escapeStringChar(match){return"\\"+stringEscapes[match]}function escapeHtmlChar(match){return htmlEscapes[match]}function lodashWrapper(value){this.__wrapped__=value}lodashWrapper.prototype=lodash.prototype;function noop(){}function shimIsPlainObject(value){var result=false;if(!(value&&toString.call(value)==objectClass)){return result}var ctor=value.constructor;if(isFunction(ctor)?ctor instanceof ctor:true){forIn(value,function(value,key){result=key});return result===false||hasOwnProperty.call(value,result)}return result}function slice(array,start,end){start||(start=0);if(typeof end=="undefined"){end=array?array.length:0}var index=-1,length=end-start||0,result=Array(length<0?0:length);while(++index<length){result[index]=array[start+index]}return result}function unescapeHtmlChar(match){return htmlUnescapes[match]}function isArguments(value){return toString.call(value)==argsClass}var isArray=nativeIsArray;var shimKeys=function(object){var index,iterable=object,result=[];if(!iterable)return result;if(!objectTypes[typeof object])return result;for(index in iterable){if(hasOwnProperty.call(iterable,index)){result.push(index)}}return result};var keys=!nativeKeys?shimKeys:function(object){if(!isObject(object)){return[]}return nativeKeys(object)};var htmlEscapes={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};var htmlUnescapes=invert(htmlEscapes);var assign=function(object,source,guard){var index,iterable=object,result=iterable;if(!iterable)return result;var args=arguments,argsIndex=0,argsLength=typeof guard=="number"?2:args.length;if(argsLength>3&&typeof args[argsLength-2]=="function"){var callback=lodash.createCallback(args[--argsLength-1],args[argsLength--],2)}else if(argsLength>2&&typeof args[argsLength-1]=="function"){callback=args[--argsLength]}while(++argsIndex<argsLength){iterable=args[argsIndex];if(iterable&&objectTypes[typeof iterable]){var length=iterable.length;index=-1;if(isArray(iterable)){while(++index<length){result[index]=callback?callback(result[index],iterable[index]):iterable[index]}}else{var ownIndex=-1,ownProps=objectTypes[typeof iterable]?keys(iterable):[],length=ownProps.length;while(++ownIndex<length){index=ownProps[ownIndex];result[index]=callback?callback(result[index],iterable[index]):iterable[index]}}}}return result};function clone(value,deep,callback,thisArg,stackA,stackB){var result=value;if(typeof deep=="function"){thisArg=callback;callback=deep;deep=false}if(typeof callback=="function"){callback=typeof thisArg=="undefined"?callback:lodash.createCallback(callback,thisArg,1);result=callback(result);if(typeof result!="undefined"){return result}result=value}var isObj=isObject(result);if(isObj){var className=toString.call(result);if(!cloneableClasses[className]){return result}var isArr=isArray(result)}if(!isObj||!deep){return isObj?isArr?slice(result):assign({},result):result}var ctor=ctorByClass[className];switch(className){case boolClass:case dateClass:return new ctor(+result);case numberClass:case stringClass:return new ctor(result);case regexpClass:return ctor(result.source,reFlags.exec(result))}stackA||(stackA=[]);stackB||(stackB=[]);var length=stackA.length;while(length--){if(stackA[length]==value){return stackB[length]}}result=isArr?ctor(result.length):{};if(isArr){if(hasOwnProperty.call(value,"index")){result.index=value.index}if(hasOwnProperty.call(value,"input")){result.input=value.input}}stackA.push(value);stackB.push(result);(isArr?forEach:forOwn)(value,function(objValue,key){result[key]=clone(objValue,deep,callback,undefined,stackA,stackB)});return result}function cloneDeep(value,callback,thisArg){return clone(value,true,callback,thisArg)}var defaults=function(object,source,guard){var index,iterable=object,result=iterable;if(!iterable)return result;var args=arguments,argsIndex=0,argsLength=typeof guard=="number"?2:args.length;while(++argsIndex<argsLength){iterable=args[argsIndex];if(iterable&&objectTypes[typeof iterable]){var length=iterable.length;index=-1;if(isArray(iterable)){while(++index<length){if(typeof result[index]=="undefined")result[index]=iterable[index]}}else{var ownIndex=-1,ownProps=objectTypes[typeof iterable]?keys(iterable):[],length=ownProps.length;while(++ownIndex<length){index=ownProps[ownIndex];if(typeof result[index]=="undefined")result[index]=iterable[index]}}}}return result};function findKey(object,callback,thisArg){var result;callback=lodash.createCallback(callback,thisArg);forOwn(object,function(value,key,object){if(callback(value,key,object)){result=key;return false}});return result}var forIn=function(collection,callback,thisArg){var index,iterable=collection,result=iterable;if(!iterable)return result;if(!objectTypes[typeof iterable])return result;callback=callback&&typeof thisArg=="undefined"?callback:lodash.createCallback(callback,thisArg);for(index in iterable){if(callback(iterable[index],index,collection)===false)return result}return result};var forOwn=function(collection,callback,thisArg){var index,iterable=collection,result=iterable;if(!iterable)return result;if(!objectTypes[typeof iterable])return result;callback=callback&&typeof thisArg=="undefined"?callback:lodash.createCallback(callback,thisArg);var ownIndex=-1,ownProps=objectTypes[typeof iterable]?keys(iterable):[],length=ownProps.length;while(++ownIndex<length){index=ownProps[ownIndex];if(callback(iterable[index],index,collection)===false)return result}return result};function functions(object){var result=[];forIn(object,function(value,key){if(isFunction(value)){result.push(key)}});return result.sort()}function has(object,property){return object?hasOwnProperty.call(object,property):false}function invert(object){var index=-1,props=keys(object),length=props.length,result={};while(++index<length){var key=props[index];result[object[key]]=key}return result}function isBoolean(value){return value===true||value===false||toString.call(value)==boolClass}function isDate(value){return value?typeof value=="object"&&toString.call(value)==dateClass:false}function isElement(value){return value?value.nodeType===1:false}function isEmpty(value){var result=true;if(!value){return result}var className=toString.call(value),length=value.length;if(className==arrayClass||className==stringClass||className==argsClass||className==objectClass&&typeof length=="number"&&isFunction(value.splice)){return!length}forOwn(value,function(){return result=false});return result}function isEqual(a,b,callback,thisArg,stackA,stackB){var whereIndicator=callback===indicatorObject;if(typeof callback=="function"&&!whereIndicator){callback=lodash.createCallback(callback,thisArg,2);var result=callback(a,b);if(typeof result!="undefined"){return!!result}}if(a===b){return a!==0||1/a==1/b}var type=typeof a,otherType=typeof b;if(a===a&&(!a||type!="function"&&type!="object")&&(!b||otherType!="function"&&otherType!="object")){return false}if(a==null||b==null){return a===b}var className=toString.call(a),otherClass=toString.call(b);if(className==argsClass){className=objectClass}if(otherClass==argsClass){otherClass=objectClass}if(className!=otherClass){return false}switch(className){case boolClass:case dateClass:return+a==+b;case numberClass:return a!=+a?b!=+b:a==0?1/a==1/b:a==+b;case regexpClass:case stringClass:return a==String(b)}var isArr=className==arrayClass;if(!isArr){if(hasOwnProperty.call(a,"__wrapped__ ")||hasOwnProperty.call(b,"__wrapped__")){return isEqual(a.__wrapped__||a,b.__wrapped__||b,callback,thisArg,stackA,stackB)}if(className!=objectClass){return false}var ctorA=a.constructor,ctorB=b.constructor;if(ctorA!=ctorB&&!(isFunction(ctorA)&&ctorA instanceof ctorA&&isFunction(ctorB)&&ctorB instanceof ctorB)){return false}}stackA||(stackA=[]);stackB||(stackB=[]);var length=stackA.length;while(length--){if(stackA[length]==a){return stackB[length]==b}}var size=0;result=true;stackA.push(a);stackB.push(b);if(isArr){length=a.length;size=b.length;result=size==a.length;if(!result&&!whereIndicator){return result}while(size--){var index=length,value=b[size];if(whereIndicator){while(index--){if(result=isEqual(a[index],value,callback,thisArg,stackA,stackB)){break}}}else if(!(result=isEqual(a[size],value,callback,thisArg,stackA,stackB))){break}}return result}forIn(b,function(value,key,b){if(hasOwnProperty.call(b,key)){size++;return result=hasOwnProperty.call(a,key)&&isEqual(a[key],value,callback,thisArg,stackA,stackB)}});if(result&&!whereIndicator){forIn(a,function(value,key,a){if(hasOwnProperty.call(a,key)){return result=--size>-1}})}return result}function isFinite(value){return nativeIsFinite(value)&&!nativeIsNaN(parseFloat(value))}function isFunction(value){return typeof value=="function"}function isObject(value){return value?objectTypes[typeof value]:false}function isNaN(value){return isNumber(value)&&value!=+value}function isNull(value){return value===null}function isNumber(value){return typeof value=="number"||toString.call(value)==numberClass}var isPlainObject=function(value){if(!(value&&toString.call(value)==objectClass)){return false}var valueOf=value.valueOf,objProto=typeof valueOf=="function"&&(objProto=getPrototypeOf(valueOf))&&getPrototypeOf(objProto);return objProto?value==objProto||getPrototypeOf(value)==objProto:shimIsPlainObject(value)};function isRegExp(value){return value?typeof value=="object"&&toString.call(value)==regexpClass:false}function isString(value){return typeof value=="string"||toString.call(value)==stringClass}function isUndefined(value){return typeof value=="undefined"}function merge(object,source,deepIndicator){var args=arguments,index=0,length=2;if(!isObject(object)){return object}if(deepIndicator===indicatorObject){var callback=args[3],stackA=args[4],stackB=args[5]}else{stackA=[];stackB=[];if(typeof deepIndicator!="number"){length=args.length}if(length>3&&typeof args[length-2]=="function"){callback=lodash.createCallback(args[--length-1],args[length--],2)}else if(length>2&&typeof args[length-1]=="function"){callback=args[--length]}}while(++index<length){(isArray(args[index])?forEach:forOwn)(args[index],function(source,key){var found,isArr,result=source,value=object[key];if(source&&((isArr=isArray(source))||isPlainObject(source))){var stackLength=stackA.length;while(stackLength--){if(found=stackA[stackLength]==source){value=stackB[stackLength];break}}if(!found){var isShallow;if(callback){result=callback(value,source);if(isShallow=typeof result!="undefined"){value=result}}if(!isShallow){value=isArr?isArray(value)?value:[]:isPlainObject(value)?value:{}}stackA.push(source);stackB.push(value);if(!isShallow){value=merge(value,source,indicatorObject,callback,stackA,stackB)}}}else{if(callback){result=callback(value,source);if(typeof result=="undefined"){result=source}}if(typeof result!="undefined"){value=result}}object[key]=value})}return object}function omit(object,callback,thisArg){var isFunc=typeof callback=="function",result={};if(isFunc){callback=lodash.createCallback(callback,thisArg)}else{var props=concat.apply(arrayRef,nativeSlice.call(arguments,1))}forIn(object,function(value,key,object){if(isFunc?!callback(value,key,object):indexOf(props,key)<0){result[key]=value}});return result}function pairs(object){var index=-1,props=keys(object),length=props.length,result=Array(length);while(++index<length){var key=props[index];result[index]=[key,object[key]]}return result}function pick(object,callback,thisArg){var result={};if(typeof callback!="function"){var index=-1,props=concat.apply(arrayRef,nativeSlice.call(arguments,1)),length=isObject(object)?props.length:0;while(++index<length){var key=props[index];if(key in object){result[key]=object[key]}}}else{callback=lodash.createCallback(callback,thisArg);forIn(object,function(value,key,object){if(callback(value,key,object)){result[key]=value}})}return result}function values(object){var index=-1,props=keys(object),length=props.length,result=Array(length);while(++index<length){result[index]=object[props[index]]}return result}function at(collection){var index=-1,props=concat.apply(arrayRef,nativeSlice.call(arguments,1)),length=props.length,result=Array(length);while(++index<length){result[index]=collection[props[index]]}return result}function contains(collection,target,fromIndex){var index=-1,length=collection?collection.length:0,result=false;fromIndex=(fromIndex<0?nativeMax(0,length+fromIndex):fromIndex)||0;if(typeof length=="number"){result=(isString(collection)?collection.indexOf(target,fromIndex):indexOf(collection,target,fromIndex))>-1}else{forOwn(collection,function(value){if(++index>=fromIndex){return!(result=value===target)}})}return result}function countBy(collection,callback,thisArg){var result={};callback=lodash.createCallback(callback,thisArg);forEach(collection,function(value,key,collection){key=String(callback(value,key,collection));hasOwnProperty.call(result,key)?result[key]++:result[key]=1});return result}function every(collection,callback,thisArg){var result=true;callback=lodash.createCallback(callback,thisArg);var index=-1,length=collection?collection.length:0;if(typeof length=="number"){while(++index<length){if(!(result=!!callback(collection[index],index,collection))){break}}}else{forOwn(collection,function(value,index,collection){return result=!!callback(value,index,collection)})}return result}function filter(collection,callback,thisArg){var result=[];callback=lodash.createCallback(callback,thisArg);var index=-1,length=collection?collection.length:0;if(typeof length=="number"){while(++index<length){var value=collection[index];if(callback(value,index,collection)){result.push(value)}}}else{forOwn(collection,function(value,index,collection){if(callback(value,index,collection)){result.push(value)}})}return result}function find(collection,callback,thisArg){callback=lodash.createCallback(callback,thisArg);var index=-1,length=collection?collection.length:0;if(typeof length=="number"){while(++index<length){var value=collection[index];if(callback(value,index,collection)){return value}}}else{var result;forOwn(collection,function(value,index,collection){if(callback(value,index,collection)){result=value;return false}});return result}}function forEach(collection,callback,thisArg){var index=-1,length=collection?collection.length:0;callback=callback&&typeof thisArg=="undefined"?callback:lodash.createCallback(callback,thisArg);if(typeof length=="number"){while(++index<length){if(callback(collection[index],index,collection)===false){break}}}else{forOwn(collection,callback)}return collection}function groupBy(collection,callback,thisArg){var result={};callback=lodash.createCallback(callback,thisArg);forEach(collection,function(value,key,collection){key=String(callback(value,key,collection));(hasOwnProperty.call(result,key)?result[key]:result[key]=[]).push(value)});return result}function invoke(collection,methodName){var args=nativeSlice.call(arguments,2),index=-1,isFunc=typeof methodName=="function",length=collection?collection.length:0,result=Array(typeof length=="number"?length:0);forEach(collection,function(value){result[++index]=(isFunc?methodName:value[methodName]).apply(value,args)});return result}function map(collection,callback,thisArg){var index=-1,length=collection?collection.length:0;
callback=lodash.createCallback(callback,thisArg);if(typeof length=="number"){var result=Array(length);while(++index<length){result[index]=callback(collection[index],index,collection)}}else{result=[];forOwn(collection,function(value,key,collection){result[++index]=callback(value,key,collection)})}return result}function max(collection,callback,thisArg){var computed=-Infinity,result=computed;if(!callback&&isArray(collection)){var index=-1,length=collection.length;while(++index<length){var value=collection[index];if(value>result){result=value}}}else{callback=!callback&&isString(collection)?charAtCallback:lodash.createCallback(callback,thisArg);forEach(collection,function(value,index,collection){var current=callback(value,index,collection);if(current>computed){computed=current;result=value}})}return result}function min(collection,callback,thisArg){var computed=Infinity,result=computed;if(!callback&&isArray(collection)){var index=-1,length=collection.length;while(++index<length){var value=collection[index];if(value<result){result=value}}}else{callback=!callback&&isString(collection)?charAtCallback:lodash.createCallback(callback,thisArg);forEach(collection,function(value,index,collection){var current=callback(value,index,collection);if(current<computed){computed=current;result=value}})}return result}function pluck(collection,property){var index=-1,length=collection?collection.length:0;if(typeof length=="number"){var result=Array(length);while(++index<length){result[index]=collection[index][property]}}return result||map(collection,property)}function reduce(collection,callback,accumulator,thisArg){if(!collection)return accumulator;var noaccum=arguments.length<3;callback=lodash.createCallback(callback,thisArg,4);var index=-1,length=collection.length;if(typeof length=="number"){if(noaccum){accumulator=collection[++index]}while(++index<length){accumulator=callback(accumulator,collection[index],index,collection)}}else{forOwn(collection,function(value,index,collection){accumulator=noaccum?(noaccum=false,value):callback(accumulator,value,index,collection)})}return accumulator}function reduceRight(collection,callback,accumulator,thisArg){var iterable=collection,length=collection?collection.length:0,noaccum=arguments.length<3;if(typeof length!="number"){var props=keys(collection);length=props.length}callback=lodash.createCallback(callback,thisArg,4);forEach(collection,function(value,index,collection){index=props?props[--length]:--length;accumulator=noaccum?(noaccum=false,iterable[index]):callback(accumulator,iterable[index],index,collection)});return accumulator}function reject(collection,callback,thisArg){callback=lodash.createCallback(callback,thisArg);return filter(collection,function(value,index,collection){return!callback(value,index,collection)})}function shuffle(collection){var index=-1,length=collection?collection.length:0,result=Array(typeof length=="number"?length:0);forEach(collection,function(value){var rand=floor(nativeRandom()*(++index+1));result[index]=result[rand];result[rand]=value});return result}function size(collection){var length=collection?collection.length:0;return typeof length=="number"?length:keys(collection).length}function some(collection,callback,thisArg){var result;callback=lodash.createCallback(callback,thisArg);var index=-1,length=collection?collection.length:0;if(typeof length=="number"){while(++index<length){if(result=callback(collection[index],index,collection)){break}}}else{forOwn(collection,function(value,index,collection){return!(result=callback(value,index,collection))})}return!!result}function sortBy(collection,callback,thisArg){var index=-1,length=collection?collection.length:0,result=Array(typeof length=="number"?length:0);callback=lodash.createCallback(callback,thisArg);forEach(collection,function(value,key,collection){result[++index]={criteria:callback(value,key,collection),index:index,value:value}});length=result.length;result.sort(compareAscending);while(length--){result[length]=result[length].value}return result}function toArray(collection){if(collection&&typeof collection.length=="number"){return slice(collection)}return values(collection)}var where=filter;function compact(array){var index=-1,length=array?array.length:0,result=[];while(++index<length){var value=array[index];if(value){result.push(value)}}return result}function difference(array){var index=-1,length=array?array.length:0,flattened=concat.apply(arrayRef,nativeSlice.call(arguments,1)),contains=cachedContains(flattened),result=[];while(++index<length){var value=array[index];if(!contains(value)){result.push(value)}}return result}function findIndex(array,callback,thisArg){var index=-1,length=array?array.length:0;callback=lodash.createCallback(callback,thisArg);while(++index<length){if(callback(array[index],index,array)){return index}}return-1}function first(array,callback,thisArg){if(array){var n=0,length=array.length;if(typeof callback!="number"&&callback!=null){var index=-1;callback=lodash.createCallback(callback,thisArg);while(++index<length&&callback(array[index],index,array)){n++}}else{n=callback;if(n==null||thisArg){return array[0]}}return slice(array,0,nativeMin(nativeMax(0,n),length))}}function flatten(array,isShallow,callback,thisArg){var index=-1,length=array?array.length:0,result=[];if(typeof isShallow!="boolean"&&isShallow!=null){thisArg=callback;callback=isShallow;isShallow=false}if(callback!=null){callback=lodash.createCallback(callback,thisArg)}while(++index<length){var value=array[index];if(callback){value=callback(value,index,array)}if(isArray(value)){push.apply(result,isShallow?value:flatten(value))}else{result.push(value)}}return result}function indexOf(array,value,fromIndex){var index=-1,length=array?array.length:0;if(typeof fromIndex=="number"){index=(fromIndex<0?nativeMax(0,length+fromIndex):fromIndex||0)-1}else if(fromIndex){index=sortedIndex(array,value);return array[index]===value?index:-1}while(++index<length){if(array[index]===value){return index}}return-1}function initial(array,callback,thisArg){if(!array){return[]}var n=0,length=array.length;if(typeof callback!="number"&&callback!=null){var index=length;callback=lodash.createCallback(callback,thisArg);while(index--&&callback(array[index],index,array)){n++}}else{n=callback==null||thisArg?1:callback||n}return slice(array,0,nativeMin(nativeMax(0,length-n),length))}function intersection(array){var args=arguments,argsLength=args.length,cache={0:{}},index=-1,length=array?array.length:0,isLarge=length>=largeArraySize,result=[],seen=result;outer:while(++index<length){var value=array[index];if(isLarge){var key=keyPrefix+value;var inited=cache[0][key]?!(seen=cache[0][key]):seen=cache[0][key]=[]}if(inited||indexOf(seen,value)<0){if(isLarge){seen.push(value)}var argsIndex=argsLength;while(--argsIndex){if(!(cache[argsIndex]||(cache[argsIndex]=cachedContains(args[argsIndex])))(value)){continue outer}}result.push(value)}}return result}function last(array,callback,thisArg){if(array){var n=0,length=array.length;if(typeof callback!="number"&&callback!=null){var index=length;callback=lodash.createCallback(callback,thisArg);while(index--&&callback(array[index],index,array)){n++}}else{n=callback;if(n==null||thisArg){return array[length-1]}}return slice(array,nativeMax(0,length-n))}}function lastIndexOf(array,value,fromIndex){var index=array?array.length:0;if(typeof fromIndex=="number"){index=(fromIndex<0?nativeMax(0,index+fromIndex):nativeMin(fromIndex,index-1))+1}while(index--){if(array[index]===value){return index}}return-1}function range(start,end,step){start=+start||0;step=+step||1;if(end==null){end=start;start=0}var index=-1,length=nativeMax(0,ceil((end-start)/step)),result=Array(length);while(++index<length){result[index]=start;start+=step}return result}function rest(array,callback,thisArg){if(typeof callback!="number"&&callback!=null){var n=0,index=-1,length=array?array.length:0;callback=lodash.createCallback(callback,thisArg);while(++index<length&&callback(array[index],index,array)){n++}}else{n=callback==null||thisArg?1:nativeMax(0,callback)}return slice(array,n)}function sortedIndex(array,value,callback,thisArg){var low=0,high=array?array.length:low;callback=callback?lodash.createCallback(callback,thisArg,1):identity;value=callback(value);while(low<high){var mid=low+high>>>1;callback(array[mid])<value?low=mid+1:high=mid}return low}function union(array){if(!isArray(array)){arguments[0]=array?nativeSlice.call(array):arrayRef}return uniq(concat.apply(arrayRef,arguments))}function uniq(array,isSorted,callback,thisArg){var index=-1,length=array?array.length:0,result=[],seen=result;if(typeof isSorted!="boolean"&&isSorted!=null){thisArg=callback;callback=isSorted;isSorted=false}var isLarge=!isSorted&&length>=largeArraySize;if(isLarge){var cache={}}if(callback!=null){seen=[];callback=lodash.createCallback(callback,thisArg)}while(++index<length){var value=array[index],computed=callback?callback(value,index,array):value;if(isLarge){var key=keyPrefix+computed;var inited=cache[key]?!(seen=cache[key]):seen=cache[key]=[]}if(isSorted?!index||seen[seen.length-1]!==computed:inited||indexOf(seen,computed)<0){if(callback||isLarge){seen.push(computed)}result.push(value)}}return result}function unzip(array){var index=-1,length=array?array.length:0,tupleLength=length?max(pluck(array,"length")):0,result=Array(tupleLength);while(++index<length){var tupleIndex=-1,tuple=array[index];while(++tupleIndex<tupleLength){(result[tupleIndex]||(result[tupleIndex]=Array(length)))[index]=tuple[tupleIndex]}}return result}function without(array){return difference(array,nativeSlice.call(arguments,1))}function zip(array){var index=-1,length=array?max(pluck(arguments,"length")):0,result=Array(length);while(++index<length){result[index]=pluck(arguments,index)}return result}function zipObject(keys,values){var index=-1,length=keys?keys.length:0,result={};while(++index<length){var key=keys[index];if(values){result[key]=values[index]}else{result[key[0]]=key[1]}}return result}function after(n,func){if(n<1){return func()}return function(){if(--n<1){return func.apply(this,arguments)}}}function bind(func,thisArg){return support.fastBind||nativeBind&&arguments.length>2?nativeBind.call.apply(nativeBind,arguments):createBound(func,thisArg,nativeSlice.call(arguments,2))}function bindAll(object){var funcs=arguments.length>1?concat.apply(arrayRef,nativeSlice.call(arguments,1)):functions(object),index=-1,length=funcs.length;while(++index<length){var key=funcs[index];object[key]=bind(object[key],object)}return object}function bindKey(object,key){return createBound(object,key,nativeSlice.call(arguments,2),indicatorObject)}function compose(){var funcs=arguments;return function(){var args=arguments,length=funcs.length;while(length--){args=[funcs[length].apply(this,args)]}return args[0]}}function createCallback(func,thisArg,argCount){if(func==null){return identity}var type=typeof func;if(type!="function"){if(type!="object"){return function(object){return object[func]}}var props=keys(func);return function(object){var length=props.length,result=false;while(length--){if(!(result=isEqual(object[props[length]],func[props[length]],indicatorObject))){break}}return result}}if(typeof thisArg!="undefined"){if(argCount===1){return function(value){return func.call(thisArg,value)}}if(argCount===2){return function(a,b){return func.call(thisArg,a,b)}}if(argCount===4){return function(accumulator,value,index,collection){return func.call(thisArg,accumulator,value,index,collection)}}return function(value,index,collection){return func.call(thisArg,value,index,collection)}}return func}function debounce(func,wait,options){var args,inited,result,thisArg,timeoutId,trailing=true;function delayed(){inited=timeoutId=null;if(trailing){result=func.apply(thisArg,args)}}if(options===true){var leading=true;trailing=false}else if(options&&objectTypes[typeof options]){leading=options.leading;trailing="trailing"in options?options.trailing:trailing}return function(){args=arguments;thisArg=this;clearTimeout(timeoutId);if(!inited&&leading){inited=true;result=func.apply(thisArg,args)}else{timeoutId=setTimeout(delayed,wait)}return result}}function defer(func){var args=nativeSlice.call(arguments,1);return setTimeout(function(){func.apply(undefined,args)},1)}if(isV8&&freeModule&&typeof setImmediate=="function"){defer=bind(setImmediate,context)}function delay(func,wait){var args=nativeSlice.call(arguments,2);return setTimeout(function(){func.apply(undefined,args)},wait)}function memoize(func,resolver){var cache={};return function(){var key=keyPrefix+(resolver?resolver.apply(this,arguments):arguments[0]);return hasOwnProperty.call(cache,key)?cache[key]:cache[key]=func.apply(this,arguments)}}function once(func){var ran,result;return function(){if(ran){return result}ran=true;result=func.apply(this,arguments);func=null;return result}}function partial(func){return createBound(func,nativeSlice.call(arguments,1))}function partialRight(func){return createBound(func,nativeSlice.call(arguments,1),null,indicatorObject)}function throttle(func,wait,options){var args,result,thisArg,timeoutId,lastCalled=0,leading=true,trailing=true;function trailingCall(){timeoutId=null;if(trailing){lastCalled=new Date;result=func.apply(thisArg,args)}}if(options===false){leading=false}else if(options&&objectTypes[typeof options]){leading="leading"in options?options.leading:leading;trailing="trailing"in options?options.trailing:trailing}return function(){var now=new Date;if(!timeoutId&&!leading){lastCalled=now}var remaining=wait-(now-lastCalled);args=arguments;thisArg=this;if(remaining<=0){clearTimeout(timeoutId);timeoutId=null;lastCalled=now;result=func.apply(thisArg,args)}else if(!timeoutId){timeoutId=setTimeout(trailingCall,remaining)}return result}}function wrap(value,wrapper){return function(){var args=[value];push.apply(args,arguments);return wrapper.apply(this,args)}}function escape(string){return string==null?"":String(string).replace(reUnescapedHtml,escapeHtmlChar)}function identity(value){return value}function mixin(object){forEach(functions(object),function(methodName){var func=lodash[methodName]=object[methodName];lodash.prototype[methodName]=function(){var value=this.__wrapped__,args=[value];push.apply(args,arguments);var result=func.apply(lodash,args);return value&&typeof value=="object"&&value==result?this:new lodashWrapper(result)}})}function noConflict(){context._=oldDash;return this}var parseInt=nativeParseInt(whitespace+"08")==8?nativeParseInt:function(value,radix){return nativeParseInt(isString(value)?value.replace(reLeadingSpacesAndZeros,""):value,radix||0)};function random(min,max){if(min==null&&max==null){max=1}min=+min||0;if(max==null){max=min;min=0}return min+floor(nativeRandom()*((+max||0)-min+1))}function result(object,property){var value=object?object[property]:undefined;return isFunction(value)?object[property]():value}function template(text,data,options){var settings=lodash.templateSettings;text||(text="");options=defaults({},options,settings);var imports=defaults({},options.imports,settings.imports),importsKeys=keys(imports),importsValues=values(imports);var isEvaluating,index=0,interpolate=options.interpolate||reNoMatch,source="__p += '";var reDelimiters=RegExp((options.escape||reNoMatch).source+"|"+interpolate.source+"|"+(interpolate===reInterpolate?reEsTemplate:reNoMatch).source+"|"+(options.evaluate||reNoMatch).source+"|$","g");text.replace(reDelimiters,function(match,escapeValue,interpolateValue,esTemplateValue,evaluateValue,offset){interpolateValue||(interpolateValue=esTemplateValue);source+=text.slice(index,offset).replace(reUnescapedString,escapeStringChar);if(escapeValue){source+="' +\n__e("+escapeValue+") +\n'"}if(evaluateValue){isEvaluating=true;source+="';\n"+evaluateValue+";\n__p += '"}if(interpolateValue){source+="' +\n((__t = ("+interpolateValue+")) == null ? '' : __t) +\n'"}index=offset+match.length;return match});source+="';\n";var variable=options.variable,hasVariable=variable;if(!hasVariable){variable="obj";source="with ("+variable+") {\n"+source+"\n}\n"}source=(isEvaluating?source.replace(reEmptyStringLeading,""):source).replace(reEmptyStringMiddle,"$1").replace(reEmptyStringTrailing,"$1;");source="function("+variable+") {\n"+(hasVariable?"":variable+" || ("+variable+" = {});\n")+"var __t, __p = '', __e = _.escape"+(isEvaluating?", __j = Array.prototype.join;\n"+"function print() { __p += __j.call(arguments, '') }\n":";\n")+source+"return __p\n}";var sourceURL="\n/*\n//@ sourceURL="+(options.sourceURL||"/lodash/template/source["+templateCounter++ +"]")+"\n*/";try{var result=Function(importsKeys,"return "+source+sourceURL).apply(undefined,importsValues)}catch(e){e.source=source;throw e}if(data){return result(data)}result.source=source;return result}function times(n,callback,thisArg){n=(n=+n)>-1?n:0;var index=-1,result=Array(n);callback=lodash.createCallback(callback,thisArg,1);while(++index<n){result[index]=callback(index)}return result}function unescape(string){return string==null?"":String(string).replace(reEscapedHtml,unescapeHtmlChar)}function uniqueId(prefix){var id=++idCounter;return String(prefix==null?"":prefix)+id}function tap(value,interceptor){interceptor(value);return value}function wrapperToString(){return String(this.__wrapped__)}function wrapperValueOf(){return this.__wrapped__}lodash.after=after;lodash.assign=assign;lodash.at=at;lodash.bind=bind;lodash.bindAll=bindAll;lodash.bindKey=bindKey;lodash.compact=compact;lodash.compose=compose;lodash.countBy=countBy;lodash.createCallback=createCallback;lodash.debounce=debounce;lodash.defaults=defaults;lodash.defer=defer;lodash.delay=delay;lodash.difference=difference;lodash.filter=filter;lodash.flatten=flatten;lodash.forEach=forEach;lodash.forIn=forIn;lodash.forOwn=forOwn;lodash.functions=functions;lodash.groupBy=groupBy;lodash.initial=initial;lodash.intersection=intersection;lodash.invert=invert;lodash.invoke=invoke;lodash.keys=keys;lodash.map=map;lodash.max=max;lodash.memoize=memoize;lodash.merge=merge;lodash.min=min;lodash.omit=omit;lodash.once=once;lodash.pairs=pairs;lodash.partial=partial;lodash.partialRight=partialRight;lodash.pick=pick;lodash.pluck=pluck;lodash.range=range;lodash.reject=reject;lodash.rest=rest;lodash.shuffle=shuffle;lodash.sortBy=sortBy;lodash.tap=tap;lodash.throttle=throttle;lodash.times=times;lodash.toArray=toArray;lodash.union=union;lodash.uniq=uniq;lodash.unzip=unzip;lodash.values=values;lodash.where=where;lodash.without=without;lodash.wrap=wrap;lodash.zip=zip;lodash.zipObject=zipObject;lodash.collect=map;lodash.drop=rest;lodash.each=forEach;lodash.extend=assign;lodash.methods=functions;lodash.object=zipObject;lodash.select=filter;lodash.tail=rest;lodash.unique=uniq;mixin(lodash);lodash.clone=clone;lodash.cloneDeep=cloneDeep;lodash.contains=contains;lodash.escape=escape;lodash.every=every;lodash.find=find;lodash.findIndex=findIndex;lodash.findKey=findKey;lodash.has=has;lodash.identity=identity;lodash.indexOf=indexOf;lodash.isArguments=isArguments;lodash.isArray=isArray;lodash.isBoolean=isBoolean;lodash.isDate=isDate;lodash.isElement=isElement;lodash.isEmpty=isEmpty;lodash.isEqual=isEqual;lodash.isFinite=isFinite;lodash.isFunction=isFunction;lodash.isNaN=isNaN;lodash.isNull=isNull;lodash.isNumber=isNumber;lodash.isObject=isObject;lodash.isPlainObject=isPlainObject;lodash.isRegExp=isRegExp;lodash.isString=isString;lodash.isUndefined=isUndefined;lodash.lastIndexOf=lastIndexOf;lodash.mixin=mixin;lodash.noConflict=noConflict;lodash.parseInt=parseInt;lodash.random=random;lodash.reduce=reduce;lodash.reduceRight=reduceRight;lodash.result=result;lodash.runInContext=runInContext;lodash.size=size;lodash.some=some;lodash.sortedIndex=sortedIndex;lodash.template=template;lodash.unescape=unescape;lodash.uniqueId=uniqueId;lodash.all=every;lodash.any=some;lodash.detect=find;lodash.foldl=reduce;lodash.foldr=reduceRight;lodash.include=contains;lodash.inject=reduce;forOwn(lodash,function(func,methodName){if(!lodash.prototype[methodName]){lodash.prototype[methodName]=function(){var args=[this.__wrapped__];push.apply(args,arguments);return func.apply(lodash,args)}}});lodash.first=first;lodash.last=last;lodash.take=first;lodash.head=first;forOwn(lodash,function(func,methodName){if(!lodash.prototype[methodName]){lodash.prototype[methodName]=function(callback,thisArg){var result=func(this.__wrapped__,callback,thisArg);return callback==null||thisArg&&typeof callback!="function"?result:new lodashWrapper(result)}}});lodash.VERSION="1.2.1";lodash.prototype.toString=wrapperToString;lodash.prototype.value=wrapperValueOf;lodash.prototype.valueOf=wrapperValueOf;forEach(["join","pop","shift"],function(methodName){var func=arrayRef[methodName];lodash.prototype[methodName]=function(){return func.apply(this.__wrapped__,arguments)}});forEach(["push","reverse","sort","unshift"],function(methodName){var func=arrayRef[methodName];lodash.prototype[methodName]=function(){func.apply(this.__wrapped__,arguments);return this}});forEach(["concat","slice","splice"],function(methodName){var func=arrayRef[methodName];lodash.prototype[methodName]=function(){return new lodashWrapper(func.apply(this.__wrapped__,arguments))}});return lodash}var _=runInContext();if(typeof define=="function"&&typeof define.amd=="object"&&define.amd){window._=_;define(function(){return _})}else if(freeExports&&!freeExports.nodeType){if(freeModule){(freeModule.exports=_)._=_}else{freeExports._=_}}else{window._=_}}(this)}(self)},{}],71:[function(require,module,exports){var _=require("lodash"),Backbone=require("backbone");var Base=Backbone.View.extend({initialize:function(opts){var tn=this.templateName;if(this.beforeInit){this.beforeInit(opts)}this.template=this.template||opts.template;if(!this.template){this.template=function(){return""}}if(this.afterInit){this.afterInit(opts)}this.render()},context:function(){return _.extend({},this.options,this.model)},close:function(){if(this.beforeClose){this.beforeClose()}this.closeSubviews();this.off();this.remove()},render:function(){var self=this,model=this.model;if(this.beforeRender){this.beforeRender()}this.closeSubviews();this.$el.empty();if(this.beforeTemplating){model=this.beforeTemplating()}if(this.context){model=this.context()}this.$el.html(this.template(model));_.defer(function(){self.trigger("afterRender")});if(this.afterRender){this.afterRender()}return this},proxy:function(name,view){var self=this;view.on(name,function(){var args=Array.prototype.slice.call(arguments,0);args.splice(0,0,name);self.trigger.apply(self,args)})},eachSubview:function(iterator){_.each(this.subviews,iterator)},appendSubview:function(view,el){el||(el=this.$el);this.subviews=this.subviews||{};this.subviews[view.cid]=view;el.append(view.el);_.defer(function(){view.trigger("afterAppend")});if(view.afterAppend){view.afterAppend()}},closeSubviews:function(){this.eachSubview(function(subview){subview.close()});this.subviews={}},detachSubview:function(view){if(this.subviews){delete this.subviews[view.cid]}view.$el.detach()}});module.exports=Base},{backbone:55,lodash:74}],62:[function(require,module,exports){var Handlebars=require("handlebars-runtime");module.exports=Handlebars.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"];helpers=this.merge(helpers,Handlebars.helpers);data=data||{};var buffer="",stack1,functionType="function",escapeExpression=this.escapeExpression,self=this;function program1(depth0,data){var buffer="",stack1;buffer+='\n  <li>\n    <div class="relfix">\n      <a href="';if(stack1=helpers.playerUrl){stack1=stack1.call(depth0,{hash:{},data:data})}else{stack1=depth0.playerUrl;stack1=typeof stack1===functionType?stack1.apply(depth0):stack1}buffer+=escapeExpression(stack1)+'" class="app">\n        <img src="';if(stack1=helpers.thumbnailUrl){stack1=stack1.call(depth0,{hash:{},data:data})}else{stack1=depth0.thumbnailUrl;stack1=typeof stack1===functionType?stack1.apply(depth0):stack1}buffer+=escapeExpression(stack1)+'" alt="';if(stack1=helpers.name){stack1=stack1.call(depth0,{hash:{},data:data})}else{stack1=depth0.name;stack1=typeof stack1===functionType?stack1.apply(depth0):stack1}buffer+=escapeExpression(stack1)+'" />\n        ';stack1=helpers["if"].call(depth0,depth0.editHref,{hash:{},inverse:self.noop,fn:self.program(2,program2,data),data:data});if(stack1||stack1===0){buffer+=stack1}buffer+='\n        <div class="captions centered">\n          <h2>';if(stack1=helpers.name){stack1=stack1.call(depth0,{hash:{},data:data})}else{stack1=depth0.name;stack1=typeof stack1===functionType?stack1.apply(depth0):stack1}buffer+=escapeExpression(stack1)+"</h2>\n        </div>\n      </a>\n    </div>\n  </li>\n";return buffer}function program2(depth0,data){var buffer="",stack1;buffer+='\n          <p class="absfix">\n            <a href="';if(stack1=helpers.editHref){stack1=stack1.call(depth0,{hash:{},data:data})}else{stack1=depth0.editHref;stack1=typeof stack1===functionType?stack1.apply(depth0):stack1}buffer+=escapeExpression(stack1)+'" class="app btn btn-mini btn-info">Edit</a>\n          </p>\n        ';return buffer}buffer+='<ul class="reelgrid">\n';stack1=helpers.each.call(depth0,depth0.media,{hash:{},inverse:self.noop,fn:self.program(1,program1,data),data:data});if(stack1||stack1===0){buffer+=stack1}buffer+="\n</ul>\n";return buffer})},{"handlebars-runtime":73}],64:[function(require,module,exports){var Handlebars=require("handlebars-runtime");module.exports=Handlebars.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"];helpers=this.merge(helpers,Handlebars.helpers);data=data||{};var buffer="",stack1,functionType="function",escapeExpression=this.escapeExpression,self=this;function program1(depth0,data){var buffer="",stack1;buffer+='\n  <iframe src="';if(stack1=helpers.thumberUrl){stack1=stack1.call(depth0,{hash:{},data:data})}else{stack1=depth0.thumberUrl;stack1=typeof stack1===functionType?stack1.apply(depth0):stack1}buffer+=escapeExpression(stack1)+'" frameborder="0" width="100%"></iframe>\n';return buffer}stack1=helpers["if"].call(depth0,depth0.thumberUrl,{hash:{},inverse:self.noop,fn:self.program(1,program1,data),data:data});if(stack1||stack1===0){buffer+=stack1}buffer+="\n";return buffer})},{"handlebars-runtime":73}],66:[function(require,module,exports){var Handlebars=require("handlebars-runtime");module.exports=Handlebars.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"];helpers=this.merge(helpers,Handlebars.helpers);data=data||{};var buffer="",stack1,functionType="function",escapeExpression=this.escapeExpression,self=this;function program1(depth0,data){var buffer="",stack1;buffer+='\n    <li>\n      <div class="relfix">\n        <a href="';if(stack1=helpers.playerUrl){stack1=stack1.call(depth0,{hash:{},data:data})}else{stack1=depth0.playerUrl;stack1=typeof stack1===functionType?stack1.apply(depth0):stack1}buffer+=escapeExpression(stack1)+'" class="app">\n          <img src="';if(stack1=helpers.thumbnailUrl){stack1=stack1.call(depth0,{hash:{},data:data})}else{stack1=depth0.thumbnailUrl;stack1=typeof stack1===functionType?stack1.apply(depth0):stack1}buffer+=escapeExpression(stack1)+'" alt="';if(stack1=helpers.name){stack1=stack1.call(depth0,{hash:{},data:data})}else{stack1=depth0.name;stack1=typeof stack1===functionType?stack1.apply(depth0):stack1}buffer+=escapeExpression(stack1)+'" />\n        </a>\n        ';stack1=helpers["if"].call(depth0,depth0.editHref,{hash:{},inverse:self.noop,fn:self.program(2,program2,data),data:data});if(stack1||stack1===0){buffer+=stack1}buffer+="\n      </div>\n    </li>\n  ";return buffer}function program2(depth0,data){var buffer="",stack1;buffer+='\n          <p class="absfix">\n            <a href="';if(stack1=helpers.editHref){stack1=stack1.call(depth0,{hash:{},data:data})}else{stack1=depth0.editHref;stack1=typeof stack1===functionType?stack1.apply(depth0):stack1}buffer+=escapeExpression(stack1)+'" class="app btn btn-micro btn-info">Edit</a>\n          </p>\n        ';return buffer}buffer+='<div class="sliderWrap">\n  <ul class="carousel elastislide-list">\n  ';stack1=helpers.each.call(depth0,depth0.media,{hash:{},inverse:self.noop,fn:self.program(1,program1,data),data:data});if(stack1||stack1===0){buffer+=stack1}buffer+='\n  </ul>\n</div>\n<div class="controls clearfix centered">\n  <a href="#" class="carouselControl bigClose pull-left">&times;</a>\n  <a href="#" class="carouselControl reelToggle"><span class="symbol">&and;</span><br /><small>Reel</small></a>\n</div>\n';return buffer})},{"handlebars-runtime":73}]},{},[1]);